"use strict";(self["webpackChunkgraduate"]=self["webpackChunkgraduate"]||[]).push([[735],{4735:function(e,t,r){r.r(t),r.d(t,{default:function(){return je}});var n=r(3396);const o={class:"map",ref:"container"};function i(e,t,r,i,s,a){return(0,n.wg)(),(0,n.iD)("div",o,null,512)}var s=r(4870),a=r(8277),l=r(9447),c=r(617),u=r(805),h=(r(7658),r(6630)),d=r(3350),f=r(2392),m=r(2830),p=r(9721),g=r(1625),Z=r(6816),y=r(4013),T=r(3261);function w(e){if(!(0,g.Z)(e))throw new Z.Z("uri is required.");const t=new T(e);t.normalize();let r=t.path();const n=r.lastIndexOf("/");return-1!==n&&(r=r.substr(n+1)),r}var b=w,_=r(6019),A=r(3802),E=r(3870);function x(){this._cache={}}x.prototype.fromColor=function(e,t){if(!(0,g.Z)(e))throw new Z.Z("color is required");if(!(0,g.Z)(t))throw new Z.Z("size is required");return P(void 0,void 0,e,t,this._cache)},x.prototype.fromUrl=function(e,t,r){if(!(0,g.Z)(e))throw new Z.Z("url is required");if(!(0,g.Z)(t))throw new Z.Z("color is required");if(!(0,g.Z)(r))throw new Z.Z("size is required");return P(e,void 0,t,r,this._cache)},x.prototype.fromMakiIconId=function(e,t,r){if(!(0,g.Z)(e))throw new Z.Z("id is required");if(!(0,g.Z)(t))throw new Z.Z("color is required");if(!(0,g.Z)(r))throw new Z.Z("size is required");return P((0,_.Z)(`Assets/Textures/maki/${encodeURIComponent(e)}.png`),void 0,t,r,this._cache)},x.prototype.fromText=function(e,t,r){if(!(0,g.Z)(e))throw new Z.Z("text is required");if(!(0,g.Z)(t))throw new Z.Z("color is required");if(!(0,g.Z)(r))throw new Z.Z("size is required");return P(void 0,e,t,r,this._cache)};const R=new d.Z;function v(e,t,r){e.save(),e.scale(r/24,r/24),e.fillStyle=t.toCssColorString(),e.strokeStyle=t.brighten(.6,R).toCssColorString(),e.lineWidth=.846,e.beginPath(),e.moveTo(6.72,.422),e.lineTo(17.28,.422),e.bezierCurveTo(18.553,.422,19.577,1.758,19.577,3.415),e.lineTo(19.577,10.973),e.bezierCurveTo(19.577,12.63,18.553,13.966,17.282,13.966),e.lineTo(14.386,14.008),e.lineTo(11.826,23.578),e.lineTo(9.614,14.008),e.lineTo(6.719,13.965),e.bezierCurveTo(5.446,13.983,4.422,12.629,4.422,10.972),e.lineTo(4.422,3.416),e.bezierCurveTo(4.423,1.76,5.447,.423,6.718,.423),e.closePath(),e.fill(),e.stroke(),e.restore()}function S(e,t,r){const n=r/2.5;let o=n,i=n;t.width>t.height?i=n*(t.height/t.width):t.width<t.height&&(o=n*(t.width/t.height));const s=Math.round((r-o)/2),a=Math.round(7/24*r-i/2);e.globalCompositeOperation="destination-out",e.drawImage(t,s-1,a,o,i),e.drawImage(t,s,a-1,o,i),e.drawImage(t,s+1,a,o,i),e.drawImage(t,s,a+1,o,i),e.globalCompositeOperation="destination-over",e.fillStyle=d.Z.BLACK.toCssColorString(),e.fillRect(s-1,a-1,o+2,i+2),e.globalCompositeOperation="destination-out",e.drawImage(t,s,a,o,i),e.globalCompositeOperation="destination-over",e.fillStyle=d.Z.WHITE.toCssColorString(),e.fillRect(s-1,a-2,o+2,i+2)}const C=new Array(4);function P(e,t,r,n,o){C[0]=e,C[1]=t,C[2]=r,C[3]=n;const i=JSON.stringify(C),s=o[i];if((0,g.Z)(s))return s;const a=document.createElement("canvas");a.width=n,a.height=n;const l=a.getContext("2d");if(v(l,r,n),(0,g.Z)(e)){const t=A.Z.createIfNeeded(e),r=t.fetchImage().then((function(e){return S(l,e,n),o[i]=a,a}));return o[i]=r,r}if((0,g.Z)(t)){const e=(0,E.Z)(t,{font:`bold ${n}px sans-serif`});S(l,e,n)}return o[i]=a,a}var L=x,k=r(2882),U=r(9810),I=r(1737),D=r(7706);function O(e,t){var r,n=e.length,o=n-t;while(o<--n)r=e[o],e[o++]=e[n],e[n]=r}function M(e){return e}function N(e){if(null==e)return M;var t,r,n=e.scale[0],o=e.scale[1],i=e.translate[0],s=e.translate[1];return function(e,a){a||(t=r=0);var l=2,c=e.length,u=new Array(c);u[0]=(t+=e[0])*n+i,u[1]=(r+=e[1])*o+s;while(l<c)u[l]=e[l],++l;return u}}function G(e,t){return"string"===typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return B(e,t)}))}:B(e,t)}function B(e,t){var r=t.id,n=t.bbox,o=null==t.properties?{}:t.properties,i=F(e,t);return null==r&&null==n?{type:"Feature",properties:o,geometry:i}:null==n?{type:"Feature",id:r,properties:o,geometry:i}:{type:"Feature",id:r,bbox:n,properties:o,geometry:i}}function F(e,t){var r=N(e.transform),n=e.arcs;function o(e,t){t.length&&t.pop();for(var o=n[e<0?~e:e],i=0,s=o.length;i<s;++i)t.push(r(o[i],i));e<0&&O(t,s)}function i(e){return r(e)}function s(e){for(var t=[],r=0,n=e.length;r<n;++r)o(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){var t=s(e);while(t.length<4)t.push(t[0]);return t}function l(e){return e.map(a)}function c(e){var t,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(c)};case"Point":t=i(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(i);break;case"LineString":t=s(e.arcs);break;case"MultiLineString":t=e.arcs.map(s);break;case"Polygon":t=l(e.arcs);break;case"MultiPolygon":t=e.arcs.map(l);break;default:return null}return{type:r,coordinates:t}}return c(t)}var V=r(1964),X=r(4683),z=r(1052),j=r(1156),W=r(6047),Y=r(6625),$=r(7265),q=r(5567),J=r(8795),H=r(5882);function K(e){return c.Z.fromDegrees(e[0],e[1],e[2])}const Q={"urn:ogc:def:crs:OGC:1.3:CRS84":K,"EPSG:4326":K,"urn:ogc:def:crs:EPSG::4326":K},ee={},te={};let re,ne=48,oe=d.Z.ROYALBLUE,ie=d.Z.YELLOW,se=2,ae=d.Z.fromBytes(255,255,0,100),le=!1;const ce={small:24,medium:48,large:64},ue=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function he(e,t){let r="";for(const n in e)if(e.hasOwnProperty(n)){if(n===t||-1!==ue.indexOf(n))continue;const o=e[n];(0,g.Z)(o)&&(r+="object"===typeof o?`<tr><th>${n}</th><td>${he(o)}</td></tr>`:`<tr><th>${n}</th><td>${o}</td></tr>`)}return r.length>0&&(r=`<table class="cesium-infoBox-defaultTable"><tbody>${r}</tbody></table>`),r}function de(e,t,r){let n;return function(o,i){return(0,g.Z)(n)||(n=e(t,r)),n}}function fe(e,t){return new X.Z(de(he,e,t),!0)}function me(e,t,r){let n=e.id;if((0,g.Z)(n)&&"Feature"===e.type){let e=2,r=n;while((0,g.Z)(t.getById(r)))r=`${n}_${e}`,e++;n=r}else n=(0,f.Z)();const o=t.getOrCreateEntity(n),i=e.properties;if((0,g.Z)(i)){let e;o.properties=i;const t=i.title;if((0,g.Z)(t))o.name=t,e="title";else{let t=Number.MAX_VALUE;for(const r in i)if(i.hasOwnProperty(r)&&i[r]){const n=r.toLowerCase();if(t>1&&"title"===n){t=1,e=r;break}t>2&&"name"===n?(t=2,e=r):t>3&&/title/i.test(r)?(t=3,e=r):t>4&&/name/i.test(r)&&(t=4,e=r)}(0,g.Z)(e)&&(o.name=i[e])}const n=i.description;null!==n&&(o.description=(0,g.Z)(n)?new W.Z(n):r(i,e))}return o}function pe(e,t){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t(e[n]);return r}const ge={Feature:ye,FeatureCollection:Te,GeometryCollection:we,LineString:xe,MultiLineString:Re,MultiPoint:Ae,MultiPolygon:Ce,Point:_e,Polygon:Se,Topology:Pe},Ze={GeometryCollection:we,LineString:xe,MultiLineString:Re,MultiPoint:Ae,MultiPolygon:Ce,Point:_e,Polygon:Se,Topology:Pe};function ye(e,t,r,n,o){if(null===t.geometry)return void me(t,e._entityCollection,o.describe);if(!(0,g.Z)(t.geometry))throw new U.Z("feature.geometry is required.");const i=t.geometry.type,s=Ze[i];if(!(0,g.Z)(s))throw new U.Z(`Unknown geometry type: ${i}`);s(e,t,t.geometry,n,o)}function Te(e,t,r,n,o){const i=t.features;for(let s=0,a=i.length;s<a;s++)ye(e,i[s],void 0,n,o)}function we(e,t,r,n,o){const i=r.geometries;for(let s=0,a=i.length;s<a;s++){const r=i[s],a=r.type,l=Ze[a];if(!(0,g.Z)(l))throw new U.Z(`Unknown geometry type: ${a}`);l(e,t,r,n,o)}}function be(e,t,r,n,o){let i=o.markerSymbol,s=o.markerColor,a=o.markerSize;const l=t.properties;if((0,g.Z)(l)){const e=l["marker-color"];(0,g.Z)(e)&&(s=d.Z.fromCssColorString(e)),a=(0,p.Z)(ce[l["marker-size"]],a);const t=l["marker-symbol"];(0,g.Z)(t)&&(i=t)}let c;c=(0,g.Z)(i)?1===i.length?e._pinBuilder.fromText(i.toUpperCase(),s,a):e._pinBuilder.fromMakiIconId(i,s,a):e._pinBuilder.fromColor(s,a);const u=new V.Z;u.verticalOrigin=new W.Z(D.Z.BOTTOM),2===n.length&&o.clampToGround&&(u.heightReference=I.Z.CLAMP_TO_GROUND);const h=me(t,e._entityCollection,o.describe);h.billboard=u,h.position=new j.Z(r(n));const f=Promise.resolve(c).then((function(e){u.image=new W.Z(e)})).catch((function(){u.image=new W.Z(e._pinBuilder.fromColor(s,a))}));e._promises.push(f)}function _e(e,t,r,n,o){be(e,t,n,r.coordinates,o)}function Ae(e,t,r,n,o){const i=r.coordinates;for(let s=0;s<i.length;s++)be(e,t,n,i[s],o)}function Ee(e,t,r,n,o){let i=o.strokeMaterialProperty,s=o.strokeWidthProperty;const a=t.properties;if((0,g.Z)(a)){const e=a["stroke-width"];let t;(0,g.Z)(e)&&(s=new W.Z(e));const r=a.stroke;(0,g.Z)(r)&&(t=d.Z.fromCssColorString(r));const n=a["stroke-opacity"];(0,g.Z)(n)&&1!==n&&((0,g.Z)(t)||(t=i.color.getValue().clone()),t.alpha=n),(0,g.Z)(t)&&(i=new z.Z(t))}const l=me(t,e._entityCollection,o.describe),c=new H.Z;l.polyline=c,c.clampToGround=o.clampToGround,c.material=i,c.width=s,c.positions=new W.Z(pe(n,r)),c.arcType=h.Z.RHUMB}function xe(e,t,r,n,o){Ee(e,t,n,r.coordinates,o)}function Re(e,t,r,n,o){const i=r.coordinates;for(let s=0;s<i.length;s++)Ee(e,t,n,i[s],o)}function ve(e,t,r,n,o){if(0===n.length||0===n[0].length)return;let i=o.strokeMaterialProperty.color,s=o.fillMaterialProperty,a=o.strokeWidthProperty;const l=t.properties;if((0,g.Z)(l)){const e=l["stroke-width"];let t;(0,g.Z)(e)&&(a=new W.Z(e));const r=l.stroke;(0,g.Z)(r)&&(t=d.Z.fromCssColorString(r));let n,o=l["stroke-opacity"];(0,g.Z)(o)&&1!==o&&((0,g.Z)(t)||(t=i.getValue().clone()),t.alpha=o),(0,g.Z)(t)&&(i=new W.Z(t));const c=l.fill,u=s.color.getValue();(0,g.Z)(c)&&(n=d.Z.fromCssColorString(c),n.alpha=u.alpha),o=l["fill-opacity"],(0,g.Z)(o)&&o!==u.alpha&&((0,g.Z)(n)||(n=u.clone()),n.alpha=o),(0,g.Z)(n)&&(s=new z.Z(n))}const c=new J.Z;c.outline=new W.Z(!0),c.outlineColor=i,c.outlineWidth=a,c.material=s,c.arcType=h.Z.RHUMB;const u=[];for(let h=1,d=n.length;h<d;h++)u.push(new k.Z(pe(n[h],r)));const f=n[0];c.hierarchy=new W.Z(new k.Z(pe(f,r),u)),f[0].length>2?c.perPositionHeight=new W.Z(!0):o.clampToGround||(c.height=0);const m=me(t,e._entityCollection,o.describe);m.polygon=c}function Se(e,t,r,n,o){ve(e,t,n,r.coordinates,o)}function Ce(e,t,r,n,o){const i=r.coordinates;for(let s=0;s<i.length;s++)ve(e,t,n,i[s],o)}function Pe(e,t,r,n,o){for(const i in r.objects)if(r.objects.hasOwnProperty(i)){const t=G(r,r.objects[i]),s=ge[t.type];s(e,t,t,n,o)}}function Le(e){this._name=e,this._changed=new y.Z,this._error=new y.Z,this._isLoading=!1,this._loading=new y.Z,this._entityCollection=new q.Z(this),this._promises=[],this._pinBuilder=new L,this._entityCluster=new $.Z,this._credit=void 0,this._resourceCredits=[]}function ke(e,t,r,n){if(!(0,g.Z)(t))throw new Z.Z("data is required.");Y.Z.setLoading(e,!0),r=(0,p.Z)(r,p.Z.EMPTY_OBJECT);let o=r.credit;"string"===typeof o&&(o=new m.Z(o)),e._credit=o;let i=t,s=r.sourceUri;if("string"===typeof t||t instanceof A.Z){t=A.Z.createIfNeeded(t),i=t.fetchJson(),s=(0,p.Z)(s,t.getUrlComponent());const r=e._resourceCredits,n=t.credits;if((0,g.Z)(n)){const e=n.length;for(let t=0;t<e;t++)r.push(n[t])}}return r={describe:(0,p.Z)(r.describe,fe),markerSize:(0,p.Z)(r.markerSize,ne),markerSymbol:(0,p.Z)(r.markerSymbol,re),markerColor:(0,p.Z)(r.markerColor,oe),strokeWidthProperty:new W.Z((0,p.Z)(r.strokeWidth,se)),strokeMaterialProperty:new z.Z((0,p.Z)(r.stroke,ie)),fillMaterialProperty:new z.Z((0,p.Z)(r.fill,ae)),clampToGround:(0,p.Z)(r.clampToGround,le)},Promise.resolve(i).then((function(t){return Ue(e,t,r,s,n)})).catch((function(t){throw Y.Z.setLoading(e,!1),e._error.raiseEvent(e,t),t}))}function Ue(e,t,r,n,o){let i;(0,g.Z)(n)&&(i=b(n)),(0,g.Z)(i)&&e._name!==i&&(e._name=i,e._changed.raiseEvent(e));const s=ge[t.type];if(!(0,g.Z)(s))throw new U.Z(`Unsupported GeoJSON object type: ${t.type}`);const a=t.crs;let l=null!==a?K:null;if((0,g.Z)(a)){if(!(0,g.Z)(a.properties))throw new U.Z("crs.properties is undefined.");const e=a.properties;if("name"===a.type){if(l=Q[e.name],!(0,g.Z)(l))throw new U.Z(`Unknown crs name: ${e.name}`)}else if("link"===a.type){let t=ee[e.href];if((0,g.Z)(t)||(t=te[e.type]),!(0,g.Z)(t))throw new U.Z(`Unable to resolve crs link: ${JSON.stringify(e)}`);l=t(e)}else{if("EPSG"!==a.type)throw new U.Z(`Unknown crs type: ${a.type}`);if(l=Q[`EPSG:${e.code}`],!(0,g.Z)(l))throw new U.Z(`Unknown crs EPSG code: ${e.code}`)}}return Promise.resolve(l).then((function(n){return o&&e._entityCollection.removeAll(),null!==n&&s(e,t,t,n,r),Promise.all(e._promises).then((function(){return e._promises.length=0,Y.Z.setLoading(e,!1),e}))}))}Le.load=function(e,t){return(new Le).load(e,t)},Object.defineProperties(Le,{markerSize:{get:function(){return ne},set:function(e){ne=e}},markerSymbol:{get:function(){return re},set:function(e){re=e}},markerColor:{get:function(){return oe},set:function(e){oe=e}},stroke:{get:function(){return ie},set:function(e){ie=e}},strokeWidth:{get:function(){return se},set:function(e){se=e}},fill:{get:function(){return ae},set:function(e){ae=e}},clampToGround:{get:function(){return le},set:function(e){le=e}},crsNames:{get:function(){return Q}},crsLinkHrefs:{get:function(){return ee}},crsLinkTypes:{get:function(){return te}}}),Object.defineProperties(Le.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,g.Z)(e))throw new Z.Z("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),Le.prototype.load=function(e,t){return ke(this,e,t,!0)},Le.prototype.process=function(e,t){return ke(this,e,t,!1)},Le.prototype.update=function(e){return!0};var Ie=Le,De=r(121),Oe=r(7327),Me=(r(1439),r(7585),r(5315),r(4161)),Ne=r(9480),Ge=r(5497);let Be;class Fe{constructor(e,t,r,n,o,i){(0,Oe.Z)(this,"vertexAddress",void 0),(0,Oe.Z)(this,"fragmentAddress",void 0),(0,Oe.Z)(this,"symbolImageAddress",void 0),(0,Oe.Z)(this,"paletteImageAddress",void 0),(0,Oe.Z)(this,"descriptionAddress",void 0),(0,Oe.Z)(this,"poistionAddress",void 0),(0,Oe.Z)(this,"vertexScript",null),(0,Oe.Z)(this,"fragmentScript",null),(0,Oe.Z)(this,"symbolImage",null),(0,Oe.Z)(this,"paletteImage",null),(0,Oe.Z)(this,"vertexArray",[]),(0,Oe.Z)(this,"instanceNum",0),(0,Oe.Z)(this,"program",null),(0,Oe.Z)(this,"renderVAO",null),(0,Oe.Z)(this,"debugVAO",null),(0,Oe.Z)(this,"symbolTexture",null),(0,Oe.Z)(this,"paletteTexture",null),this.vertexAddress=e,this.fragmentAddress=t,this.symbolImageAddress=r,this.paletteImageAddress=n,this.descriptionAddress=o,this.poistionAddress=i}async prepareData(e,t){const r=Me.Z.get(this.vertexAddress).then((e=>e.data)),n=Me.Z.get(this.fragmentAddress).then((e=>e.data)),o=new Promise(((e,t)=>{const r=new Image;r.src=this.symbolImageAddress,r.onload=()=>{e(r)}})),i=new Promise(((e,t)=>{const r=new Image;r.src=this.paletteImageAddress,r.onload=()=>{e(r)}})),s=Me.Z.get(this.descriptionAddress).then((e=>e.data)),a=Me.Z.get(this.poistionAddress).then((e=>e.data));return Promise.all([r,n,o,i,s,a]).then((r=>{this.vertexScript=r[0],this.fragmentScript=r[1],this.symbolImage=r[2],this.paletteImage=r[3];const n=[],o=[],i=[],s=[],a=r[4].markers.description;if(t){for(let l=0;l<a.length;l++)if(a[l].name===t){const t=Math.ceil(a[l].length/e);for(let e=0;e<r[5].features.length;e++){const u=r[5].features[e],h=c.Z.fromDegrees(u.geometry.coordinates[0],u.geometry.coordinates[1]),d=(0,Ne.LS)(h.x),f=(0,Ne.LS)(h.y),m=(0,Ne.LS)(h.z);for(let e=0;e<t;e++)n.push(a[l].base,a[l].length,e,a[l].ID),o.push(d[0],f[0],m[0]),i.push(d[1],f[1],m[1]),s.push(0)}}this.instanceNum=s.length,this.vertexArray=[...n,...o,...i,...s]}else{for(let t=0;t<r[5].features.length;t++){let l;do{l=Math.floor(6*Math.random())}while(3===l);const u=360*Math.random(),h=Math.ceil(a[l].length/e),d=r[5].features[t],f=c.Z.fromDegrees(d.geometry.coordinates[0],d.geometry.coordinates[1]),m=(0,Ne.LS)(f.x),p=(0,Ne.LS)(f.y),g=(0,Ne.LS)(f.z);for(let e=0;e<h;e++)n.push(a[l].base,a[l].length,e,a[l].ID),o.push(m[0],p[0],g[0]),i.push(m[1],p[1],g[1]),s.push(u)}this.instanceNum=s.length,this.vertexArray=[...n,...o,...i,...s]}}))}prepareRenderResource(e){if(null===this.renderVAO){const t=e.createShader(e.VERTEX_SHADER),r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(t,this.vertexScript),e.shaderSource(r,this.fragmentScript),e.compileShader(t),e.compileShader(r),this.program=e.createProgram(),e.attachShader(this.program,t),e.attachShader(this.program,r),e.linkProgram(this.program),this.renderVAO=e.createVertexArray(),e.bindVertexArray(this.renderVAO),Be=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,Be),e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.vertexArray),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,4,e.FLOAT,!1,16,0),e.vertexAttribDivisor(0,1),e.enableVertexAttribArray(1),e.vertexAttribPointer(1,3,e.FLOAT,!1,12,4*this.instanceNum*4),e.vertexAttribDivisor(1,1),e.enableVertexAttribArray(2),e.vertexAttribPointer(2,3,e.FLOAT,!1,12,7*this.instanceNum*4),e.vertexAttribDivisor(2,1),e.enableVertexAttribArray(3),e.vertexAttribPointer(3,1,e.FLOAT,!1,4,10*this.instanceNum*4),e.vertexAttribDivisor(3,1),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindVertexArray(null),this.debugVAO=e.createVertexArray(),e.bindVertexArray(this.debugVAO);const n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-.5,.5,.5,.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,0,1,1,1,0,0,0,0,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,8,0),e.enableVertexAttribArray(1),e.vertexAttribPointer(1,2,e.FLOAT,!1,8,48),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindVertexArray(null),this.symbolImage&&this.paletteImage&&(this.symbolTexture=e.createTexture(),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.bindTexture(e.TEXTURE_2D,this.symbolTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.symbolImage),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),this.paletteTexture=e.createTexture(),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,0),e.bindTexture(e.TEXTURE_2D,this.paletteTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.paletteImage),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null)}}render(e,t,r,n,o,i){e.disable(e.CULL_FACE),e.disable(e.BLEND),e.disable(e.DEPTH_TEST),e.disable(e.SCISSOR_TEST),e.scissor(0,0,2048,958),e.useProgram(this.program);const s=Ge.Ue();Ge.yR(s),Ge.bA(s,s,[t*window.devicePixelRatio,t*window.devicePixelRatio,1]);const a=e.getUniformLocation(this.program,"u_symbolMatrix");e.uniformMatrix4fv(a,!1,s);const l=e.getUniformLocation(this.program,"u_bufferSize");e.uniform2f(l,e.canvas.width,e.canvas.height);const u=c.Z.fromDegrees(r,n),h=(0,Ne.LS)(u.x),d=(0,Ne.LS)(u.y),f=(0,Ne.LS)(u.z),m=e.getUniformLocation(this.program,"u_cartesianCenterHigh");e.uniform3f(m,h[0],d[0],f[0]);const p=e.getUniformLocation(this.program,"u_cartesianCenterLow");e.uniform3f(p,h[1],d[1],f[1]);const g=e.getUniformLocation(this.program,"u_matrix");e.uniformMatrix4fv(g,!1,i),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.symbolTexture),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,this.paletteTexture);const Z=e.getUniformLocation(this.program,"symbolTexture"),y=e.getUniformLocation(this.program,"paletteTexture");e.uniform1i(Z,0),e.uniform1i(y,1),e.bindVertexArray(this.renderVAO),e.drawArraysInstanced(e.TRIANGLE_STRIP,0,o,this.instanceNum),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null),e.useProgram(null)}}var Ve=(0,n.aZ)({setup(){const e=(0,s.iH)();a.Z.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIxNjRiYjA0OS0wYTNjLTQwODItYjhmOS1kNTA3NTNlMzhiZWIiLCJpZCI6MTcxNjM3LCJpYXQiOjE2OTcxODE0NDN9.NXFWJtgHshH3lJbrl9QmfjGM3-KRRoQpy5827zZJJV0";const t=async()=>{const t=new Fe("/symbol/shader/symbol3D.vert.glsl","/symbol/shader/symbol3D.frag.glsl","/symbol/texture/strip_z.png","/symbol/texture/palette_z.png","/symbol/json/tbvs_z.json","/symbol/json/output.geojson");await t.prepareData(64);const r=new l.Z(e.value,{msaaSamples:2,requestRenderMode:!0,maximumRenderTimeChange:1/0});r.scene.postProcessStages.fxaa.enabled=!0,r.camera.setView({destination:c.Z.fromDegrees(118.81259,32.048116,4e5),orientation:{heading:u.Z.toRadians(0),pitch:u.Z.toRadians(-90)}});const n=new Ie;function o(e,r,n){if("GLOBE"===n){const r=e.context._gl;t.prepareRenderResource(r),t.render(r,60,118.81259,32.048116,64,De.Z.toArray(e.context.uniformState.viewProjection))}}await n.load("/symbol/json/crossroad_NJ.geojson"),r.dataSources.add(n),n.entities.values.forEach((function(e){e.billboard=new V.Z({image:"/symbol/texture/交叉路口.png",width:32,height:32})})),r.scene.render_external_frame_functions=[o]};return(0,n.bv)((()=>{t()})),{container:e}}}),Xe=r(89);const ze=(0,Xe.Z)(Ve,[["render",i],["__scopeId","data-v-35bb72b7"]]);var je=ze}}]);
//# sourceMappingURL=735.85642551.js.map