"use strict";(self["webpackChunkgraduate"]=self["webpackChunkgraduate"]||[]).push([[260],{9346:function(t,e){class n{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}e.Z=n},9800:function(t,e,n){n.d(e,{Kp:function(){return s},Q9:function(){return u}});n(7658);var r=n(7621),i=n(8001),o=n(5423);function s(t,e,n){const s=t;let a=!0,u=!1,l=!1;const h=[(0,o.Vx)(s,r.Z.LOAD,(function(){l=!0,u||e()}))];return s.src&&i.Tp?(u=!0,s.decode().then((function(){a&&e()})).catch((function(t){a&&(l?e():n())}))):h.push((0,o.Vx)(s,r.Z.ERROR,n)),function(){a=!1,h.forEach(o.bN)}}function a(t,e){return new Promise(((n,r)=>{function i(){s(),n(t)}function o(){s(),r(new Error("Image load error"))}function s(){t.removeEventListener("load",i),t.removeEventListener("error",o)}t.addEventListener("load",i),t.addEventListener("error",o),e&&(t.src=e)}))}function u(t,e){return e&&(t.src=e),i.Tp?new Promise(((e,n)=>t.decode().then((()=>e(t)),n))):a(t)}},9953:function(t,e){e.Z={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},3339:function(t,e,n){var r=n(4757),i=n(7145),o=n(1557),s=n(9800);class a extends r.Z{constructor(t,e,n,r,i,o){super(t,e,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=i}getImage(){return this.image_}setImage(t){this.image_=t,this.state=i.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=i.Z.ERROR,this.unlistenImage_(),this.image_=u(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=i.Z.LOADED:this.state=i.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==i.Z.ERROR&&(this.state=i.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==i.Z.IDLE&&(this.state=i.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,s.Kp)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function u(){const t=(0,o.E4)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}e.Z=a},9845:function(t,e,n){var r=n(5375),i=n(5855),o=n(9391),s=n(1904),a=n(8831);class u extends r.ZP{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class l extends o.Z{constructor(t){super(),this.on,this.once,this.un,(0,s.sq)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new u(n,t,e)),n=i.Z.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new u(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const r=this.values_||(this.values_={});if(n)r[t]=e;else{const n=r[t];r[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],(0,a.x)(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}e.Z=l},5855:function(t,e){e.Z={PROPERTYCHANGE:"propertychange"}},9391:function(t,e,n){var r=n(3005),i=n(7621),o=n(5423);class s extends r.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(i.Z.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=(0,o.oL)(this,t[i],e);return r}return(0,o.oL)(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const r=t.length;n=new Array(r);for(let i=0;i<r;++i)n[i]=(0,o.Vx)(this,t[i],e)}else n=(0,o.Vx)(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)a(n);else if(Array.isArray(t))for(let r=0,i=t.length;r<i;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)}}function a(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)(0,o.bN)(t[e]);else(0,o.bN)(t)}s.prototype.on,s.prototype.once,s.prototype.un,e.Z=s},4757:function(t,e,n){var r=n(3005),i=n(7621),o=n(7145),s=n(1904),a=n(2249);class u extends r.Z{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(i.Z.CHANGE)}release(){this.state===o.Z.ERROR&&this.setState(o.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==o.Z.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==o.Z.LOADED){t.interimTile=null;break}t.getState()==o.Z.LOADING?e=t:t.getState()==o.Z.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==o.Z.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){(0,s.O3)()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const r=e-n+1e3/60;return r>=this.transition_?1:(0,a.YQ)(r/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}e.Z=u},5411:function(t,e,n){n.d(e,{T:function(){return i}});class r{constructor(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function i(t,e,n,i,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=n,o.maxY=i,o):new r(t,e,n,i)}e.Z=r},7145:function(t,e){e.Z={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},7793:function(t,e,n){n.d(e,{ZP:function(){return P}});n(7658);var r=n(9845),i=n(2511),o={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},s=n(7048),a=n(9962),u=n(6138),l=n(7736),h=n(2391),c=n(5756);function f(t,e,n){return function(r,i,o,s,a){if(!r)return;if(!i&&!e)return r;const u=e?0:o[0]*i,l=e?0:o[1]*i,h=a?a[0]:0,f=a?a[1]:0;let d=t[0]+u/2+h,g=t[2]-u/2+h,_=t[1]+l/2+f,p=t[3]-l/2+f;d>g&&(d=(g+d)/2,g=d),_>p&&(_=(p+_)/2,p=_);let m=(0,c.uZ)(r[0],d,g),E=(0,c.uZ)(r[1],_,p);if(s&&n&&i){const t=30*i;m+=-t*Math.log(1+Math.max(0,d-r[0])/t)+t*Math.log(1+Math.max(0,r[0]-g)/t),E+=-t*Math.log(1+Math.max(0,_-r[1])/t)+t*Math.log(1+Math.max(0,r[1]-p)/t)}return[m,E]}}function d(t){return t}var g=n(944),_=n(4008);function p(t,e,n,r){const i=(0,g.dz)(e)/n[0],o=(0,g.Cr)(e)/n[1];return r?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function m(t,e,n){let r=Math.min(t,e);const i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),(0,c.uZ)(r,n/2,2*e)}function E(t,e,n,r){return e=void 0===e||e,function(i,o,s,a){if(void 0!==i){const u=t[0],l=t[t.length-1],h=n?p(u,n,s,r):u;if(a)return e?m(i,h,l):(0,c.uZ)(i,l,h);const f=Math.min(h,i),d=Math.floor((0,_.h7)(t,f,o));return t[d]>h&&d<t.length-1?t[d+1]:t[d]}}}function T(t,e,n,r,i,o){return r=void 0===r||r,n=void 0!==n?n:0,function(s,a,u,l){if(void 0!==s){const h=i?p(e,i,u,o):e;if(l)return r?m(s,h,n):(0,c.uZ)(s,n,h);const f=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(t)-f),g=-a*(.5-f)+.5,_=Math.min(h,s),E=Math.floor(Math.log(e/_)/Math.log(t)+g),T=Math.max(d,E),R=e/Math.pow(t,T);return(0,c.uZ)(R,n,h)}}}function R(t,e,n,r,i){return n=void 0===n||n,function(o,s,a,u){if(void 0!==o){const s=r?p(t,r,a,i):t;return n&&u?m(o,s,e):(0,c.uZ)(o,e,s)}}}var v=n(60),x=n(2249),y=n(4404);const C=0;class S extends r.Z{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.UQ)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.h_)(),t.center&&(t.center=(0,a.Vs)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.dY)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in o)delete e[a];this.setProperties(e,!0);const n=A(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const r=O(t),i=n.constraint,s=M(t);this.constraints_={center:r,resolution:i,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const r=t||[0,0,0,0];e=e||[0,0,0,0];const i=this.getResolution(),o=i/2*(r[3]-e[3]+e[1]-r[1]),s=i/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-s])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let t=arguments[n];t.center&&(t=Object.assign({},t),t.center=(0,a.Vs)(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=(0,a.Vs)(t.anchor,this.getProjection())),e[n]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"===typeof arguments[n-1]&&(e=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){const t=arguments[r];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(r===n)return void(e&&I(e,!0));let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,u=this.targetRotation_;const l=[];for(;r<n;++r){const t=arguments[r],n={start:o,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||x.rd,callback:e};if(t.center&&(n.sourceCenter=s,n.targetCenter=t.center.slice(),s=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=a,n.targetResolution=this.getResolutionForZoom(t.zoom),a=n.targetResolution):t.resolution&&(n.sourceResolution=a,n.targetResolution=t.resolution,a=n.targetResolution),void 0!==t.rotation){n.sourceRotation=u;const e=(0,c.$W)(t.rotation-u+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=u+e,u=n.targetRotation}w(n)?n.complete=!0:o+=n.duration,l.push(n)}this.animations_.push(l),this.setHint(i.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[i.Z.ANIMATING]>0}getInteracting(){return this.hints_[i.Z.INTERACTING]>0}cancelAnimations(){let t;this.setHint(i.Z.ANIMATING,-this.hints_[i.Z.ANIMATING]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&I(n[0].callback,!1),!t)for(let e=0,r=n.length;e<r;++e){const r=n[e];if(!r.complete){t=r.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let o=!0;for(let n=0,i=r.length;n<i;++n){const i=r[n];if(i.complete)continue;const s=t-i.start;let a=i.duration>0?s/i.duration:1;a>=1?(i.complete=!0,a=1):o=!1;const u=i.easing(a);if(i.sourceCenter){const t=i.sourceCenter[0],e=i.sourceCenter[1],n=i.targetCenter[0],r=i.targetCenter[1];this.nextCenter_=i.targetCenter;const o=t+u*(n-t),s=e+u*(r-e);this.targetCenter_=[o,s]}if(i.sourceResolution&&i.targetResolution){const t=1===u?i.targetResolution:i.sourceResolution+u*(i.targetResolution-i.sourceResolution);if(i.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,i.anchor)}this.nextResolution_=i.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==i.sourceRotation&&void 0!==i.targetRotation){const t=1===u?(0,c.$W)(i.targetRotation+Math.PI,2*Math.PI)-Math.PI:i.sourceRotation+u*(i.targetRotation-i.sourceRotation);if(i.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,i.anchor)}this.nextRotation_=i.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!i.complete)break}if(o){this.animations_[n]=null,this.setHint(i.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=r[0].callback;t&&I(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const r=this.getCenterInternal();return void 0!==r&&(n=[r[0]-e[0],r[1]-e[1]],(0,l.U1)(n,t-this.getRotation()),(0,l.IH)(n,e)),n}calculateCenterZoom(t,e){let n;const r=this.getCenterInternal(),i=this.getResolution();if(void 0!==r&&void 0!==i){const o=e[0]-t*(e[0]-r[0])/i,s=e[1]-t*(e[1]-r[1])/i;n=[o,s]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,a.lO)(t,this.getProjection()):t}getCenterInternal(){return this.get(o.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,a.Fj)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,h.h)(e,"The view center is not defined");const n=this.getResolution();(0,h.h)(void 0!==n,"The view resolution is not defined");const r=this.getRotation();return(0,h.h)(void 0!==r,"The view rotation is not defined"),(0,g.p8)(e,n,r,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(o.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.dY)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=(0,g.dz)(t)/e[0],r=(0,g.Cr)(t)/e[1];return Math.max(n,r)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(e/n)/Math.log(t);return function(n){const i=e/Math.pow(t,n*r);return i}}getRotation(){return this.get(o.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/e;return function(t){const r=Math.log(n/t)/e/i;return r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const i=this.padding_;if(i){const t=this.getViewportSizeMinusPadding_();r=N(r,this.getViewportSize_(),[t[0]/2+i[3],t[1]/2+i[0]],e,n)}return{center:r.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,r=this.minZoom_||0;if(this.resolutions_){const i=(0,_.h7)(this.resolutions_,t,1);r=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,c.uZ)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,(0,c.uZ)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if((0,h.h)(Array.isArray(t)||"function"===typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){(0,h.h)(!(0,g.xb)(t),"Cannot fit empty extent provided as `geometry`");const e=(0,a.dY)(t,this.getProjection());n=(0,y.oJ)(e)}else if("Circle"===t.getType()){const e=(0,a.dY)(t.getExtent(),this.getProjection());n=(0,y.oJ)(e),n.rotate(this.getRotation(),(0,g.qg)(e))}else{const e=(0,a.Cs)();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),i=t.getFlatCoordinates(),o=t.getStride();let s=1/0,a=1/0,u=-1/0,l=-1/0;for(let h=0,c=i.length;h<c;h+=o){const t=i[h]*n-i[h+1]*r,e=i[h]*r+i[h+1]*n;s=Math.min(s,t),a=Math.min(a,e),u=Math.max(u,t),l=Math.max(l,e)}return[s,a,u,l]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const r=void 0!==e.padding?e.padding:[0,0,0,0],i=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const s=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(s,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,i?0:1);const l=this.getRotation(),h=Math.sin(l),c=Math.cos(l),f=(0,g.qg)(s);f[0]+=(r[1]-r[3])/2*a,f[1]+=(r[0]-r[2])/2*a;const d=f[0]*c-f[1]*h,_=f[1]*c+f[0]*h,p=this.getConstrainedCenter([d,_],a),m=e.callback?e.callback:u.Zn;void 0!==e.duration?this.animateInternal({resolution:a,center:p,duration:e.duration,easing:e.easing},m):(this.targetResolution_=a,this.targetCenter_=p,this.applyTargetState_(!1,!0),I(m,!0))}centerOn(t,e,n){this.centerOnInternal((0,a.Vs)(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(N(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,r){let i;const o=this.padding_;if(o&&t){const s=this.getViewportSizeMinusPadding_(-n),a=N(t,r,[s[0]/2+o[3],s[1]/2+o[0]],e,n);i=[t[0]-a[0],t[1]-a[1]]}return i}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.lO)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.Vs)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,r,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.Vs)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.Vs)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,i,n),a=this.constraints_.center(this.targetCenter_,s,i,n,this.calculateCenterShift(this.targetCenter_,s,r,i));this.get(o.ROTATION)!==r&&this.set(o.ROTATION,r),this.get(o.RESOLUTION)!==s&&(this.set(o.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),a&&this.get(o.CENTER)&&(0,l.fS)(this.get(o.CENTER),a)||this.set(o.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const r=e||0,i=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,r,o),a=this.constraints_.center(this.targetCenter_,s,o,!1,this.calculateCenterShift(this.targetCenter_,s,i,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=i,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===i&&this.getCenterInternal()&&(0,l.fS)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:a,resolution:s,duration:t,easing:x.Vv,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(i.Z.INTERACTING,1)}endInteraction(t,e,n){n=n&&(0,a.Vs)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(i.Z.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function I(t,e){setTimeout((function(){t(e)}),0)}function O(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return f(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.UQ)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,f(t,!1,!1)}return d}function A(t){let e,n,r;const i=28,o=2;let u=void 0!==t.minZoom?t.minZoom:C,l=void 0!==t.maxZoom?t.maxZoom:i;const h=void 0!==t.zoomFactor?t.zoomFactor:o,c=void 0!==t.multiWorld&&t.multiWorld,f=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,d=void 0!==t.showFullExtent&&t.showFullExtent,_=(0,a.UQ)(t.projection,"EPSG:3857"),p=_.getExtent();let m=t.constrainOnlyCenter,v=t.extent;if(c||v||!_.isGlobal()||(m=!1,v=p),void 0!==t.resolutions){const i=t.resolutions;n=i[u],r=void 0!==i[l]?i[l]:i[i.length-1],e=t.constrainResolution?E(i,f,!m&&v,d):R(n,r,f,!m&&v,d)}else{const c=p?Math.max((0,g.dz)(p),(0,g.Cr)(p)):360*a.Wm.degrees/_.getMetersPerUnit(),E=c/s.S/Math.pow(o,C),x=E/Math.pow(o,i-C);n=t.maxResolution,void 0!==n?u=0:n=E/Math.pow(h,u),r=t.minResolution,void 0===r&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(h,l):E/Math.pow(h,l):x),l=u+Math.floor(Math.log(n/r)/Math.log(h)),r=n/Math.pow(h,l-u),e=t.constrainResolution?T(h,n,r,f,!m&&v,d):R(n,r,f,!m&&v,d)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:u,zoomFactor:h}}function M(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?(0,v.Gw)():!1===e?v.YP:"number"===typeof e?(0,v.gE)(e):v.YP}return v.h$}function w(t){return!(t.sourceCenter&&t.targetCenter&&!(0,l.fS)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function N(t,e,n,r,i){const o=Math.cos(-i);let s=Math.sin(-i),a=t[0]*o-t[1]*s,u=t[1]*o+t[0]*s;a+=(e[0]/2-n[0])*r,u+=(n[1]-e[1]/2)*r,s=-s;const l=a*o-u*s,h=u*o+a*s;return[l,h]}var P=S},2511:function(t,e){e.Z={ANIMATING:0,INTERACTING:1}},4008:function(t,e,n){function r(t,e,n){let r,o;n=n||i;let s=0,a=t.length,u=!1;while(s<a)r=s+(a-s>>1),o=+n(t[r],e),o<0?s=r+1:(a=r,u=!o);return u?s:~s}function i(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t<e?1:t>e?-1:0}function s(t,e,n){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if("function"===typeof n){for(let i=1;i<r;++i){const r=t[i];if(r===e)return i;if(r<e)return n(e,t[i-1],r)>0?i-1:i}return r-1}if(n>0){for(let n=1;n<r;++n)if(t[n]<e)return n-1;return r-1}if(n<0){for(let n=1;n<r;++n)if(t[n]<=e)return n;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function a(t,e,n){while(e<n){const r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function u(t,e){const n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function l(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function h(t,e,n){const r=e||i;return t.every((function(e,i){if(0===i)return!0;const o=r(t[i-1],e);return!(o>0||n&&0===o)}))}n.d(e,{$1:function(){return o},FZ:function(){return a},fS:function(){return l},h7:function(){return s},j2:function(){return i},l7:function(){return u},pT:function(){return h},ry:function(){return r}})},2391:function(t,e,n){function r(t,e){if(!t)throw new Error(e)}n.d(e,{h:function(){return r}})},966:function(t,e,n){n.d(e,{BB:function(){return f},XC:function(){return s},_2:function(){return l},e1:function(){return d},mL:function(){return u}});n(7658);var r=n(5756);const i=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,o=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(t){return"string"===typeof t?t:f(t)}function a(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const u=function(){const t=1024,e={};let n=0;return function(r){let i;if(e.hasOwnProperty(r))i=e[r];else{if(n>=t){let t=0;for(const r in e)0===(3&t++)&&(delete e[r],--n)}i=h(r),e[r]=i,++n}return i}}();function l(t){return Array.isArray(t)?t:u(t)}function h(t){let e,n,r,s,u;if(o.exec(t)&&(t=a(t)),i.exec(t)){const i=t.length-1;let o;o=i<=4?1:2;const a=4===i||8===i;e=parseInt(t.substr(1+0*o,o),16),n=parseInt(t.substr(1+1*o,o),16),r=parseInt(t.substr(1+2*o,o),16),s=a?parseInt(t.substr(1+3*o,o),16):255,1==o&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,a&&(s=(s<<4)+s)),u=[e,n,r,s/255]}else if(t.startsWith("rgba("))u=t.slice(5,-1).split(",").map(Number),c(u);else{if(!t.startsWith("rgb("))throw new Error("Invalid color");u=t.slice(4,-1).split(",").map(Number),u.push(1),c(u)}return u}function c(t){return t[0]=(0,r.uZ)(t[0]+.5|0,0,255),t[1]=(0,r.uZ)(t[1]+.5|0,0,255),t[2]=(0,r.uZ)(t[2]+.5|0,0,255),t[3]=(0,r.uZ)(t[3],0,1),t}function f(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let r=t[2];r!=(0|r)&&(r=r+.5|0);const i=void 0===t[3]?1:Math.round(100*t[3])/100;return"rgba("+e+","+n+","+r+","+i+")"}function d(t){return o.test(t)&&(t=a(t)),i.test(t)||t.startsWith("rgba(")||t.startsWith("rgb(")}},7405:function(t,e,n){n.d(e,{ZK:function(){return o}});const r={info:1,warn:2,error:3,none:4};let i=r.info;function o(...t){i>r.warn||console.warn(...t)}},7736:function(t,e,n){n.d(e,{Cf:function(){return u},IH:function(){return i},U1:function(){return s},bA:function(){return a},fS:function(){return o}});var r=n(944);function i(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function o(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function s(t,e){const n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}function a(t,e){return t[0]*=e,t[1]*=e,t}function u(t,e){if(e.canWrapX()){const n=(0,r.dz)(e.getExtent()),i=l(t,e,n);i&&(t[0]-=i*n)}return t}function l(t,e,n){const i=e.getExtent();let o=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||(0,r.dz)(i),o=Math.floor((t[0]-i[0])/n)),o}},1557:function(t,e,n){n.d(e,{$H:function(){return s},E4:function(){return i},ZF:function(){return a},ep:function(){return u},hF:function(){return l},jy:function(){return o}});var r=n(8001);function i(t,e,n,i){let o;return o=n&&n.length?n.shift():r.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",i)}function o(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function s(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function a(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function u(t){while(t.lastChild)t.removeChild(t.lastChild)}function l(t,e){const n=t.childNodes;for(let r=0;1;++r){const i=n[r],o=e[r];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--r):t.appendChild(o))}}},2249:function(t,e,n){function r(t){return Math.pow(t,3)}function i(t){return 1-r(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}n.d(e,{GE:function(){return s},Vv:function(){return i},YQ:function(){return r},rd:function(){return o}})},5423:function(t,e,n){n.d(e,{Vx:function(){return o},bN:function(){return s},oL:function(){return i}});var r=n(8831);function i(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){const r=n;n=function(){t.removeEventListener(e,n),r.apply(this,arguments)}}const o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function o(t,e,n,r){return i(t,e,n,r,!0)}function s(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,r.Z)(t))}},5375:function(t,e,n){class r{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}e.ZP=r},7621:function(t,e){e.Z={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},3005:function(t,e,n){n(7658);var r=n(9346),i=n(5375),o=n(6138),s=n(8831);class a extends r.Z{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),r=n[t]||(n[t]=[]);r.includes(e)||r.push(e)}dispatchEvent(t){const e="string"===typeof t,n=e?t:t.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=e?new i.ZP(t):t;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});let l;n in a||(a[n]=0,u[n]=0),++a[n];for(let i=0,o=r.length;i<o;++i)if(l="handleEvent"in r[i]?r[i].handleEvent(s):r[i].call(this,s),!1===l||s.propagationStopped){l=!1;break}if(0===--a[n]){let t=u[n];delete u[n];while(t--)this.removeEventListener(n,o.Zn);delete a[n]}return l}disposeInternal(){this.listeners_&&(0,s.Z)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const n=this.listeners_&&this.listeners_[t];if(n){const r=n.indexOf(e);-1!==r&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[r]=o.Zn,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t]))}}}e.Z=a},944:function(t,e,n){n.d(e,{Cf:function(){return B},Cr:function(){return N},EO:function(){return G},Ed:function(){return P},GN:function(){return m},H6:function(){return y},HK:function(){return p},I7:function(){return F},MV:function(){return $},Ne:function(){return X},T9:function(){return g},Wj:function(){return R},Xv:function(){return L},YN:function(){return _},b8:function(){return l},bg:function(){return C},d9:function(){return a},dz:function(){return Z},f3:function(){return s},fS:function(){return E},g0:function(){return A},hC:function(){return S},hI:function(){return i},jE:function(){return c},kK:function(){return U},l7:function(){return T},lJ:function(){return d},p8:function(){return M},pX:function(){return f},qP:function(){return v},qf:function(){return u},qg:function(){return O},r4:function(){return h},rL:function(){return b},w$:function(){return I},xb:function(){return D}});n(7658);var r=n(2044);function i(t){const e=d();for(let n=0,r=t.length;n<r;++n)R(e,t[n]);return e}function o(t,e,n){const r=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),s=Math.max.apply(null,e);return g(r,i,o,s,n)}function s(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function a(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function u(t,e,n){let r,i;return r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,r*r+i*i}function l(t,e){return c(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function c(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function f(t,e){const n=t[0],i=t[1],o=t[2],s=t[3],a=e[0],u=e[1];let l=r.Z.UNKNOWN;return a<n?l|=r.Z.LEFT:a>o&&(l|=r.Z.RIGHT),u<i?l|=r.Z.BELOW:u>s&&(l|=r.Z.ABOVE),l===r.Z.UNKNOWN&&(l=r.Z.INTERSECTING),l}function d(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function _(t){return g(1/0,1/0,-1/0,-1/0,t)}function p(t,e){const n=t[0],r=t[1];return g(n,r,n,r,e)}function m(t,e,n,r,i){const o=_(i);return v(o,t,e,n,r)}function E(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function T(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function R(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function v(t,e,n,r,i){for(;n<r;n+=i)x(t,e[n],e[n+1]);return t}function x(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function y(t,e){let n;return n=e(S(t)),n||(n=e(I(t)),n||(n=e(L(t)),n||(n=e(b(t)),n||!1)))}function C(t){let e=0;return D(t)||(e=Z(t)*N(t)),e}function S(t){return[t[0],t[1]]}function I(t){return[t[2],t[1]]}function O(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function A(t,e){let n;if("bottom-left"===e)n=S(t);else if("bottom-right"===e)n=I(t);else if("top-left"===e)n=b(t);else{if("top-right"!==e)throw new Error("Invalid corner");n=L(t)}return n}function M(t,e,n,r,i){const[o,s,a,u,l,h,c,f]=w(t,e,n,r);return g(Math.min(o,a,l,c),Math.min(s,u,h,f),Math.max(o,a,l,c),Math.max(s,u,h,f),i)}function w(t,e,n,r){const i=e*r[0]/2,o=e*r[1]/2,s=Math.cos(n),a=Math.sin(n),u=i*s,l=i*a,h=o*s,c=o*a,f=t[0],d=t[1];return[f-u+c,d-l-h,f-u-c,d-l+h,f+u-c,d+l+h,f+u+c,d+l-h,f-u+c,d-l-h]}function N(t){return t[3]-t[1]}function P(t,e,n){const r=n||d();return U(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):_(r),r}function b(t){return[t[0],t[3]]}function L(t){return[t[2],t[3]]}function Z(t){return t[2]-t[0]}function U(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function D(t){return t[2]<t[0]||t[3]<t[1]}function G(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function F(t,e,n){let i=!1;const o=f(t,e),s=f(t,n);if(o===r.Z.INTERSECTING||s===r.Z.INTERSECTING)i=!0;else{const a=t[0],u=t[1],l=t[2],h=t[3],c=e[0],f=e[1],d=n[0],g=n[1],_=(g-f)/(d-c);let p,m;s&r.Z.ABOVE&&!(o&r.Z.ABOVE)&&(p=d-(g-h)/_,i=p>=a&&p<=l),i||!(s&r.Z.RIGHT)||o&r.Z.RIGHT||(m=g-(d-l)*_,i=m>=u&&m<=h),i||!(s&r.Z.BELOW)||o&r.Z.BELOW||(p=d-(g-u)/_,i=p>=a&&p<=l),i||!(s&r.Z.LEFT)||o&r.Z.LEFT||(m=g-(d-a)*_,i=m>=u&&m<=h)}return i}function X(t,e,n,r){if(D(t))return _(n);let i=[];if(r>1){const e=t[2]-t[0],n=t[3]-t[1];for(let o=0;o<r;++o)i.push(t[0]+e*o/r,t[1],t[2],t[1]+n*o/r,t[2]-e*o/r,t[3],t[0],t[3]-n*o/r)}else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);const s=[],a=[];for(let o=0,u=i.length;o<u;o+=2)s.push(i[o]),a.push(i[o+1]);return o(s,a,n)}function B(t,e){const n=e.getExtent(),r=O(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const e=Z(n),i=Math.floor((r[0]-n[0])/e),o=i*e;t[0]-=o,t[2]-=o}return t}function $(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];B(t,e);const r=Z(n);if(Z(t)>r)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+r,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-r,t[3]]]}return[t]}},2044:function(t,e){e.Z={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6138:function(t,e,n){n.d(e,{Dv:function(){return o},Zn:function(){return s},qe:function(){return a},uX:function(){return i}});var r=n(4008);function i(){return!0}function o(){return!1}function s(){}function a(t){let e,n,i,o=!1;return function(){const s=Array.prototype.slice.call(arguments);return o&&this===i&&(0,r.fS)(s,n)||(o=!0,i=this,n=s,e=t.apply(this,arguments)),e}}},9911:function(t,e,n){var r=n(9845),i=n(1904),o=n(9287),s=n(944),a=n(9962),u=n(6138),l=n(790);const h=(0,o.Ue)();class c extends r.Z{constructor(){super(),this.extent_=(0,s.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,u.qe)((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,i.O3)()}closestPointXY(t,e,n,r){return(0,i.O3)()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return(0,i.O3)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,s.YN)(t),this.extentRevision_=this.getRevision()}return(0,s.EO)(this.extent_,t)}rotate(t,e){(0,i.O3)()}scale(t,e,n){(0,i.O3)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return(0,i.O3)()}getType(){return(0,i.O3)()}applyTransform(t){(0,i.O3)()}intersectsExtent(t){return(0,i.O3)()}translate(t,e){(0,i.O3)()}transform(t,e){const n=(0,a.U2)(t),r="tile-pixels"==n.getUnits()?function(t,r,i){const u=n.getExtent(),c=n.getWorldExtent(),f=(0,s.Cr)(c)/(0,s.Cr)(u);return(0,o.qC)(h,c[0],c[3],f,-f,0,0,0),(0,l.vT)(t,0,t.length,i,h,r),(0,a.Ck)(n,e)(t,r,i)}:(0,a.Ck)(n,e);return this.applyTransform(r),this}}e.Z=c},2949:function(t,e,n){var r=n(9483),i=n(944),o=n(4375),s=n(5756);class a extends r.ZP{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,r){const i=this.flatCoordinates,o=(0,s.bI)(t,e,i[0],i[1]);if(o<r){const t=this.stride;for(let e=0;e<t;++e)n[e]=i[e];return n.length=t,o}return r}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return(0,i.HK)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,i.jE)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.IG)(this.flatCoordinates,0,t,this.stride),this.changed()}}e.Z=a},4404:function(t,e,n){n.d(e,{ZP:function(){return T},oJ:function(){return R}});n(7658);var r=n(9483),i=n(6356),o=n(944),s=n(4375),a=n(9528),u=n(2650),l=n(6940);class h extends r.ZP{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new h(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,r){return r<(0,o.qf)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,i.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,i.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))}getArea(){return(0,l.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,u.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,a.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new h(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}var c=h,f=n(2949),d=n(4008),g=n(2732),_=n(5383),p=n(8696),m=n(8903);class E extends r.ZP{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,d.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new E(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,r){return r<(0,o.qf)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,i.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,i.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))}containsXY(t,e){return(0,m.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,l.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,p.zX)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,u.o1)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,o.qg)(this.getExtent());this.flatInteriorPoint_=(0,g.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new f.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new c(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[];let i=0;for(let o=0,s=n.length;o<s;++o){const s=n[o],a=new c(e.slice(i,s),t);r.push(a),i=s}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,p.$v)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,p.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=(0,a.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new E(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return(0,_.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=(0,s._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}var T=E;function R(t){if((0,o.xb)(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],r=t[2],i=t[3],s=[e,n,e,i,r,i,r,n,e,n];return new E(s,"XY",[s.length])}},9483:function(t,e,n){n.d(e,{Kr:function(){return h}});var r=n(9911),i=n(1904),o=n(944),s=n(790);class a extends r.Z{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return(0,o.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,i.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t),n=e.getFlatCoordinates();return n.length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){(0,i.O3)()}setLayout(t,e,n){let r;if(t)r=l(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}r=e.length,t=u(r)}this.layout=t,this.stride=r}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const r=this.getStride();(0,s.U1)(n,0,n.length,r,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=(0,o.qg)(this.getExtent()));const r=this.getFlatCoordinates();if(r){const i=this.getStride();(0,s.bA)(r,0,r.length,i,t,e,n,r),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const r=this.getStride();(0,s.Iu)(n,0,n.length,r,t,e,n),this.changed()}}}function u(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function l(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function h(t,e,n){const r=t.getFlatCoordinates();if(!r)return null;const i=t.getStride();return(0,s.vT)(r,0,r.length,i,e,n)}e.ZP=a},6940:function(t,e,n){function r(t,e,n,r){let i=0,o=t[n-r],s=t[n-r+1];for(;e<n;e+=r){const n=t[e],r=t[e+1];i+=s*n-o*r,o=n,s=r}return i/2}function i(t,e,n,i){let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];o+=r(t,e,a,i),e=a}return o}function o(t,e,n,r){let o=0;for(let s=0,a=n.length;s<a;++s){const a=n[s];o+=i(t,e,a,r),e=a[a.length-1]}return o}n.d(e,{Eu:function(){return o},KP:function(){return i},QQ:function(){return r}})},6356:function(t,e,n){n.d(e,{Af:function(){return s},Bv:function(){return o},H$:function(){return u},Xl:function(){return l},gI:function(){return h},sD:function(){return a}});var r=n(5756);function i(t,e,n,i,o,s,a){const u=t[e],l=t[e+1],h=t[n]-u,c=t[n+1]-l;let f;if(0===h&&0===c)f=e;else{const d=((o-u)*h+(s-l)*c)/(h*h+c*c);if(d>1)f=n;else{if(d>0){for(let o=0;o<i;++o)a[o]=(0,r.t7)(t[e+o],t[n+o],d);return void(a.length=i)}f=e}}for(let r=0;r<i;++r)a[r]=t[f+r];a.length=i}function o(t,e,n,i,o){let s=t[e],a=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],u=(0,r.bI)(s,a,n,i);u>o&&(o=u),s=n,a=i}return o}function s(t,e,n,r,i){for(let s=0,a=n.length;s<a;++s){const a=n[s];i=o(t,e,a,r,i),e=a}return i}function a(t,e,n,r,i){for(let o=0,a=n.length;o<a;++o){const a=n[o];i=s(t,e,a,r,i),e=a[a.length-1]}return i}function u(t,e,n,o,s,a,u,l,h,c,f){if(e==n)return c;let d,g;if(0===s){if(g=(0,r.bI)(u,l,t[e],t[e+1]),g<c){for(d=0;d<o;++d)h[d]=t[e+d];return h.length=o,g}return c}f=f||[NaN,NaN];let _=e+o;while(_<n)if(i(t,_-o,_,o,u,l,f),g=(0,r.bI)(u,l,f[0],f[1]),g<c){for(c=g,d=0;d<o;++d)h[d]=f[d];h.length=o,_+=o}else _+=o*Math.max((Math.sqrt(g)-Math.sqrt(c))/s|0,1);if(a&&(i(t,n-o,e,o,u,l,f),g=(0,r.bI)(u,l,f[0],f[1]),g<c)){for(c=g,d=0;d<o;++d)h[d]=f[d];h.length=o}return c}function l(t,e,n,r,i,o,s,a,l,h,c){c=c||[NaN,NaN];for(let f=0,d=n.length;f<d;++f){const d=n[f];h=u(t,e,d,r,i,o,s,a,l,h,c),e=d}return h}function h(t,e,n,r,i,o,s,a,u,h,c){c=c||[NaN,NaN];for(let f=0,d=n.length;f<d;++f){const d=n[f];h=l(t,e,d,r,i,o,s,a,u,h,c),e=d[d.length-1]}return h}},8903:function(t,e,n){n.d(e,{TG:function(){return o},Zl:function(){return a},uG:function(){return i},wY:function(){return s}});var r=n(944);function i(t,e,n,i,s){const a=(0,r.H6)(s,(function(r){return!o(t,e,n,i,r[0],r[1])}));return!a}function o(t,e,n,r,i,o){let s=0,a=t[n-r],u=t[n-r+1];for(;e<n;e+=r){const n=t[e],r=t[e+1];u<=o?r>o&&(n-a)*(o-u)-(i-a)*(r-u)>0&&s++:r<=o&&(n-a)*(o-u)-(i-a)*(r-u)<0&&s--,a=n,u=r}return 0!==s}function s(t,e,n,r,i,s){if(0===n.length)return!1;if(!o(t,e,n[0],r,i,s))return!1;for(let a=1,u=n.length;a<u;++a)if(o(t,n[a-1],n[a],r,i,s))return!1;return!0}function a(t,e,n,r,i,o){if(0===n.length)return!1;for(let a=0,u=n.length;a<u;++a){const u=n[a];if(s(t,e,u,r,i,o))return!0;e=u[u.length-1]}return!1}},4375:function(t,e,n){function r(t,e,n,r){for(let i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function i(t,e,n,r){for(let i=0,o=n.length;i<o;++i){const o=n[i];for(let n=0;n<r;++n)t[e++]=o[n]}return e}function o(t,e,n,r,o){o=o||[];let s=0;for(let a=0,u=n.length;a<u;++a){const u=i(t,e,n[a],r);o[s++]=u,e=u}return o.length=s,o}function s(t,e,n,r,i){i=i||[];let s=0;for(let a=0,u=n.length;a<u;++a){const u=o(t,e,n[a],r,i[s]);0===u.length&&(u[0]=e),i[s++]=u,e=u[u.length-1]}return i.length=s,i}n.d(e,{IG:function(){return r},QT:function(){return s},Sg:function(){return i},_5:function(){return o}})},2650:function(t,e,n){function r(t,e,n,r,i){i=void 0!==i?i:[];let o=0;for(let s=e;s<n;s+=r)i[o++]=t.slice(s,s+r);return i.length=o,i}function i(t,e,n,i,o){o=void 0!==o?o:[];let s=0;for(let a=0,u=n.length;a<u;++a){const u=n[a];o[s++]=r(t,e,u,i,o[s]),e=u}return o.length=s,o}function o(t,e,n,r,o){o=void 0!==o?o:[];let s=0;for(let a=0,u=n.length;a<u;++a){const u=n[a];o[s++]=1===u.length&&u[0]===e?[]:i(t,e,u,r,o[s]),e=u[u.length-1]}return o.length=s,o}n.d(e,{Ml:function(){return r},o1:function(){return i},ug:function(){return o}})},2732:function(t,e,n){n.d(e,{U:function(){return s},X:function(){return o}});n(7658);var r=n(4008),i=n(8903);function o(t,e,n,o,s,a,u){let l,h,c,f,d,g,_;const p=s[a+1],m=[];for(let r=0,i=n.length;r<i;++r){const i=n[r];for(f=t[i-o],g=t[i-o+1],l=e;l<i;l+=o)d=t[l],_=t[l+1],(p<=g&&_<=p||g<=p&&p<=_)&&(c=(p-g)/(_-g)*(d-f)+f,m.push(c)),f=d,g=_}let E=NaN,T=-1/0;for(m.sort(r.j2),f=m[0],l=1,h=m.length;l<h;++l){d=m[l];const r=Math.abs(d-f);r>T&&(c=(f+d)/2,(0,i.wY)(t,e,n,o,c,p)&&(E=c,T=r)),f=d}return isNaN(E)&&(E=s[a]),u?(u.push(E,p,T),u):[E,p,T]}function s(t,e,n,r,i){let s=[];for(let a=0,u=n.length;a<u;++a){const u=n[a];s=o(t,e,u,r,i,2*a,s),e=u[u.length-1]}return s}},5383:function(t,e,n){n.d(e,{AW:function(){return a},Kz:function(){return s},ac:function(){return l},mV:function(){return u},oW:function(){return h}});var r=n(944),i=n(2402),o=n(8903);function s(t,e,n,o,s){const a=(0,r.qP)((0,r.lJ)(),t,e,n,o);return!!(0,r.kK)(s,a)&&(!!(0,r.r4)(s,a)||(a[0]>=s[0]&&a[2]<=s[2]||(a[1]>=s[1]&&a[3]<=s[3]||(0,i.E)(t,e,n,o,(function(t,e){return(0,r.I7)(s,t,e)})))))}function a(t,e,n,r,i){for(let o=0,a=n.length;o<a;++o){if(s(t,e,n[o],r,i))return!0;e=n[o]}return!1}function u(t,e,n,r,i){return!!s(t,e,n,r,i)||(!!(0,o.TG)(t,e,n,r,i[0],i[1])||(!!(0,o.TG)(t,e,n,r,i[0],i[3])||(!!(0,o.TG)(t,e,n,r,i[2],i[1])||!!(0,o.TG)(t,e,n,r,i[2],i[3]))))}function l(t,e,n,r,i){if(!u(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(let a=1,u=n.length;a<u;++a)if((0,o.uG)(t,n[a-1],n[a],r,i)&&!s(t,n[a-1],n[a],r,i))return!1;return!0}function h(t,e,n,r,i){for(let o=0,s=n.length;o<s;++o){const s=n[o];if(l(t,e,s,r,i))return!0;e=s[s.length-1]}return!1}},8696:function(t,e,n){n.d(e,{$v:function(){return o},Oj:function(){return s},zX:function(){return a},dL:function(){return u}});n(7658);function r(t,e,n,r){while(e<n-r){for(let i=0;i<r;++i){const o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function i(t,e,n,r){let i=0,o=t[n-r],s=t[n-r+1];for(;e<n;e+=r){const n=t[e],r=t[e+1];i+=(n-o)*(r+s),o=n,s=r}return 0===i?void 0:i>0}function o(t,e,n,r,o){o=void 0!==o&&o;for(let s=0,a=n.length;s<a;++s){const a=n[s],u=i(t,e,a,r);if(0===s){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;e=a}return!0}function s(t,e,n,r,i){for(let s=0,a=n.length;s<a;++s){const a=n[s];if(!o(t,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function a(t,e,n,o,s){s=void 0!==s&&s;for(let a=0,u=n.length;a<u;++a){const u=n[a],l=i(t,e,u,o),h=0===a?s&&l||!s&&!l:s&&!l||!s&&l;h&&r(t,e,u,o),e=u}return e}function u(t,e,n,r,i){for(let o=0,s=n.length;o<s;++o)e=a(t,e,n[o],r,i);return e}},2402:function(t,e,n){function r(t,e,n,r,i){let o;for(e+=r;e<n;e+=r)if(o=i(t.slice(e-r,e),t.slice(e,e+r)),o)return o;return!1}n.d(e,{E:function(){return r}})},9528:function(t,e,n){n.d(e,{Pp:function(){return l},UJ:function(){return o},Zh:function(){return u},dt:function(){return i},uZ:function(){return s}});n(7658);var r=n(5756);function i(t,e,n,i,o,s,a){const u=(n-e)/i;if(u<3){for(;e<n;e+=i)s[a++]=t[e],s[a++]=t[e+1];return a}const l=new Array(u);l[0]=1,l[u-1]=1;const h=[e,n-i];let c=0;while(h.length>0){const n=h.pop(),s=h.pop();let a=0;const u=t[s],f=t[s+1],d=t[n],g=t[n+1];for(let e=s+i;e<n;e+=i){const n=t[e],i=t[e+1],o=(0,r.rU)(n,i,u,f,d,g);o>a&&(c=e,a=o)}a>o&&(l[(c-e)/i]=1,s+i<c&&h.push(s,c),c+i<n&&h.push(c,n))}for(let r=0;r<u;++r)l[r]&&(s[a++]=t[e+r*i],s[a++]=t[e+r*i+1]);return a}function o(t,e,n,r,o,s,a,u){for(let l=0,h=n.length;l<h;++l){const h=n[l];a=i(t,e,h,r,o,s,a),u.push(a),e=h}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,n,r,i,o,a){if(e==n)return a;let u,l,h=s(t[e],i),c=s(t[e+1],i);e+=r,o[a++]=h,o[a++]=c;do{if(u=s(t[e],i),l=s(t[e+1],i),e+=r,e==n)return o[a++]=u,o[a++]=l,a}while(u==h&&l==c);while(e<n){const n=s(t[e],i),f=s(t[e+1],i);if(e+=r,n==u&&f==l)continue;const d=u-h,g=l-c,_=n-h,p=f-c;d*p==g*_&&(d<0&&_<d||d==_||d>0&&_>d)&&(g<0&&p<g||g==p||g>0&&p>g)?(u=n,l=f):(o[a++]=u,o[a++]=l,h=u,c=l,u=n,l=f)}return o[a++]=u,o[a++]=l,a}function u(t,e,n,r,i,o,s,u){for(let l=0,h=n.length;l<h;++l){const h=n[l];s=a(t,e,h,r,i,o,s),u.push(s),e=h}return s}function l(t,e,n,r,i,o,s,a){for(let l=0,h=n.length;l<h;++l){const h=n[l],c=[];s=u(t,e,h,r,i,o,s,c),a.push(c),e=h[h.length-1]}return s}},790:function(t,e,n){function r(t,e,n,r,i,o){o=o||[];let s=0;for(let a=e;a<n;a+=r){const e=t[a],n=t[a+1];o[s++]=i[0]*e+i[2]*n+i[4],o[s++]=i[1]*e+i[3]*n+i[5]}return o&&o.length!=s&&(o.length=s),o}function i(t,e,n,r,i,o,s){s=s||[];const a=Math.cos(i),u=Math.sin(i),l=o[0],h=o[1];let c=0;for(let f=e;f<n;f+=r){const e=t[f]-l,n=t[f+1]-h;s[c++]=l+e*a-n*u,s[c++]=h+e*u+n*a;for(let i=f+2;i<f+r;++i)s[c++]=t[i]}return s&&s.length!=c&&(s.length=c),s}function o(t,e,n,r,i,o,s,a){a=a||[];const u=s[0],l=s[1];let h=0;for(let c=e;c<n;c+=r){const e=t[c]-u,n=t[c+1]-l;a[h++]=u+i*e,a[h++]=l+o*n;for(let i=c+2;i<c+r;++i)a[h++]=t[i]}return a&&a.length!=h&&(a.length=h),a}function s(t,e,n,r,i,o,s){s=s||[];let a=0;for(let u=e;u<n;u+=r){s[a++]=t[u]+i,s[a++]=t[u+1]+o;for(let e=u+2;e<u+r;++e)s[a++]=t[e]}return s&&s.length!=a&&(s.length=a),s}n.d(e,{Iu:function(){return s},U1:function(){return i},bA:function(){return o},vT:function(){return r}})},8001:function(t,e,n){n.d(e,{G$:function(){return a},Id:function(){return h},ME:function(){return s},MP:function(){return l},Tp:function(){return c},V:function(){return i},bM:function(){return f},tK:function(){return u}});const r="undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent?navigator.userAgent.toLowerCase():"",i=r.includes("firefox"),o=r.includes("safari")&&!r.includes("chrom"),s=o&&(r.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(r)),a=r.includes("webkit")&&!r.includes("edge"),u=r.includes("macintosh"),l="undefined"!==typeof devicePixelRatio?devicePixelRatio:1,h="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,c="undefined"!==typeof Image&&Image.prototype.decode,f=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(e){}return t}()},8939:function(t,e,n){var r=n(9845),i=n(4949),o=n(1904),s=n(2391),a=n(5756);class u extends r.Z{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"===typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[i.Z.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,s.h)("number"===typeof e[i.Z.OPACITY],"Layer opacity must be a number"),e[i.Z.VISIBLE]=void 0===t.visible||t.visible,e[i.Z.Z_INDEX]=t.zIndex,e[i.Z.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[i.Z.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[i.Z.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[i.Z.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=(0,a.uZ)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,o.O3)()}getLayerStatesArray(t){return(0,o.O3)()}getExtent(){return this.get(i.Z.EXTENT)}getMaxResolution(){return this.get(i.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(i.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(i.Z.MIN_ZOOM)}getMaxZoom(){return this.get(i.Z.MAX_ZOOM)}getOpacity(){return this.get(i.Z.OPACITY)}getSourceState(){return(0,o.O3)()}getVisible(){return this.get(i.Z.VISIBLE)}getZIndex(){return this.get(i.Z.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(i.Z.EXTENT,t)}setMaxResolution(t){this.set(i.Z.MAX_RESOLUTION,t)}setMinResolution(t){this.set(i.Z.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(i.Z.MAX_ZOOM,t)}setMinZoom(t){this.set(i.Z.MIN_ZOOM,t)}setOpacity(t){(0,s.h)("number"===typeof t,"Layer opacity must be a number"),this.set(i.Z.OPACITY,t)}setVisible(t){this.set(i.Z.VISIBLE,t)}setZIndex(t){this.set(i.Z.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}e.Z=u},4150:function(t,e,n){n.d(e,{j:function(){return f}});n(7658);var r=n(8939),i=n(7621),o=n(4949),s=n(8894),a=n(7793),u=n(2391),l=n(944),h=n(5423);class c extends r.Z{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(o.Z.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(o.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,h.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=(0,h.oL)(t,i.Z.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let r;!t&&n&&(t=n.getView()),e=t instanceof a.ZP?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),r=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const i=this.getExtent();return f(r,e.viewState)&&(!i||(0,l.kK)(i,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];const r=t instanceof a.ZP?t.getViewStateAndExtent():t;let i=e(r);return Array.isArray(i)||(i=[i]),i}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(o.Z.MAP,t)}getMapInternal(){return this.get(o.Z.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,h.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,h.bN)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,h.oL)(t,s.Z.PRECOMPOSE,(function(t){const e=t,n=e.frameState.layerStatesArray,r=this.getLayerState(!1);(0,u.h)(!n.some((function(t){return t.layer===r.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(r)}),this),this.mapRenderKey_=(0,h.oL)(this,i.Z.CHANGE,t.render,t),this.changed())}setSource(t){this.set(o.Z.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function f(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}e.Z=c},4949:function(t,e){e.Z={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},9260:function(t,e,n){n.d(e,{Z:function(){return Le}});n(7658);var r=n(4150),i={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class o extends r.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(i.PRELOAD)}setPreload(t){this.set(i.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(i.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(i.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}var s=o,a=n(4949),u=(n(1439),n(7585),n(5315),n(5443)),l=n(4757),h=n(7145),c=n(1557);function f(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function d(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let g=null;function _(t){g||(g=(0,c.E4)(t.width,t.height,void 0,{willReadFrequently:!0}));const e=g.canvas,n=t.width;e.width!==n&&(e.width=n);const r=t.height;return e.height!==r&&(e.height=r),g.clearRect(0,0,n,r),g.drawImage(t,0,0),g.getImageData(0,0,n,r).data}const p=[256,256];class m extends l.Z{constructor(t){const e=h.Z.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null}getSize(){if(this.size_)return this.size_;const t=f(this.data_);return t?[t.width,t.height]:p}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==h.Z.IDLE&&this.state!==h.Z.ERROR)return;this.state=h.Z.LOADING,this.changed();const t=this;this.loader_().then((function(e){t.data_=e,t.state=h.Z.LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=h.Z.ERROR,t.changed()}))}}var E=m,T=n(7621),R=n(9595),v=n(6795),x=n(5756),y=n(944),C=n(5423);class S extends E{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),n=this.targetTileGrid_.getExtent();let r=this.sourceTileGrid_.getExtent();const i=n?(0,y.Ed)(e,n):e;if(0===(0,y.bg)(i))return void(this.state=h.Z.EMPTY);const o=t.sourceProj,s=o.getExtent();s&&(r=r?(0,y.Ed)(r,s):s);const a=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),l=t.targetProj,c=(0,v.Co)(o,l,i,a);if(!isFinite(c)||c<=0)return void(this.state=h.Z.EMPTY);const f=void 0!==t.errorThreshold?t.errorThreshold:u.m;if(this.triangulation_=new R.Z(o,l,i,r,c*f,a),0===this.triangulation_.getTriangles().length)return void(this.state=h.Z.EMPTY);this.sourceZ_=this.sourceTileGrid_.getZForResolution(c);let d=this.triangulation_.calculateSourceExtent();if(r&&(o.canWrapX()?(d[1]=(0,x.uZ)(d[1],r[1],r[3]),d[3]=(0,x.uZ)(d[3],r[1],r[3])):d=(0,y.Ed)(d,r)),(0,y.bg)(d)){const e=this.sourceTileGrid_.getTileRangeForExtentAndZ(d,this.sourceZ_),n=t.getTileFunction;for(let t=e.minX;t<=e.maxX;t++)for(let r=e.minY;r<=e.maxY;r++){const e=n(this.sourceZ_,t,r,this.pixelRatio_);e&&this.sourceTiles_.push(e)}0===this.sourceTiles_.length&&(this.state=h.Z.EMPTY)}else this.state=h.Z.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{if(!e||e.getState()!==h.Z.LOADED)return;const n=e.getSize(),r=this.gutter_;let i;const o=d(e.getData());i=o||_(f(e.getData()));const s=[n[0]+2*r,n[1]+2*r],a=i instanceof Float32Array,u=s[0]*s[1],l=a?Float32Array:Uint8Array,c=new l(i.buffer),g=l.BYTES_PER_ELEMENT,p=g*c.length/u,m=c.byteLength/s[1],E=Math.floor(m/g/s[0]),T=u*E;let R=c;if(c.length!==T){R=new l(T);let t=0,e=0;const n=s[0]*E;for(let r=0;r<s[1];++r){for(let r=0;r<n;++r)R[t++]=c[e+r];e+=m/g}}t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),data:new Uint8Array(R.buffer),dataType:l,bytesPerPixel:p,pixelSize:s})})),this.sourceTiles_.length=0,0===t.length)this.state=h.Z.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),r="number"===typeof n?n:n[0],i="number"===typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let u,l;const f=t[0].bytesPerPixel,d=Math.ceil(f/3);for(let h=d-1;h>=0;--h){const e=[];for(let r=0,i=t.length;r<i;++r){const n=t[r],i=n.data,o=n.pixelSize,s=o[0],a=o[1],u=(0,c.E4)(s,a,v.rX),l=u.createImageData(s,a),d=l.data;let g=3*h;for(let t=0,e=d.length;t<e;t+=4)d[t]=i[g],d[t+1]=i[g+1],d[t+2]=i[g+2],d[t+3]=255,g+=f;u.putImageData(l,0,0),e.push({extent:n.extent,image:u.canvas})}const n=(0,v.sY)(r,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,e,this.gutter_,!1,!1);for(let t=0,r=e.length;t<r;++t){const n=e[t].image,r=n.getContext("2d");(0,c.jy)(r),v.rX.push(r.canvas)}const d=n.getContext("2d"),g=d.getImageData(0,0,n.width,n.height);(0,c.jy)(d),v.rX.push(n),u||(l=new Uint8Array(f*g.width*g.height),u=new t[0].dataType(l.buffer));const _=g.data;let p=3*h;for(let t=0,r=_.length;t<r;t+=4)255===_[t+3]?(l[p]=_[t],l[p+1]=_[t+1],l[p+2]=_[t+2]):(l[p]=0,l[p+1]=0,l[p+2]=0),p+=f}this.reprojData_=u,this.reprojSize_=[Math.round(r*this.pixelRatio_),Math.round(i*this.pixelRatio_)],this.state=h.Z.LOADED}this.changed()}load(){if(this.state!==h.Z.IDLE&&this.state!==h.Z.ERROR)return;this.state=h.Z.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const n=e.getState();if(n!==h.Z.IDLE&&n!==h.Z.LOADING)return;t++;const r=(0,C.oL)(e,T.Z.CHANGE,(function(){const n=e.getState();n!=h.Z.LOADED&&n!=h.Z.ERROR&&n!=h.Z.EMPTY||((0,C.bN)(r),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t){const e=t.getState();e==h.Z.IDLE&&t.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(C.bN),this.sourcesListenerKeys_=null}}var I=S,O=n(4665),A=n(3005),M=n(3339),w=n(1904);class N extends A.Z{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=t.gutter||0,this.helper_=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(T.Z.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===h.Z.LOADED,this.loaded)this.uploadTile();else{if(t instanceof M.Z){const e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(T.Z.CHANGE,this.handleTileChange_)}}uploadTile(){(0,w.O3)()}setReady(){this.ready=!0,this.dispatchEvent(T.Z.CHANGE)}handleTileChange_(){this.tile.getState()===h.Z.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(T.Z.CHANGE,this.handleTileChange_)}}var P=N,b=n(8001);const L=34962,Z=34963,U=35040,D=35044,G=35048,F=5121,X=5123,B=5125,$=5126,Y=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function j(t,e,n=!0){e=Object.assign({preserveDrawingBuffer:!0,antialias:!b.ME},e);const r=n?["webgl2",...Y]:Y,i=r.length;for(let s=0;s<i;++s)try{const n=t.getContext(r[s],e);if(n)return n}catch(o){}return null}var z=n(2391);const W={STATIC_DRAW:D,STREAM_DRAW:U,DYNAMIC_DRAW:G};class H{constructor(t,e){this.array=null,this.type=t,(0,z.h)(t===L||t===Z,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage=void 0!==e?e:W.STATIC_DRAW}ofSize(t){return this.array=new(V(this.type))(t),this}fromArray(t){return this.array=V(this.type).from(t),this}fromArrayBuffer(t){return this.array=new(V(this.type))(t),this}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}}function V(t){switch(t){case L:return Float32Array;case Z:return Uint32Array;default:return Float32Array}}var k=H,K=n(2093);function q(t,e,n){const r=n?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function Q(t,e,n,r){q(t,e,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}function J(t,e,n,r,i,o){const s=t.getGL();let a,u;if(n instanceof Float32Array){a=s.FLOAT,t.getExtension("OES_texture_float");const e=t.getExtension("OES_texture_float_linear");u=null!==e}else a=s.UNSIGNED_BYTE,u=!0;q(s,e,o&&u);const l=n.byteLength/r[1];let h,c=1;switch(l%8===0?c=8:l%4===0?c=4:l%2===0&&(c=2),i){case 1:h=s.LUMINANCE;break;case 2:h=s.LUMINANCE_ALPHA;break;case 3:h=s.RGB;break;case 4:h=s.RGBA;break;default:throw new Error(`Unsupported number of bands: ${i}`)}const f=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,c),s.texImage2D(s.TEXTURE_2D,0,h,r[0],r[1],0,h,a,n),s.pixelStorei(s.UNPACK_ALIGNMENT,f)}let tt=null;function et(){tt=(0,c.E4)(1,1,void 0,{willReadFrequently:!0})}class nt extends P{constructor(t){super(t),this.textures=[],this.renderSize_=(0,K.Pq)(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const e=new k(L,D);e.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(e),this.coords=e,this.setTile(t.tile)}uploadTile(){const t=this.helper_,e=t.getGL(),n=this.tile;let r;this.textures.length=0,r=n instanceof M.Z||n instanceof O.Z?n.getImage():n.getData();const i=f(r);if(i){const t=e.createTexture();return this.textures.push(t),this.bandCount=4,Q(e,t,i,n.interpolate),void this.setReady()}r=d(r);const o=n.getSize(),s=[o[0]+2*this.gutter_,o[1]+2*this.gutter_],a=r instanceof Float32Array,u=s[0]*s[1],l=a?Float32Array:Uint8Array,h=l.BYTES_PER_ELEMENT,c=r.byteLength/s[1];this.bandCount=Math.floor(c/h/s[0]);const g=Math.ceil(this.bandCount/4);if(1===g){const i=e.createTexture();return this.textures.push(i),J(t,i,r,s,this.bandCount,n.interpolate),void this.setReady()}const _=new Array(g);for(let f=0;f<g;++f){const t=e.createTexture();this.textures.push(t);const n=f<g-1?4:(this.bandCount-1)%4+1;_[f]=new l(u*n)}let p=0,m=0;const E=s[0]*this.bandCount;for(let f=0;f<s[1];++f){for(let t=0;t<E;++t){const e=r[m+t],n=Math.floor(p/this.bandCount),i=t%this.bandCount,o=Math.floor(i/4),s=_[o],a=s.length/u,l=i%4;s[n*a+l]=e,++p}m+=c/h}for(let f=0;f<g;++f){const e=this.textures[f],r=_[f],i=r.length/u;J(t,e,r,s,i,n.interpolate)}this.setReady()}disposeInternal(){const t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(T.Z.CHANGE,this.handleTileChange_)}getImagePixelData_(t,e,n){const r=this.gutter_,i=this.renderSize_[0],o=this.renderSize_[1];tt||et(),tt.clearRect(0,0,1,1);const s=t.width,a=t.height,u=s-2*r,l=a-2*r,h=r+Math.floor(u*(e/i)),c=r+Math.floor(l*(n/o));let f;try{tt.drawImage(t,h,c,1,1,0,0,1,1),f=tt.getImageData(0,0,1,1).data}catch(d){return tt=null,null}return f}getArrayPixelData_(t,e,n,r){const i=this.gutter_,o=this.renderSize_[0],s=this.renderSize_[1],a=e[0],u=e[1],l=a+2*i,h=u+2*i,c=i+Math.floor(a*(n/o)),f=i+Math.floor(u*(r/s));if(t instanceof DataView){const e=t.byteLength/(l*h),n=e*(f*l+c),r=t.buffer.slice(n,n+e);return new DataView(r)}const d=this.bandCount*(f*l+c);return t.slice(d,d+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null;if(this.tile instanceof E){const n=this.tile.getData(),r=d(n);if(r){const n=this.tile.getSize();return this.getArrayPixelData_(r,n,t,e)}return this.getImagePixelData_(f(n),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}}var rt=nt,it=n(1750),ot=n(5411),st=n(6626),at=n(2254),ut=n(8894),lt={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},ht=n(9346);const ct="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",ft="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n";class dt{constructor(t){this.gl_=t.webGlContext;const e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer(),this.depthBuffer_=e.createRenderbuffer();const n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t.vertexShader||ct),e.compileShader(n);const r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,t.fragmentShader||ft),e.compileShader(r),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,n),e.attachShader(this.renderTargetProgram_,r),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();const i=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((n=>{this.uniforms_.push({value:t.uniforms[n],location:e.getUniformLocation(this.renderTargetProgram_,n)})}))}getGL(){return this.gl_}init(t){const e=this.getGL(),n=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.bindRenderbuffer(e.RENDERBUFFER,this.getDepthBuffer()),e.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;const t=0,r=e.RGBA,i=0,o=e.RGBA,s=e.UNSIGNED_BYTE,a=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,t,r,n[0],n[1],i,o,s,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n[0],n[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthBuffer_)}}apply(t,e,n,r){const i=this.getGL(),o=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,e?e.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!e){const e=(0,w.sq)(i.canvas);if(!t.renderTargets[e]){const n=i.getContextAttributes();n&&n.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)),t.renderTargets[e]=!0}}i.disable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),i.uniform1i(this.renderTargetTextureLocation_,0);const s=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,s),this.applyUniforms(t),n&&n(i,t),i.drawArrays(i.TRIANGLES,0,6),r&&r(i,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const e=this.getGL();let n,r=1;this.uniforms_.forEach((function(i){if(n="function"===typeof i.value?i.value(t):i.value,n instanceof HTMLCanvasElement||n instanceof ImageData)i.texture||(i.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${r}`]),e.bindTexture(e.TEXTURE_2D,i.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,n.width,n.height,0,e.UNSIGNED_BYTE,new Uint8Array(n.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.uniform1i(i.location,r++);else if(Array.isArray(n))switch(n.length){case 2:return void e.uniform2f(i.location,n[0],n[1]);case 3:return void e.uniform3f(i.location,n[0],n[1],n[2]);case 4:return void e.uniform4f(i.location,n[0],n[1],n[2],n[3]);default:return}else"number"===typeof n&&e.uniform1f(i.location,n)}))}}var gt=dt,_t=n(8831),pt=n(9287);function mt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Et(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const Tt={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Rt={UNSIGNED_BYTE:F,UNSIGNED_SHORT:X,UNSIGNED_INT:B,FLOAT:$},vt={};function xt(t){return"shared/"+t}let yt=0;function Ct(){const t="unique/"+yt;return yt+=1,t}function St(t){let e=vt[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0";const r=j(n);e={users:0,context:r},vt[t]=e}return e.users+=1,e.context}function It(t){const e=vt[t];if(!e)return;if(e.users-=1,e.users>0)return;const n=e.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete vt[t]}class Ot extends ht.Z{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?xt(t.canvasCacheKey):Ct(),this.gl_=St(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const e=this.gl_.canvas;e.addEventListener(lt.LOST,this.boundHandleWebGLContextLost_),e.addEventListener(lt.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,pt.Ue)(),this.offsetScaleMatrix_=(0,pt.Ue)(),this.tmpMat4_=mt(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map((t=>new gt({webGlContext:this.gl_,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}))):[new gt({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===xt(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,n=(0,w.sq)(t);let r=this.bufferCache_[n];if(!r){const i=e.createBuffer();r={buffer:t,webGlBuffer:i},this.bufferCache_[n]=r}e.bindBuffer(t.getType(),r.webGlBuffer)}flushBufferData(t){const e=this.gl_;this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=this.gl_,n=(0,w.sq)(t),r=this.bufferCache_[n];r&&!e.isContextLost()&&e.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(lt.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(lt.RESTORED,this.boundHandleWebGLContextRestored_),It(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,e,n){const r=this.gl_,i=this.getCanvas(),o=t.size,s=t.pixelRatio;i.width===o[0]*s&&i.height===o[1]*s||(i.width=o[0]*s,i.height=o[1]*s,i.style.width=o[0]+"px",i.style.height=o[1]+"px");for(let a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(t);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,e?r.ZERO:r.ONE_MINUS_SRC_ALPHA),n?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}bindTexture(t,e,n){const r=this.gl_;r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,t),r.uniform1i(this.getUniformLocation(n),e)}prepareDrawToRenderTarget(t,e,n,r){const i=this.gl_,o=e.getSize();i.bindFramebuffer(i.FRAMEBUFFER,e.getFramebuffer()),i.bindRenderbuffer(i.RENDERBUFFER,e.getDepthbuffer()),i.viewport(0,0,o[0],o[1]),i.bindTexture(i.TEXTURE_2D,e.getTexture()),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}drawElements(t,e){const n=this.gl_;this.getExtension("OES_element_index_uint");const r=n.UNSIGNED_INT,i=4,o=e-t,s=t*i;n.drawElements(n.TRIANGLES,o,r,s)}finalizeDraw(t,e,n){for(let r=0,i=this.postProcessPasses_.length;r<i;r++)r===i-1?this.postProcessPasses_[r].apply(t,null,e,n):this.postProcessPasses_[r].apply(t,this.postProcessPasses_[r+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const e=t.size,n=t.viewState.rotation,r=t.pixelRatio;this.setUniformFloatValue(Tt.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(Tt.ZOOM,t.viewState.zoom),this.setUniformFloatValue(Tt.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(Tt.PIXEL_RATIO,r),this.setUniformFloatVec2(Tt.VIEWPORT_SIZE_PX,[e[0],e[1]]),this.setUniformFloatValue(Tt.ROTATION,n)}applyHitDetectionUniform(t){const e=this.getUniformLocation(Tt.HIT_DETECTION);this.getGL().uniform1i(e,t?1:0),t&&this.setUniformFloatValue(Tt.PIXEL_RATIO,.5)}applyUniforms(t){const e=this.gl_;let n,r=0;this.uniforms_.forEach((i=>{if(n="function"===typeof i.value?i.value(t):i.value,n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData){i.texture||(i.prevValue=void 0,i.texture=e.createTexture()),this.bindTexture(i.texture,r,i.name),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const t=!(n instanceof HTMLImageElement)||n.complete;t&&i.prevValue!==n&&(i.prevValue=n,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),r++}else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(i.name,Et(this.tmpMat4_,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void e.uniform2f(this.getUniformLocation(i.name),n[0],n[1]);case 3:return void e.uniform3f(this.getUniformLocation(i.name),n[0],n[1],n[2]);case 4:return void e.uniform4f(this.getUniformLocation(i.name),n[0],n[1],n[2],n[3]);default:return}else"number"===typeof n&&e.uniform1f(this.getUniformLocation(i.name),n)}))}useProgram(t,e){const n=this.gl_;n.useProgram(t),this.currentProgram_=t,this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){const n=this.gl_,r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}getProgram(t,e){const n=this.gl_,r=this.compileShader(t,n.FRAGMENT_SHADER),i=this.compileShader(e,n.VERTEX_SHADER),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getShaderParameter(r,n.COMPILE_STATUS)){const t=`Fragment shader compilation failed: ${n.getShaderInfoLog(r)}`;throw new Error(t)}if(n.deleteShader(r),!n.getShaderParameter(i,n.COMPILE_STATUS)){const t=`Vertex shader compilation failed: ${n.getShaderInfoLog(i)}`;throw new Error(t)}if(n.deleteShader(i),!n.getProgramParameter(o,n.LINK_STATUS)){const t=`GL program linking failed: ${n.getProgramInfoLog(o)}`;throw new Error(t)}return o}getUniformLocation(t){const e=(0,w.sq)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[e]&&(this.uniformLocationsByProgram_[e]={}),void 0===this.uniformLocationsByProgram_[e][t]&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=(0,w.sq)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[e]&&(this.attribLocationsByProgram_[e]={}),void 0===this.attribLocationsByProgram_[e][t]&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const n=t.size,r=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return(0,pt.qC)(e,0,0,2/(i*n[0]),2/(i*n[1]),-r,-o[0],-o[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,n,r,i){const o=this.getAttributeLocation(t);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,e,n,!1,r,i))}enableAttributes(t){const e=At(t);let n=0;for(let r=0;r<t.length;r++){const i=t[r];this.enableAttributeArray_(i.name,i.size,i.type||$,e,n),n+=i.size*Mt(i.type)}}handleWebGLContextLost(t){(0,_t.Z)(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,e,n){const r=this.gl_;n=n||r.createTexture();const i=0,o=r.RGBA,s=0,a=r.RGBA,u=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,n),e?r.texImage2D(r.TEXTURE_2D,i,o,a,u,e):r.texImage2D(r.TEXTURE_2D,i,o,t[0],t[1],s,a,u,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n}}function At(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];e+=r.size*Mt(r.type)}return e}function Mt(t){switch(t){case Rt.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Rt.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Rt.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Rt.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var wt=Ot;class Nt extends st.Z{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=(0,pt.Ue)(),this.pixelContext_=null,this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,t.addChangeListener(a.Z.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const n=this.getLayer();if(n.hasListener(ut.Z.PRECOMPOSE)){const r=new at.Z(ut.Z.PRECOMPOSE,void 0,e,t);n.dispatchEvent(r)}}dispatchPostComposeEvent(t,e){const n=this.getLayer();if(n.hasListener(ut.Z.POSTCOMPOSE)){const r=new at.Z(ut.Z.POSTCOMPOSE,void 0,e,t);n.dispatchEvent(r)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,n=!0,r=-1;for(let o=0,s=t.layerStatesArray.length;o<s;o++){const i=t.layerStatesArray[o].layer,s=i.getRenderer();if(!(s instanceof Nt)){n=!0;continue}const a=i.getClassName();if((n||a!==e)&&(r+=1,n=!1),e=a,s===this)break}const i="map/"+t.mapId+"/group/"+r;this.helper&&this.helper.canvasCacheKeyMatches(i)&&!this.helper.needsToBeRecreated()||(this.removeHelper(),this.helper=new wt({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:i}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(t,e,n){const r=this.getLayer();if(r.hasListener(t)){(0,pt.qC)(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);const i=new at.Z(t,this.inversePixelTransform_,n,e);r.dispatchEvent(i)}}preRender(t,e){this.dispatchRenderEvent_(ut.Z.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(ut.Z.POSTRENDER,t,e)}}var Pt=Nt,bt=n(1832),Lt=n(4008),Zt=n(9962);const Ut={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},Dt={};function Gt(t){return 1/(t+2)}function Ft(){return{tileIds:new Set,representationsByZ:{}}}function Xt(t,e){return t.tileIds.has((0,w.sq)(e))}function Bt(t,e,n){const r=t.representationsByZ;n in r||(r[n]=new Set),r[n].add(e),t.tileIds.add((0,w.sq)(e.tile))}function $t(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=(0,y.Ed)(e,(0,Zt.dY)(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const n=r.getTileGridForProjection(t.viewState.projection).getExtent();n&&(e=(0,y.Ed)(e,n))}return e}function Yt(t,e){return`${t.getKey()},${(0,bt.km)(e)}`}class jt extends Pt{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=(0,pt.Ue)(),this.tempMat4=mt(),this.tempTileRange_=new ot.Z(0,0,0,0),this.tempTileCoord_=(0,bt.T9)(0,0,0),this.tempSize_=[0,0];const n=void 0!==e.cacheSize?e.cacheSize:512;this.tileRepresentationCache=new it.Z(n),this.frameState=null,this.projection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}isDrawableTile_(t){const e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return n==h.Z.LOADED||n==h.Z.EMPTY||n==h.Z.ERROR&&!r}prepareFrameInternal(t){this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=t.viewState.projection):this.projection_=t.viewState.projection;const e=this.getLayer(),n=e.getRenderSource();return!!n&&(!(0,y.xb)($t(t,t.extent))&&"ready"===n.getState())}createTileRepresentation(t){return(0,w.O3)()}enqueueTiles(t,e,n,r,i){const o=t.viewState,s=this.getLayer(),a=s.getRenderSource(),u=a.getTileGridForProjection(o.projection),l=a.getGutterForProjection(o.projection),c=(0,w.sq)(a);c in t.wantedTiles||(t.wantedTiles[c]={});const f=t.wantedTiles[c],d=this.tileRepresentationCache,g=s.getMapInternal(),_=Math.max(n-i,u.getMinZoom(),u.getZForResolution(Math.min(s.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):u.getResolution(0)),a.zDirection));for(let p=n;p>=_;--p){const n=u.getTileRangeForExtentAndZ(e,p,this.tempTileRange_),i=u.getResolution(p);for(let e=n.minX;e<=n.maxX;++e)for(let s=n.minY;s<=n.maxY;++s){const n=(0,bt.T9)(p,e,s,this.tempTileCoord_),g=Yt(a,n);let _,m;if(d.containsKey(g)&&(_=d.get(g),m=_.tile),_&&_.tile.key===a.getKey()||(m=a.getTile(p,e,s,t.pixelRatio,o.projection)),Xt(r,m))continue;if(_)if(this.isDrawableTile_(m))_.setTile(m);else{const t=m.getInterimTile();_.setTile(t)}else _=this.createTileRepresentation({tile:m,grid:u,helper:this.helper,gutter:l}),d.set(g,_);Bt(r,_,p);const E=m.getKey();f[E]=!0,m.getState()===h.Z.IDLE&&(t.tileQueue.isKeyQueued(E)||t.tileQueue.enqueue([m,c,u.getTileCoordCenter(n),i]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e,!0)}renderTile(t,e,n,r,i,o,s,a,u,l,h){}drawTile_(t,e,n,r,i,o,s){if(!e.loaded)return;const a=e.tile,u=a.tileCoord,l=(0,bt.km)(u),h=l in o?o[l]:1,c=s.getResolution(n),f=(0,K.Pq)(s.getTileSize(n),this.tempSize_),d=s.getOrigin(n),g=s.getTileCoordExtent(u),_=h<1?-1:Gt(n);h<1&&(t.animate=!0);const p=t.viewState,m=p.center[0],E=p.center[1],T=f[0]+2*r,R=f[1]+2*r,v=T/R,x=(m-d[0])/(f[0]*c),y=(d[1]-E)/(f[1]*c),C=p.resolution/c,S=u[1],I=u[2];(0,pt.mc)(this.tileTransform_),(0,pt.bA)(this.tileTransform_,2/(t.size[0]*C/T),-2/(t.size[1]*C/T)),(0,pt.U1)(this.tileTransform_,p.rotation),(0,pt.bA)(this.tileTransform_,1,1/v),(0,pt.Iu)(this.tileTransform_,(f[0]*(S-x)-r)/T,(f[1]*(I-y)-r)/R),this.renderTile(e,this.tileTransform_,t,i,c,f,d,g,_,r,h)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const e=this.helper.getGL();this.preRender(e,t);const n=t.viewState,r=this.getLayer(),i=r.getRenderSource(),o=i.getTileGridForProjection(n.projection),s=i.getGutterForProjection(n.projection),a=$t(t,t.extent),u=o.getZForResolution(n.resolution,i.zDirection),l=Ft(),c=r.getPreload();if(t.nextExtent){const e=o.getZForResolution(n.nextResolution,i.zDirection),r=$t(t,t.nextExtent);this.enqueueTiles(t,r,e,l,c)}this.enqueueTiles(t,a,u,l,0),c>0&&setTimeout((()=>{this.enqueueTiles(t,a,u-1,l,c-1)}),0);const f={},d=(0,w.sq)(this),g=t.time;let _=!1;for(const v of l.representationsByZ[u]){const t=v.tile;if((t instanceof O.Z||t instanceof I)&&t.getState()===h.Z.EMPTY)continue;const e=t.tileCoord;if(v.loaded){const n=t.getAlpha(d,g);if(1===n){t.endTransition(d);continue}_=!0;const r=(0,bt.km)(e);f[r]=n}this.renderComplete=!1;const n=this.findAltTiles_(o,e,u+1,l);if(n)continue;const r=o.getMinZoom();for(let i=u-1;i>=r;--i){const t=this.findAltTiles_(o,e,i,l);if(t)break}}this.beforeTilesRender(t,_);const p=l.representationsByZ,m=Object.keys(p).map(Number).sort(Lt.$1);for(let h=0,v=m.length;h<v;++h){const e=m[h];for(const n of p[e]){const r=n.tile.tileCoord,i=(0,bt.km)(r);i in f||this.drawTile_(t,n,e,s,a,f,o)}}for(const h of p[u]){const e=h.tile.tileCoord,n=(0,bt.km)(e);n in f&&this.drawTile_(t,h,u,s,a,f,o)}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const E=this.helper.getCanvas(),T=this.tileRepresentationCache;while(T.canExpireCache()){const t=T.pop();t.dispose()}const R=function(t,e){i.updateCacheSize(.1,e.viewState.projection),i.expireCache(e.viewState.projection,Dt)};return t.postRenderFunctions.push(R),this.postRender(e,t),E}findAltTiles_(t,e,n,r){const i=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_);if(!i)return!1;let o=!0;const s=this.tileRepresentationCache,a=this.getLayer().getRenderSource();for(let u=i.minX;u<=i.maxX;++u)for(let t=i.minY;t<=i.maxY;++t){const e=Yt(a,[n,u,t]);let i=!1;if(s.containsKey(e)){const t=s.get(e);t.loaded&&!Xt(r,t.tile)&&(Bt(r,t,n),i=!0)}i||(o=!1)}return o}clearCache(){const t=this.tileRepresentationCache;t.forEach((t=>t.dispose())),t.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}}var zt=jt;const Wt={...Ut,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},Ht={TEXTURE_COORD:"a_textureCoord"},Vt=[{name:Ht.TEXTURE_COORD,size:2,type:Rt.FLOAT}];class kt extends zt{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new k(Z,D),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){super.reset(t),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(t){return new rt(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,n,r,i,o,s,a,u,l,h){const c=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Vt);let f=0;while(f<t.textures.length){const e=`${Wt.TILE_TEXTURE_ARRAY}[${f}]`;this.helper.bindTexture(t.textures[f],f,e),++f}for(let v=0;v<this.paletteTextures_.length;++v){const t=this.paletteTextures_[v],e=t.getTexture(c);this.helper.bindTexture(e,f,t.name),++f}const d=n.viewState,g=o[0]+2*l,_=o[1]+2*l,p=t.tile,m=p.tileCoord,E=m[1],T=m[2];this.helper.setUniformMatrixValue(Wt.TILE_TRANSFORM,Et(this.tempMat4,e)),this.helper.setUniformFloatValue(Wt.TRANSITION_ALPHA,h),this.helper.setUniformFloatValue(Wt.DEPTH,u);let R=r;l>0&&(R=a,(0,y.Ed)(R,r,R)),this.helper.setUniformFloatVec4(Wt.RENDER_EXTENT,R),this.helper.setUniformFloatValue(Wt.RESOLUTION,d.resolution),this.helper.setUniformFloatValue(Wt.ZOOM,d.zoom),this.helper.setUniformFloatValue(Wt.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(Wt.TEXTURE_PIXEL_HEIGHT,_),this.helper.setUniformFloatValue(Wt.TEXTURE_RESOLUTION,i),this.helper.setUniformFloatValue(Wt.TEXTURE_ORIGIN_X,s[0]+E*o[0]*i-l*i),this.helper.setUniformFloatValue(Wt.TEXTURE_ORIGIN_Y,s[1]-T*o[1]*i+l*i),this.helper.drawElements(0,this.indices_.getSize())}getData(t){const e=this.helper.getGL();if(!e)return null;const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=(0,pt.nn)(n.pixelToCoordinateTransform,t.slice()),o=n.viewState,s=r.getExtent();if(s&&!(0,y.b8)((0,Zt.dY)(s,o.projection),i))return null;const a=r.getSources((0,y.hI)([i]),o.resolution);let u,l,c;for(u=a.length-1;u>=0;--u)if(l=a[u],"ready"===l.getState()){if(c=l.getTileGridForProjection(o.projection),l.getWrapX())break;const t=c.getExtent();if(!t||(0,y.b8)(t,i))break}if(u<0)return null;const f=this.tileRepresentationCache;for(let d=c.getZForResolution(o.resolution);d>=c.getMinZoom();--d){const t=c.getTileCoordForCoordAndZ(i,d),e=Yt(l,t);if(!f.containsKey(e))continue;const n=f.get(e),r=n.tile;if((r instanceof O.Z||r instanceof I)&&r.getState()===h.Z.EMPTY)return null;if(!n.loaded)continue;const o=c.getOrigin(d),s=(0,K.Pq)(c.getTileSize(d)),a=c.getResolution(d),u=(i[0]-o[0])/a-t[1]*s[0],g=(o[1]-i[1])/a-t[2]*s[1];return n.getPixelData(u,g)}return null}disposeInternal(){const t=this.helper;if(t){const e=t.getGL();e.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}var Kt=kt;class qt{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}}var Qt=qt,Jt=n(966);const te={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0};function ee(t){switch(t){case"string":return te.STRING;case"color":return te.COLOR;case"number":return te.NUMBER;case"boolean":return te.BOOLEAN;case"number[]":return te.NUMBER_ARRAY;default:throw new Error(`Unrecognized type hint: ${t}`)}}const ne={};function re(t){if("number"===typeof t)return te.NUMBER;if("boolean"===typeof t)return te.BOOLEAN;if("string"===typeof t)return(0,Jt.e1)(t)?te.COLOR|te.STRING:te.STRING;if(!Array.isArray(t))throw new Error(`Unhandled value type: ${JSON.stringify(t)}`);const e=t,n=e.every((function(t){return"number"===typeof t}));if(n)return 3===e.length||4===e.length?te.COLOR|te.NUMBER_ARRAY:te.NUMBER_ARRAY;if("string"!==typeof e[0])throw new Error(`Expected an expression operator but received: ${JSON.stringify(e)}`);const r=ne[e[0]];if(void 0===r)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return r.getReturnType(e.slice(1))}function ie(t){return Math.log2(t)%1===0}function oe(t){const e=[];return(t&te.NUMBER)>0&&e.push("number"),(t&te.COLOR)>0&&e.push("color"),(t&te.BOOLEAN)>0&&e.push("boolean"),(t&te.NUMBER_ARRAY)>0&&e.push("number[]"),(t&te.STRING)>0&&e.push("string"),e.length>0?e.join(", "):"(no type)"}function se(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function ae(t){const e=t.toString();return e.includes(".")?e:e+".0"}function ue(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(ae).join(", ")})`}function le(t){const e=(0,Jt._2)(t),n=e.length>3?e[3]:1;return ue([e[0]/255*n,e[1]/255*n,e[2]/255*n,n])}const he={};let ce=0;function fe(t){return t in he||(he[t]=ce++),he[t]}function de(t){return ae(fe(t))}function ge(t,e,n){const r=void 0!==n?n:te.NUMBER;if(Array.isArray(e)&&"string"===typeof e[0]){const n=ne[e[0]];if(void 0===n)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return n.toGlsl(t,e.slice(1),r)}const i=re(e)&r;if(Ce(e,i,""),(i&te.NUMBER)>0)return ae(e);if((i&te.BOOLEAN)>0)return e.toString();if((i&te.STRING)>0)return de(e.toString());if((i&te.COLOR)>0)return le(e);if((i&te.NUMBER_ARRAY)>0)return ue(e);throw new Error(`Unexpected expression ${e} (expected type ${oe(r)})`)}function _e(t){if(0===(re(t)&te.NUMBER))throw new Error(`A numeric value was expected, got ${JSON.stringify(t)} instead`)}function pe(t){for(let e=0;e<t.length;e++)_e(t[e])}function me(t){if(0===(re(t)&te.STRING))throw new Error(`A string value was expected, got ${JSON.stringify(t)} instead`)}function Ee(t){if(0===(re(t)&te.BOOLEAN))throw new Error(`A boolean value was expected, got ${JSON.stringify(t)} instead`)}function Te(t,e){if(t.length!==e)throw new Error(`Exactly ${e} arguments were expected, got ${t.length} instead`)}function Re(t,e){if(t.length<e)throw new Error(`At least ${e} arguments were expected, got ${t.length} instead`)}function ve(t,e){if(t.length>e)throw new Error(`At most ${e} arguments were expected, got ${t.length} instead`)}function xe(t){if(t.length%2!==0)throw new Error(`An even amount of arguments was expected, got ${JSON.stringify(t)} instead`)}function ye(t){if(t.length%2===0)throw new Error(`An odd amount of arguments was expected, got ${JSON.stringify(t)} instead`)}function Ce(t,e,n){if(e===te.NONE)throw new Error(`No matching type was found for the following expression ${n}: ${JSON.stringify(t)}`)}function Se(t,e,n){if(Ce(t,e,n),!ie(e))throw new Error(`Expected to have a unique type for the following expression ${n}: ${JSON.stringify(t)}\nGot the following types instead: ${oe(e)}`)}function Ie(t,e,n,r){if((e&n)===te.NONE)throw new Error(`Expected the ${r} type of the following expression: ${JSON.stringify(t)} to be of the following types: ${oe(n)}\nGot these types instead: ${oe(e)}`)}function Oe(t){return"u_var_"+t}ne["get"]={getReturnType:function(t){if(2===t.length){const e=t[1];return ee(e)}return te.ANY},toGlsl:function(t,e,n){Re(e,1),ve(e,2),me(e[0]);const r=n&ne["get"].getReturnType(e);Se(["get",...e],r,"");const i=e[0].toString(),o=t.attributes.find((t=>t.name===i));if(o){if(r!==o.type)throw new Error(`The following attribute was used in different places with incompatible types: ${i}\nTypes were: ${oe(o.type)} and ${oe(r)}`)}else t.attributes.push({name:i,type:r});const s=t.inFragmentShader?"v_":"a_";return s+i}},ne["var"]={getReturnType:function(){return te.ANY},toGlsl:function(t,e,n){Te(e,1),me(e[0]);const r=e[0].toString();if(!t.style.variables||void 0===t.style.variables[r])throw new Error(`The following variable is missing from the style: ${r}`);const i=t.style.variables[r],o=n&re(i);Se(["var",...e],o,"");const s=t.variables.find((t=>t.name===r));if(s){if(o!==s.type)throw new Error(`The following variable was used in different places with incompatible types: ${r}\nTypes were: ${oe(s.type)} and ${oe(o)}`)}else t.variables.push({name:r,type:o});return Oe(r)}};const Ae="u_paletteTextures";ne["palette"]={getReturnType:function(){return te.COLOR},toGlsl:function(t,e){Te(e,2),_e(e[0]);const n=ge(t,e[0]),r=e[1];if(!Array.isArray(r))throw new Error("The second argument of palette must be an array");const i=r.length,o=new Uint8Array(4*i);for(let u=0;u<i;u++){const t=r[u];let e;if("string"===typeof t)e=(0,Jt.mL)(t);else{if(!Array.isArray(t))throw new Error("The second argument of palette must be an array of strings or colors");const n=t.length;if(4===n)e=t;else{if(3!==n)throw new Error(`Expected palette color to have 3 or 4 values, got ${n}`);e=[t[0],t[1],t[2],1]}}const n=4*u;o[n]=e[0],o[n+1]=e[1],o[n+2]=e[2],o[n+3]=255*e[3]}t.paletteTextures||(t.paletteTextures=[]);const s=`${Ae}[${t.paletteTextures.length}]`,a=new Qt(s,o);return t.paletteTextures.push(a),`texture2D(${s}, vec2((${n} + 0.5) / ${i}.0, 0.5))`}};const Me="getBandValue";function we(t){return{getReturnType:function(){return te.BOOLEAN},toGlsl:function(e,n){Te(n,2);let r=te.ANY;for(let t=0;t<n.length;t++)r&=re(n[t]);if(r===te.NONE)throw new Error(`All arguments should be of compatible type, got ${JSON.stringify(n)} instead`);return r&=~te.COLOR,`(${ge(e,n[0],r)} ${t} ${ge(e,n[1],r)})`}}}function Ne(t){return{getReturnType:function(){return te.BOOLEAN},toGlsl:function(e,n){Re(n,2);for(let t=0;t<n.length;t++)Ee(n[t]);let r=n.map((t=>ge(e,t,te.BOOLEAN))).join(` ${t} `);return r=`(${r})`,r}}}function Pe(t,e){const n=`\n    attribute vec2 ${Ht.TEXTURE_COORD};\n    uniform mat4 ${Wt.TILE_TRANSFORM};\n    uniform float ${Wt.TEXTURE_PIXEL_WIDTH};\n    uniform float ${Wt.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${Wt.TEXTURE_RESOLUTION};\n    uniform float ${Wt.TEXTURE_ORIGIN_X};\n    uniform float ${Wt.TEXTURE_ORIGIN_Y};\n    uniform float ${Wt.DEPTH};\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ${Ht.TEXTURE_COORD};\n      v_mapCoord = vec2(\n        ${Wt.TEXTURE_ORIGIN_X} + ${Wt.TEXTURE_RESOLUTION} * ${Wt.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],\n        ${Wt.TEXTURE_ORIGIN_Y} - ${Wt.TEXTURE_RESOLUTION} * ${Wt.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]\n      );\n      gl_Position = ${Wt.TILE_TRANSFORM} * vec4(${Ht.TEXTURE_COORD}, ${Wt.DEPTH}, 1.0);\n    }\n  `,r={inFragmentShader:!0,variables:[],attributes:[],functions:{},bandCount:e,style:t},i=[];if(void 0!==t.color){const e=ge(r,t.color,te.COLOR);i.push(`color = ${e};`)}if(void 0!==t.contrast){const e=ge(r,t.contrast,te.NUMBER);i.push(`color.rgb = clamp((${e} + 1.0) * color.rgb - (${e} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.exposure){const e=ge(r,t.exposure,te.NUMBER);i.push(`color.rgb = clamp((${e} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.saturation){const e=ge(r,t.saturation,te.NUMBER);i.push(`\n      float saturation = ${e} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==t.gamma){const e=ge(r,t.gamma,te.NUMBER);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${e}));`)}if(void 0!==t.brightness){const e=ge(r,t.brightness,te.NUMBER);i.push(`color.rgb = clamp(color.rgb + ${e}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const o={},s=r.variables.length;if(s>1&&!t.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let c=0;c<s;++c){const e=r.variables[c];if(!(e.name in t.variables))throw new Error(`Missing '${e.name}' in style variables`);const n=Oe(e.name);o[n]=function(){let n=t.variables[e.name];return"string"===typeof n&&(n=fe(n)),void 0!==n?n:-9999999}}const a=Object.keys(o).map((function(t){return`uniform float ${t};`})),u=Math.ceil(e/4);a.push(`uniform sampler2D ${Wt.TILE_TEXTURE_ARRAY}[${u}];`),r.paletteTextures&&a.push(`uniform sampler2D ${Ae}[${r.paletteTextures.length}];`);const l=Object.keys(r.functions).map((function(t){return r.functions[t]})),h=`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ${Wt.RENDER_EXTENT};\n    uniform float ${Wt.TRANSITION_ALPHA};\n    uniform float ${Wt.TEXTURE_PIXEL_WIDTH};\n    uniform float ${Wt.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${Wt.RESOLUTION};\n    uniform float ${Wt.ZOOM};\n\n    ${a.join("\n")}\n\n    ${l.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < ${Wt.RENDER_EXTENT}[0] ||\n        v_mapCoord[1] < ${Wt.RENDER_EXTENT}[1] ||\n        v_mapCoord[0] > ${Wt.RENDER_EXTENT}[2] ||\n        v_mapCoord[1] > ${Wt.RENDER_EXTENT}[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(${Wt.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);\n\n      ${i.join("\n")}\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ${Wt.TRANSITION_ALPHA};\n    }`;return{vertexShader:n,fragmentShader:h,uniforms:o,paletteTextures:r.paletteTextures}}ne["band"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){Re(e,1),ve(e,3);const n=e[0];if(!(Me in t.functions)){let e="";const n=t.bandCount||1;for(let t=0;t<n;t++){const r=Math.floor(t/4);let i=t%4;t===n-1&&1===i&&(i=3);const o=`${Wt.TILE_TEXTURE_ARRAY}[${r}]`;e+=`\n          if (band == ${t+1}.0) {\n            return texture2D(${o}, v_textureCoord + vec2(dx, dy))[${i}];\n          }\n        `}t.functions[Me]=`\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ${Wt.TEXTURE_PIXEL_WIDTH};\n          float dy = yOffset / ${Wt.TEXTURE_PIXEL_HEIGHT};\n          ${e}\n        }\n      `}const r=ge(t,n),i=ge(t,e[1]||0),o=ge(t,e[2]||0);return`${Me}(${r}, ${i}, ${o})`}},ne["time"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,0),"u_time"}},ne["zoom"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,0),"u_zoom"}},ne["resolution"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,0),"u_resolution"}},ne["geometry-type"]={getReturnType:function(){return te.STRING},toGlsl:function(t,e){Te(e,0);const n="geometryType",r=t=>{const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return r(t.getGeometries()[0]);default:}},i=t.attributes.find((t=>t.name===n));i||t.attributes.push({name:n,type:te.STRING,callback:t=>r(t.getGeometry())});const o=t.inFragmentShader?"v_":"a_";return o+n}},ne["*"]={getReturnType:function(t){let e=te.NUMBER|te.COLOR;for(let n=0;n<t.length;n++)e&=re(t[n]);return e},toGlsl:function(t,e,n){Re(e,2);let r=n;for(let i=0;i<e.length;i++)r&=re(e[i]);return Ie(e,r,te.NUMBER|te.COLOR,"output"),`(${e.map((e=>ge(t,e,r))).join(" * ")})`}},ne["/"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,2),pe(e),`(${ge(t,e[0])} / ${ge(t,e[1])})`}},ne["+"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Re(e,2),pe(e),`(${e.map((e=>ge(t,e))).join(" + ")})`}},ne["-"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,2),pe(e),`(${ge(t,e[0])} - ${ge(t,e[1])})`}},ne["clamp"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){Te(e,3),pe(e);const n=ge(t,e[1]),r=ge(t,e[2]);return`clamp(${ge(t,e[0])}, ${n}, ${r})`}},ne["%"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,2),pe(e),`mod(${ge(t,e[0])}, ${ge(t,e[1])})`}},ne["^"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,2),pe(e),`pow(${ge(t,e[0])}, ${ge(t,e[1])})`}},ne["abs"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,1),pe(e),`abs(${ge(t,e[0])})`}},ne["floor"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,1),pe(e),`floor(${ge(t,e[0])})`}},ne["round"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,1),pe(e),`floor(${ge(t,e[0])} + 0.5)`}},ne["ceil"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,1),pe(e),`ceil(${ge(t,e[0])})`}},ne["sin"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,1),pe(e),`sin(${ge(t,e[0])})`}},ne["cos"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,1),pe(e),`cos(${ge(t,e[0])})`}},ne["atan"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Re(e,1),ve(e,2),pe(e),2===e.length?`atan(${ge(t,e[0])}, ${ge(t,e[1])})`:`atan(${ge(t,e[0])})`}},ne["sqrt"]={getReturnType:function(){return te.NUMBER},toGlsl:function(t,e){return Te(e,1),pe(e),`sqrt(${ge(t,e[0])})`}},ne[">"]={getReturnType:function(){return te.BOOLEAN},toGlsl:function(t,e){return Te(e,2),pe(e),`(${ge(t,e[0])} > ${ge(t,e[1])})`}},ne[">="]={getReturnType:function(){return te.BOOLEAN},toGlsl:function(t,e){return Te(e,2),pe(e),`(${ge(t,e[0])} >= ${ge(t,e[1])})`}},ne["<"]={getReturnType:function(){return te.BOOLEAN},toGlsl:function(t,e){return Te(e,2),pe(e),`(${ge(t,e[0])} < ${ge(t,e[1])})`}},ne["<="]={getReturnType:function(){return te.BOOLEAN},toGlsl:function(t,e){return Te(e,2),pe(e),`(${ge(t,e[0])} <= ${ge(t,e[1])})`}},ne["=="]=we("=="),ne["!="]=we("!="),ne["!"]={getReturnType:function(){return te.BOOLEAN},toGlsl:function(t,e){return Te(e,1),Ee(e[0]),`(!${ge(t,e[0],te.BOOLEAN)})`}},ne["all"]=Ne("&&"),ne["any"]=Ne("||"),ne["between"]={getReturnType:function(){return te.BOOLEAN},toGlsl:function(t,e){Te(e,3),pe(e);const n=ge(t,e[1]),r=ge(t,e[2]),i=ge(t,e[0]);return`(${i} >= ${n} && ${i} <= ${r})`}},ne["array"]={getReturnType:function(){return te.NUMBER_ARRAY},toGlsl:function(t,e){Re(e,2),ve(e,4),pe(e);const n=e.map((function(e){return ge(t,e)}));return`vec${e.length}(${n.join(", ")})`}},ne["color"]={getReturnType:function(){return te.COLOR},toGlsl:function(t,e){Re(e,3),ve(e,4),pe(e);const n=e.slice(0,3).map((e=>`${ge(t,e)} / 255.0`));if(3===e.length)return`vec4(${n.join(", ")}, 1.0)`;const r=ge(t,e[3]);return`(${r} * vec4(${n.join(", ")}, 1.0))`}},ne["interpolate"]={getReturnType:function(t){let e=te.COLOR|te.NUMBER;for(let n=3;n<t.length;n+=2)e&=re(t[n]);return e},toGlsl:function(t,e,n){xe(e),Re(e,6);const r=e[0];let i;switch(r[0]){case"linear":i=1;break;case"exponential":i=r[1];break;default:i=null}if(!i)throw new Error(`Invalid interpolation type for "interpolate" operator, received: ${JSON.stringify(r)}`);const o=te.NUMBER,s=ne["interpolate"].getReturnType(e)&n;Se(["interpolate",...e],s,"output");const a=ge(t,e[1],o),u=ae(i);let l="";for(let h=2;h<e.length-2;h+=2){const n=ge(t,e[h],o),r=l||ge(t,e[h+1],s),c=ge(t,e[h+2],o),f=ge(t,e[h+3],s);let d;d=1===i?`(${a} - ${n}) / (${c} - ${n})`:`(pow(${u}, (${a} - ${n})) - 1.0) / (pow(${u}, (${c} - ${n})) - 1.0)`,l=`mix(${r}, ${f}, clamp(${d}, 0.0, 1.0))`}return l}},ne["match"]={getReturnType:function(t){let e=te.ANY;for(let n=2;n<t.length;n+=2)e&=re(t[n]);return e&=re(t[t.length-1]),e},toGlsl:function(t,e,n){xe(e),Re(e,4);let r=re(e[0]);for(let u=1;u<e.length-1;u+=2)r&=re(e[u]);Ie(["match",...e],r,te.STRING|te.NUMBER|te.BOOLEAN,"input"),r=(te.STRING|te.NUMBER|te.BOOLEAN)&r;const i=ne["match"].getReturnType(e)&n;Se(["match",...e],i,"output");const o=ge(t,e[0],r),s=ge(t,e[e.length-1],i);let a=null;for(let u=e.length-3;u>=1;u-=2){const n=ge(t,e[u],r),l=ge(t,e[u+1],i);a=`(${o} == ${n} ? ${l} : ${a||s})`}return a}},ne["case"]={getReturnType:function(t){let e=te.ANY;for(let n=1;n<t.length;n+=2)e&=re(t[n]);return e&=re(t[t.length-1]),e},toGlsl:function(t,e,n){ye(e),Re(e,3);const r=ne["case"].getReturnType(e)&n;Se(["case",...e],r,"output");for(let s=0;s<e.length-1;s+=2)Ee(e[s]);const i=ge(t,e[e.length-1],r);let o=null;for(let s=e.length-3;s>=0;s-=2){const n=ge(t,e[s],te.BOOLEAN),a=ge(t,e[s+1],r);o=`(${n} ? ${a} : ${o||i})`}return o}},ne["in"]={getReturnType:function(t){return te.BOOLEAN},toGlsl:function(t,e){Te(e,2);const n=e[0];let r=e[1];if(!Array.isArray(r))throw new Error('The "in" operator expects an array literal as its second argument.');if("string"===typeof r[0]){if("literal"!==r[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(r[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');r=r[1]}let i=re(n);for(let a=0;a<r.length-1;a+=1)i&=re(r[a]);Ie(["match",...e],i,te.STRING|te.NUMBER|te.BOOLEAN,"input"),i=(te.STRING|te.NUMBER|te.BOOLEAN)&i;const o=se("in",t),s=[];for(let a=0;a<r.length;a+=1)s.push(`  if (inputValue == ${ge(t,r[a],i)}) { return true; }`);return t.functions[o]=`bool ${o}(float inputValue) {\n${s.join("\n")}\n  return false;\n}`,`${o}(${ge(t,n,i)})`}};class be extends s{constructor(t){t=t?Object.assign({},t):{};const e=t.style||{};delete t.style;const n=t.cacheSize;delete t.cacheSize,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.cacheSize_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(a.Z.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const n=this.getSource();return this.sources_?"function"===typeof this.sources_?this.sources_(t,e):this.sources_:n?[n]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t);return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=Pe(this.style_,this.getSourceBandCount_());return new Kt(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})}renderSources(t,e){const n=this.getRenderer();let r;for(let i=0,o=e.length;i<o;++i)this.renderedSource_=e[i],n.prepareFrame(t)&&(r=n.renderFrame(t));return r}render(t,e){this.rendered=!0;const n=t.viewState,r=this.getSources(t.extent,n.resolution);let i=!0;for(let s=0,a=r.length;s<a;++s){const t=r[s],e=t.getState();if("loading"==e){const e=()=>{"ready"==t.getState()&&(t.removeEventListener("change",e),this.changed())};t.addEventListener("change",e)}i=i&&"ready"==e}const o=this.renderSources(t,r);if(this.getRenderer().renderComplete&&i)return this.renderedResolution_=n.resolution,o;if(this.renderedResolution_>.5*n.resolution){const e=this.getSources(t.extent,this.renderedResolution_).filter((t=>!r.includes(t)));if(e.length>0)return this.renderSources(t,e)}return o}setStyle(t){this.styleVariables_=t.variables||{},this.style_=t;const e=Pe(this.style_,this.getSourceBandCount_()),n=this.getRenderer();n.reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}),this.changed()}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}be.prototype.dispose;var Le=be},5756:function(t,e,n){function r(t,e,n){return Math.min(Math.max(t,e),n)}function i(t,e,n,r,i,s){const a=i-n,u=s-r;if(0!==a||0!==u){const o=((t-n)*a+(e-r)*u)/(a*a+u*u);o>1?(n=i,r=s):o>0&&(n+=a*o,r+=u*o)}return o(t,e,n,r)}function o(t,e,n,r){const i=n-t,o=r-e;return i*i+o*o}function s(t){const e=t.length;for(let r=0;r<e;r++){let n=r,i=Math.abs(t[r][r]);for(let s=r+1;s<e;s++){const e=Math.abs(t[s][r]);e>i&&(i=e,n=s)}if(0===i)return null;const o=t[n];t[n]=t[r],t[r]=o;for(let s=r+1;s<e;s++){const n=-t[s][r]/t[r][r];for(let i=r;i<e+1;i++)r==i?t[s][i]=0:t[s][i]+=n*t[r][i]}}const n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function a(t){return t*Math.PI/180}function u(t,e){const n=t%e;return n*e<0?n+e:n}function l(t,e,n){return t+n*(e-t)}function h(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function c(t,e){return Math.floor(h(t,e))}function f(t,e){return Math.ceil(h(t,e))}n.d(e,{$W:function(){return u},FH:function(){return h},GW:function(){return c},SV:function(){return s},Yr:function(){return a},bI:function(){return o},mD:function(){return f},rU:function(){return i},t7:function(){return l},uZ:function(){return r}})},8831:function(t,e,n){function r(t){for(const e in t)delete t[e]}function i(t){let e;for(e in t)return!1;return!e}n.d(e,{Z:function(){return r},x:function(){return i}})},9962:function(t,e,n){n.d(e,{Wm:function(){return r},UQ:function(){return $},h_:function(){return b},OP:function(){return Y},Vs:function(){return q},dY:function(){return J},U2:function(){return G},_Q:function(){return F},Ck:function(){return z},WO:function(){return j},Cs:function(){return k},lO:function(){return K},Fj:function(){return Q},on:function(){return tt},vs:function(){return W}});const r={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class i{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||r[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var o=i;const s=6378137,a=Math.PI*s,u=[-a,-a,a,a],l=[-180,-85,180,85],h=s*Math.log(Math.tan(Math.PI/2));class c extends o{constructor(t){super({code:t,units:"m",extent:u,global:!0,worldExtent:l,getPointResolution:function(t,e){return t/Math.cosh(e[1]/s)}})}}const f=[new c("EPSG:3857"),new c("EPSG:102100"),new c("EPSG:102113"),new c("EPSG:900913"),new c("http://www.opengis.net/def/crs/EPSG/0/3857"),new c("http://www.opengis.net/gml/srs/epsg.xml#3857")];function d(t,e,n){const r=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(r));for(let i=0;i<r;i+=n){e[i]=a*t[i]/180;let n=s*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));n>h?n=h:n<-h&&(n=-h),e[i+1]=n}return e}function g(t,e,n){const r=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(r));for(let i=0;i<r;i+=n)e[i]=180*t[i]/a,e[i+1]=360*Math.atan(Math.exp(t[i+1]/s))/Math.PI-90;return e}const _=6378137,p=[-180,-90,180,90],m=Math.PI*_/180;class E extends o{constructor(t,e){super({code:t,units:"degrees",extent:p,axisOrientation:e,global:!0,metersPerUnit:m,worldExtent:p})}}const T=[new E("CRS:84"),new E("EPSG:4326","neu"),new E("urn:ogc:def:crs:OGC:1.3:CRS84"),new E("urn:ogc:def:crs:OGC:2:84"),new E("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new E("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new E("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let R={};function v(t){return R[t]||R[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function x(t,e){R[t]=e}let y={};function C(t,e,n){const r=t.getCode(),i=e.getCode();r in y||(y[r]={}),y[r][i]=n}function S(t,e){let n;return t in y&&e in y[t]&&(n=y[t][e]),n}var I=n(944),O=n(7736),A=n(5756);const M=6371008.8;function w(t,e,n){n=n||M;const r=(0,A.Yr)(t[1]),i=(0,A.Yr)(e[1]),o=(i-r)/2,s=(0,A.Yr)(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var N=n(7405);let P=!0;function b(t){const e=void 0===t||t;P=!e}function L(t,e){if(void 0!==e)for(let n=0,r=t.length;n<r;++n)e[n]=t[n];else e=t.slice();return e}function Z(t,e){if(void 0!==e&&t!==e){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];t=e}return t}function U(t){x(t.getCode(),t),C(t,t,L)}function D(t){t.forEach(U)}function G(t){return"string"===typeof t?v(t):t||null}function F(t,e,n,i){let o;t=G(t);const s=t.getPointResolutionFunc();if(s){if(o=s(e,n),i&&i!==t.getUnits()){const e=t.getMetersPerUnit();e&&(o=o*e/r[i])}}else{const s=t.getUnits();if("degrees"==s&&!i||"degrees"==i)o=e;else{const a=j(t,G("EPSG:4326"));if(a===Z&&"degrees"!==s)o=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=a(t,t,2);const r=w(t.slice(0,2),t.slice(2,4)),i=w(t.slice(4,6),t.slice(6,8));o=(r+i)/2}const u=i?r[i]:t.getMetersPerUnit();void 0!==u&&(o/=u)}}return o}function X(t){D(t),t.forEach((function(e){t.forEach((function(t){e!==t&&C(e,t,L)}))}))}function B(t,e,n,r){t.forEach((function(t){e.forEach((function(e){C(t,e,n),C(e,t,r)}))}))}function $(t,e){return t?"string"===typeof t?G(t):t:G(e)}function Y(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;const r=j(t,e);return r===L&&n}function j(t,e){const n=t.getCode(),r=e.getCode();let i=S(n,r);return i||(i=Z),i}function z(t,e){const n=G(t),r=G(e);return j(n,r)}function W(t,e,n){const r=z(e,n);return r(t,void 0,t.length)}function H(t,e,n,r){const i=z(e,n);return(0,I.Ne)(t,i,void 0,r)}let V=null;function k(){return V}function K(t,e){return V?W(t,e,V):t}function q(t,e){return V?W(t,V,e):(P&&!(0,O.fS)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(P=!1,(0,N.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Q(t,e){return V?H(t,e,V):t}function J(t,e){return V?H(t,V,e):t}function tt(t,e){if(!V)return t;const n=G(e).getUnits(),i=V.getUnits();return n&&i?t*r[n]/r[i]:t}function et(){X(f),X(T),B(T,f,d,g)}et()},2254:function(t,e,n){var r=n(5375);class i extends r.ZP{constructor(t,e,n,r){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=r}}e.Z=i},8894:function(t,e){e.Z={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},6626:function(t,e,n){var r=n(7621),i=n(9953),o=n(9391),s=n(1904);class a extends o.Z{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,s.O3)()}getData(t){return null}prepareFrame(t){return(0,s.O3)()}renderFrame(t,e){return(0,s.O3)()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(r,i)=>{const o=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,i,o)}}forEachFeatureAtCoordinate(t,e,n,r,i){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()!==i.Z.LOADED&&e.getState()!==i.Z.ERROR||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=i.Z.LOADED&&e!=i.Z.ERROR&&t.addEventListener(r.Z.CHANGE,this.boundHandleImageChange_),e==i.Z.IDLE&&(t.load(),e=t.getState()),e==i.Z.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}e.Z=a},6795:function(t,e,n){n.d(e,{Co:function(){return d},rX:function(){return u},sY:function(){return g}});n(7658);var r=n(944),i=n(1557),o=n(9962),s=n(5756);let a;const u=[];function l(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function h(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function c(){if(void 0===a){const t=(0,i.E4)(6,6,u);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",l(t,4,5,4,0),l(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;a=h(e,0)||h(e,4)||h(e,8),(0,i.jy)(t),u.push(t.canvas)}return a}function f(t,e,n,i){const s=(0,o.vs)(n,e,t);let a=(0,o._Q)(e,i,n);const u=e.getMetersPerUnit();void 0!==u&&(a*=u);const l=t.getMetersPerUnit();void 0!==l&&(a/=l);const h=t.getExtent();if(!h||(0,r.b8)(h,s)){const e=(0,o._Q)(t,a,s)/a;isFinite(e)&&e>0&&(a/=e)}return a}function d(t,e,n,i){const o=(0,r.qg)(n);let s=f(t,e,o,i);return(!isFinite(s)||s<=0)&&(0,r.H6)(n,(function(n){return s=f(t,e,n,i),isFinite(s)&&s>0})),s}function g(t,e,n,o,a,l,h,f,d,g,_,p){const m=(0,i.E4)(Math.round(n*t),Math.round(n*e),u);if(p||(m.imageSmoothingEnabled=!1),0===d.length)return m.canvas;function E(t){return Math.round(t*n)/n}m.scale(n,n),m.globalCompositeOperation="lighter";const T=(0,r.lJ)();d.forEach((function(t,e,n){(0,r.l7)(T,t.extent)}));const R=(0,r.dz)(T),v=(0,r.Cr)(T),x=(0,i.E4)(Math.round(n*R/o),Math.round(n*v/o),u);p||(x.imageSmoothingEnabled=!1);const y=n/o;d.forEach((function(t,e,n){const i=t.extent[0]-T[0],o=-(t.extent[3]-T[3]),s=(0,r.dz)(t.extent),a=(0,r.Cr)(t.extent);t.image.width>0&&t.image.height>0&&x.drawImage(t.image,g,g,t.image.width-2*g,t.image.height-2*g,i*y,o*y,s*y,a*y)}));const C=(0,r.rL)(h);return f.getTriangles().forEach((function(t,e,r){const i=t.source,a=t.target;let u=i[0][0],h=i[0][1],f=i[1][0],d=i[1][1],g=i[2][0],_=i[2][1];const R=E((a[0][0]-C[0])/l),v=E(-(a[0][1]-C[1])/l),y=E((a[1][0]-C[0])/l),S=E(-(a[1][1]-C[1])/l),I=E((a[2][0]-C[0])/l),O=E(-(a[2][1]-C[1])/l),A=u,M=h;u=0,h=0,f-=A,d-=M,g-=A,_-=M;const w=[[f,d,0,0,y-R],[g,_,0,0,I-R],[0,0,f,d,S-v],[0,0,g,_,O-v]],N=(0,s.SV)(w);if(N){if(m.save(),m.beginPath(),c()||!p){m.moveTo(y,S);const t=4,e=R-y,n=v-S;for(let r=0;r<t;r++)m.lineTo(y+E((r+1)*e/t),S+E(r*n/(t-1))),r!=t-1&&m.lineTo(y+E((r+1)*e/t),S+E((r+1)*n/(t-1)));m.lineTo(I,O)}else m.moveTo(y,S),m.lineTo(R,v),m.lineTo(I,O);m.clip(),m.transform(N[0],N[2],N[1],N[3],R,v),m.translate(T[0]-A,T[3]-M),m.scale(o/n,-o/n),m.drawImage(x.canvas,0,0),m.restore()}})),(0,i.jy)(x),u.push(x.canvas),_&&(m.save(),m.globalCompositeOperation="source-over",m.strokeStyle="black",m.lineWidth=1,f.getTriangles().forEach((function(t,e,n){const r=t.target,i=(r[0][0]-C[0])/l,o=-(r[0][1]-C[1])/l,s=(r[1][0]-C[0])/l,a=-(r[1][1]-C[1])/l,u=(r[2][0]-C[0])/l,h=-(r[2][1]-C[1])/l;m.beginPath(),m.moveTo(s,a),m.lineTo(i,o),m.lineTo(u,h),m.closePath(),m.stroke()})),m.restore()),m.canvas}},4665:function(t,e,n){n(7658);var r=n(5443),i=n(7621),o=n(4757),s=n(7145),a=n(9595),u=n(6795),l=n(5756),h=n(944),c=n(5423),f=n(1557);class d extends o.Z{constructor(t,e,n,i,o,c,f,d,g,_,p,m){super(o,s.Z.IDLE,{interpolate:!!m}),this.renderEdges_=void 0!==p&&p,this.pixelRatio_=f,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=c||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const E=i.getTileCoordExtent(this.wrappedTileCoord_),T=this.targetTileGrid_.getExtent();let R=this.sourceTileGrid_.getExtent();const v=T?(0,h.Ed)(E,T):E;if(0===(0,h.bg)(v))return void(this.state=s.Z.EMPTY);const x=t.getExtent();x&&(R=R?(0,h.Ed)(R,x):x);const y=i.getResolution(this.wrappedTileCoord_[0]),C=(0,u.Co)(t,n,v,y);if(!isFinite(C)||C<=0)return void(this.state=s.Z.EMPTY);const S=void 0!==_?_:r.m;if(this.triangulation_=new a.Z(t,n,v,R,C*S,y),0===this.triangulation_.getTriangles().length)return void(this.state=s.Z.EMPTY);this.sourceZ_=e.getZForResolution(C);let I=this.triangulation_.calculateSourceExtent();if(R&&(t.canWrapX()?(I[1]=(0,l.uZ)(I[1],R[1],R[3]),I[3]=(0,l.uZ)(I[3],R[1],R[3])):I=(0,h.Ed)(I,R)),(0,h.bg)(I)){const t=e.getTileRangeForExtentAndZ(I,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=g(this.sourceZ_,e,n,f);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=s.Z.EMPTY)}else this.state=s.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{e&&e.getState()==s.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=s.Z.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),r="number"===typeof n?n:n[0],i="number"===typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,u.sY)(r,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=s.Z.LOADED}this.changed()}load(){if(this.state==s.Z.IDLE){this.state=s.Z.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const n=e.getState();if(n==s.Z.IDLE||n==s.Z.LOADING){t++;const n=(0,c.oL)(e,i.Z.CHANGE,(function(r){const i=e.getState();i!=s.Z.LOADED&&i!=s.Z.ERROR&&i!=s.Z.EMPTY||((0,c.bN)(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){const r=t.getState();r==s.Z.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(c.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,f.jy)(this.canvas_.getContext("2d")),u.rX.push(this.canvas_),this.canvas_=null),super.release()}}e.Z=d},9595:function(t,e,n){n(7658);var r=n(944),i=n(9962),o=n(5756);const s=10,a=.25;class u{constructor(t,e,n,o,a,u){this.sourceProj_=t,this.targetProj_=e;let l={};const h=(0,i.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return l[e]||(l[e]=h(t)),l[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&(0,r.dz)(o)>=(0,r.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,r.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,r.dz)(this.targetProj_.getExtent()):null;const c=(0,r.rL)(n),f=(0,r.Xv)(n),d=(0,r.w$)(n),g=(0,r.hC)(n),_=this.transformInv_(c),p=this.transformInv_(f),m=this.transformInv_(d),E=this.transformInv_(g),T=s+(u?Math.max(0,Math.ceil(Math.log2((0,r.bg)(n)/(u*u*256*256)))):0);if(this.addQuad_(c,f,d,g,_,p,m,E,T),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,r){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const r=Math.min(n[0][0],n[1][0],n[2][0]),i=Math.max(n[0][0],n[1][0],n[2][0]);i-r<this.sourceWorldWidth_/2&&(e.source=n)}}))}l={}}addTriangle_(t,e,n,r,i,o){this.triangles_.push({source:[r,i,o],target:[t,e,n]})}addQuad_(t,e,n,i,s,u,l,h,c){const f=(0,r.hI)([s,u,l,h]),d=this.sourceWorldWidth_?(0,r.dz)(f)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,_=this.sourceProj_.canWrapX()&&d>.5&&d<1;let p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const o=(0,r.hI)([t,e,n,i]),s=(0,r.dz)(o)/this.targetWorldWidth_;p=s>a||p}!_&&this.sourceProj_.isGlobal()&&d&&(p=d>a||p)}if(!p&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!(0,r.kK)(f,this.maxSourceExtent_))return;let m=0;if(!p&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(h[0])||!isFinite(h[1])))if(c>0)p=!0;else if(m=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(u[0])&&isFinite(u[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1),1!=m&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!p){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],r=this.transformInv_(e);let i;if(_){const t=((0,o.$W)(s[0],g)+(0,o.$W)(l[0],g))/2;i=t-(0,o.$W)(r[0],g)}else i=(s[0]+l[0])/2-r[0];const a=(s[1]+l[1])/2-r[1],u=i*i+a*a;p=u>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const r=[(e[0]+n[0])/2,(e[1]+n[1])/2],o=this.transformInv_(r),a=[(i[0]+t[0])/2,(i[1]+t[1])/2],f=this.transformInv_(a);this.addQuad_(t,e,r,a,s,u,o,f,c-1),this.addQuad_(a,r,n,i,f,o,l,h,c-1)}else{const r=[(t[0]+e[0])/2,(t[1]+e[1])/2],o=this.transformInv_(r),a=[(n[0]+i[0])/2,(n[1]+i[1])/2],f=this.transformInv_(a);this.addQuad_(t,r,a,i,s,o,f,h,c-1),this.addQuad_(r,e,n,a,o,u,l,f,c-1)}return}}if(_){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(t,n,i,s,l,h),0==(14&m)&&this.addTriangle_(t,n,e,s,l,u),m&&(0==(13&m)&&this.addTriangle_(e,i,t,u,h,s),0==(7&m)&&this.addTriangle_(e,i,n,u,h,l))}calculateSourceExtent(){const t=(0,r.lJ)();return this.triangles_.forEach((function(e,n,i){const o=e.source;(0,r.Wj)(t,o[0]),(0,r.Wj)(t,o[1]),(0,r.Wj)(t,o[2])})),t}getTriangles(){return this.triangles_}}e.Z=u},5443:function(t,e,n){n.d(e,{m:function(){return r}});const r=.5},60:function(t,e,n){n.d(e,{Gw:function(){return a},YP:function(){return o},gE:function(){return s},h$:function(){return i}});var r=n(5756);function i(t){if(void 0!==t)return 0}function o(t){if(void 0!==t)return t}function s(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?(t=Math.floor(t/e+.5)*e,t):void 0}}function a(t){return t=t||(0,r.Yr)(5),function(e,n){return n?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},2093:function(t,e,n){function r(t){return t[0]>0&&t[1]>0}function i(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}n.d(e,{Pq:function(){return o},bA:function(){return i},py:function(){return r}})},1750:function(t,e,n){var r=n(2391);class i{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){while(this.canExpireCache())this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;while(e)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return(0,r.h)(void 0!==n,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return(0,r.h)(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,r.h)(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}e.Z=i},1832:function(t,e,n){function r(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function i(t,e,n){return t+"/"+e+"/"+n}function o(t){return i(t[0],t[1],t[2])}function s(t){return t.split("/").map(Number)}function a(t){return(t[1]<<t[0])+t[2]}function u(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const o=e.getFullTileRange(n);return!o||o.containsXY(r,i)}n.d(e,{T9:function(){return r},Ul:function(){return s},km:function(){return o},lg:function(){return i},tE:function(){return u},vp:function(){return a}})},7048:function(t,e,n){n.d(e,{S:function(){return i},e:function(){return r}});const r=42,i=256},9287:function(t,e,n){n.d(e,{BB:function(){return R},Iu:function(){return _},U1:function(){return f},Ue:function(){return s},bA:function(){return d},lk:function(){return h},mc:function(){return a},n3:function(){return g},nb:function(){return m},nn:function(){return c},qC:function(){return p}});var r=n(8001),i=n(2391);const o=new Array(6);function s(){return[1,0,0,1,0,0]}function a(t){return l(t,1,0,0,1,0,0)}function u(t,e){const n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],u=e[0],l=e[1],h=e[2],c=e[3],f=e[4],d=e[5];return t[0]=n*u+i*l,t[1]=r*u+o*l,t[2]=n*h+i*c,t[3]=r*h+o*c,t[4]=n*f+i*d+s,t[5]=r*f+o*d+a,t}function l(t,e,n,r,i,o,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=s,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function c(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function f(t,e){const n=Math.cos(e),r=Math.sin(e);return u(t,l(o,n,r,-r,n,0,0))}function d(t,e,n){return u(t,l(o,e,0,0,n,0,0))}function g(t,e,n){return l(t,e,0,0,n,0,0)}function _(t,e,n){return u(t,l(o,1,0,0,1,e,n))}function p(t,e,n,r,i,o,s,a){const u=Math.sin(o),l=Math.cos(o);return t[0]=r*l,t[1]=i*u,t[2]=-r*u,t[3]=i*l,t[4]=s*r*l-a*r*u+e,t[5]=s*i*u+a*i*l+n,t}function m(t,e){const n=E(e);(0,i.h)(0!==n,"Transformation matrix cannot be inverted");const r=e[0],o=e[1],s=e[2],a=e[3],u=e[4],l=e[5];return t[0]=a/n,t[1]=-o/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*l-a*u)/n,t[5]=-(r*l-o*u)/n,t}function E(t){return t[0]*t[3]-t[1]*t[2]}let T;function R(t){const e="matrix("+t.join(", ")+")";if(r.Id)return e;const n=T||(T=document.createElement("div"));return n.style.transform=e,n.style.transform}},1904:function(t,e,n){function r(){throw new Error("Unimplemented abstract method.")}n.d(e,{O3:function(){return r},sq:function(){return o}});let i=0;function o(t){return t.ol_uid||(t.ol_uid=String(++i))}}}]);
//# sourceMappingURL=260.64adada8.js.map