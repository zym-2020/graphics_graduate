(self["webpackChunkgraduate"]=self["webpackChunkgraduate"]||[]).push([[666],{65325:function(t,e,i){i(57658),function(e,i){t.exports=i()}(0,(function(){"use strict";function t(t,s,n,r,o){!function t(i,s,n,r,o){for(;r>n;){if(r-n>600){var a=r-n+1,h=s-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(h-a/2<0?-1:1),d=Math.max(n,Math.floor(s-h*c/a+u)),g=Math.min(r,Math.floor(s+(a-h)*c/a+u));t(i,s,d,g,o)}var f=i[s],_=n,m=r;for(e(i,n,s),o(i[r],f)>0&&e(i,n,r);_<m;){for(e(i,_,m),_++,m--;o(i[_],f)<0;)_++;for(;o(i[m],f)>0;)m--}0===o(i[n],f)?e(i,n,m):e(i,++m,r),m<=s&&(n=m+1),s<=m&&(r=m-1)}}(t,s,n||0,r||t.length-1,o||i)}function e(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function i(t,e){return t<e?-1:t>e?1:0}var s=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function n(t,e,i){if(!i)return e.indexOf(t);for(var s=0;s<e.length;s++)if(i(t,e[s]))return s;return-1}function r(t,e){o(t,0,t.children.length,e,t)}function o(t,e,i,s,n){n||(n=f(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var r=e;r<i;r++){var o=t.children[r];a(n,t.leaf?s(o):o)}return n}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function h(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function g(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(e,i,s,n,r){for(var o=[i,s];o.length;)if(!((s=o.pop())-(i=o.pop())<=n)){var a=i+Math.ceil((s-i)/n/2)*n;t(e,a,i,s,r),o.push(i,a,a,s)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(t){var e=this.data,i=[];if(!g(t,e))return i;for(var s=this.toBBox,n=[];e;){for(var r=0;r<e.children.length;r++){var o=e.children[r],a=e.leaf?s(o):o;g(t,a)&&(e.leaf?i.push(o):d(t,a)?this._all(o,i):n.push(o))}e=n.pop()}return i},s.prototype.collides=function(t){var e=this.data;if(!g(t,e))return!1;for(var i=[];e;){for(var s=0;s<e.children.length;s++){var n=e.children[s],r=e.leaf?this.toBBox(n):n;if(g(t,r)){if(e.leaf||d(t,r))return!0;i.push(n)}}e=i.pop()}return!1},s.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},s.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},s.prototype.clear=function(){return this.data=f([]),this},s.prototype.remove=function(t,e){if(!t)return this;for(var i,s,r,o=this.data,a=this.toBBox(t),h=[],l=[];o||h.length;){if(o||(o=h.pop(),s=h[h.length-1],i=l.pop(),r=!0),o.leaf){var c=n(t,o.children,e);if(-1!==c)return o.children.splice(c,1),h.push(o),this._condense(h),this}r||o.leaf||!d(o,a)?s?(i++,o=s.children[i],r=!1):o=null:(h.push(o),l.push(i),i=0,s=o,o=o.children[0])}return this},s.prototype.toBBox=function(t){return t},s.prototype.compareMinX=function(t,e){return t.minX-e.minX},s.prototype.compareMinY=function(t,e){return t.minY-e.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(t){return this.data=t,this},s.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},s.prototype._build=function(t,e,i,s){var n,o=i-e+1,a=this._maxEntries;if(o<=a)return r(n=f(t.slice(e,i+1)),this.toBBox),n;s||(s=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,s-1))),(n=f([])).leaf=!1,n.height=s;var h=Math.ceil(o/a),l=h*Math.ceil(Math.sqrt(a));_(t,e,i,l,this.compareMinX);for(var c=e;c<=i;c+=l){var u=Math.min(c+l-1,i);_(t,c,u,h,this.compareMinY);for(var d=c;d<=u;d+=h){var g=Math.min(d+h-1,u);n.children.push(this._build(t,d,g,s-1))}}return r(n,this.toBBox),n},s.prototype._chooseSubtree=function(t,e,i,s){for(;s.push(e),!e.leaf&&s.length-1!==i;){for(var n=1/0,r=1/0,o=void 0,a=0;a<e.children.length;a++){var h=e.children[a],l=c(h),u=(d=t,g=h,(Math.max(g.maxX,d.maxX)-Math.min(g.minX,d.minX))*(Math.max(g.maxY,d.maxY)-Math.min(g.minY,d.minY))-l);u<r?(r=u,n=l<n?l:n,o=h):u===r&&l<n&&(n=l,o=h)}e=o||e.children[0]}var d,g;return e},s.prototype._insert=function(t,e,i){var s=i?t:this.toBBox(t),n=[],r=this._chooseSubtree(s,this.data,e,n);for(r.children.push(t),a(r,s);e>=0&&n[e].children.length>this._maxEntries;)this._split(n,e),e--;this._adjustParentBBoxes(s,n,e)},s.prototype._split=function(t,e){var i=t[e],s=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,s);var o=this._chooseSplitIndex(i,n,s),a=f(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,r(i,this.toBBox),r(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},s.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(t,e,i){for(var s,n,r,a,h,l,u,d=1/0,g=1/0,f=e;f<=i-e;f++){var _=o(t,0,f,this.toBBox),m=o(t,f,i,this.toBBox),p=(n=_,r=m,a=void 0,h=void 0,l=void 0,u=void 0,a=Math.max(n.minX,r.minX),h=Math.max(n.minY,r.minY),l=Math.min(n.maxX,r.maxX),u=Math.min(n.maxY,r.maxY),Math.max(0,l-a)*Math.max(0,u-h)),x=c(_)+c(m);p<d?(d=p,s=f,g=x<g?x:g):p===d&&x<g&&(g=x,s=f)}return s||i-e},s.prototype._chooseSplitAxis=function(t,e,i){var s=t.leaf?this.compareMinX:h,n=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,i,s)<this._allDistMargin(t,e,i,n)&&t.children.sort(s)},s.prototype._allDistMargin=function(t,e,i,s){t.children.sort(s);for(var n=this.toBBox,r=o(t,0,e,n),h=o(t,i-e,i,n),l=u(r)+u(h),c=e;c<i-e;c++){var d=t.children[c];a(r,t.leaf?n(d):d),l+=u(r)}for(var g=i-e-1;g>=e;g--){var f=t.children[g];a(h,t.leaf?n(f):f),l+=u(h)}return l},s.prototype._adjustParentBBoxes=function(t,e,i){for(var s=i;s>=0;s--)a(e[s],t)},s.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():r(t[e],this.toBBox)},s}))},74666:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return xn}});var s=i(73396);const n={ref:"container",class:"container"};function r(t,e,i,r,o,a){return(0,s.wg)(),(0,s.iD)("div",n,null,512)}var o=i(44870),a=i(14327),h=i(81931),l=i(17793),c=i(99260),u=i(94150),d=i(65325),g=i(89953),f=i(91904),_=i(42093);class m{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,_.Pq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new m({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,f.O3)()}getImage(t){return(0,f.O3)()}getHitDetectionImage(){return(0,f.O3)()}getPixelRatio(t){return 1}getImageState(){return(0,f.O3)()}getImageSize(){return(0,f.O3)()}getOrigin(){return(0,f.O3)()}getSize(){return(0,f.O3)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,_.Pq)(t)}listenImageChange(t){(0,f.O3)()}load(){(0,f.O3)()}unlistenImageChange(t){(0,f.O3)()}}var p=m,x=i(20966);function y(t){return Array.isArray(t)?(0,x.BB)(t):t}var S=i(51557),v=i(20798);class E extends p{constructor(t){const e=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:1,rotateWithView:e,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new E({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,s=(0,S.E4)(i.size*t,i.size*t);this.draw_(i,s,t),e=s.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return g.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let s=this.radius_,n=void 0===this.radius2_?s:this.radius2_;if(s<n){const t=s;s=n,n=t}const r=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/r,a=n*Math.sin(o),h=Math.sqrt(n*n-a*a),l=s-h,c=Math.sqrt(a*a+l*l),u=c/a;if("miter"===t&&u<=i)return u*e;const d=e/2/u,g=e/2*(l/c),f=Math.sqrt((s+d)*(s+d)+g*g),_=f-s;if(void 0===this.radius2_||"bevel"===t)return 2*_;const m=s*Math.sin(o),p=Math.sqrt(s*s-m*m),x=n-p,y=Math.sqrt(m*m+x*x),S=y/m;if(S<=i){const t=S*e/2-n-s;return 2*Math.max(_,t)}return 2*_}createRenderOptions(){let t,e=v.mb,i=v.rc,s=0,n=null,r=0,o=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=v.Tx),t=y(t),o=this.stroke_.getWidth(),void 0===o&&(o=v.yC),n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),i=this.stroke_.getLineJoin(),void 0===i&&(i=v.rc),e=this.stroke_.getLineCap(),void 0===e&&(e=v.mb),s=this.stroke_.getMiterLimit(),void 0===s&&(s=v.V4));const a=this.calculateLineJoinSize_(i,o,s),h=Math.max(this.radius_,this.radius2_||0),l=Math.ceil(2*h+a);return{strokeStyle:t,strokeWidth:o,size:l,lineCap:e,lineDash:n,lineDashOffset:r,lineJoin:i,miterLimit:s}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=v.bL),e.fillStyle=y(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if("string"===typeof e&&(e=(0,x._2)(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){const e=(0,S.E4)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const n=this.angle_-Math.PI/2,r=2*Math.PI/e;for(let o=0;o<e;o++){const e=n+o*r,a=o%2===0?i:s;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=v.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}var w=E;class C extends w{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new C({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}var T=C;class R{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new R({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}var I=R;class b{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new b({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var A=b,O=i(42391);class k{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=M,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"===typeof t&&(t=t.clone()),new k({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=M,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function F(t){let e;if("function"===typeof t)e=t;else{let i;if(Array.isArray(t))i=t;else{(0,O.h)("function"===typeof t.getZIndex,"Expected an `Style` or an array of `Style`");const e=t;i=[e]}e=function(){return i}}return e}let D=null;function L(t,e){if(!D){const t=new I({color:"rgba(255,255,255,0.4)"}),e=new A({color:"#3399CC",width:1.25});D=[new k({image:new T({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return D}function M(t){return t.getGeometry()}var P=k,G=(i(57658),i(77621)),W=i(43005),X=i(59800),B=i(84709);let Y=null;class N extends W.Z{constructor(t,e,i,s,n){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=n,this.imageState_=void 0===s?g.Z.IDLE:s,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===g.Z.LOADED){Y||(Y=(0,S.E4)(1,1,void 0,{willReadFrequently:!0})),Y.drawImage(this.image_,0,0);try{Y.getImageData(0,0,1,1),this.tainted_=!1}catch(t){Y=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(G.Z.CHANGE)}handleImageError_(){this.imageState_=g.Z.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=g.Z.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=(0,S.E4)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===g.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=g.Z.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,X.Q9)(this.image_,this.src_).then((t=>{this.image_=t,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==g.Z.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=(0,x.XC)(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=i}}function Z(t,e,i,s,n){let r=void 0===e?void 0:B.c.get(e,i,n);return r||(r=new N(t,t instanceof HTMLImageElement?t.src||void 0:e,i,s,n),B.c.set(e,i,n,r)),r}function U(t,e,i,s){return void 0!==i&&void 0!==s?[i/t,s/e]:void 0!==i?i/t:void 0!==s?s/e:1}class j extends p{constructor(t){t=t||{};const e=void 0!==t.opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,s=void 0!==t.scale?t.scale:1,n=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:s,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:n,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const r=void 0!==t.img?t.img:null;let o,a=t.src;if((0,O.h)(!(void 0!==a&&r),"`image` and `src` cannot be provided at the same time"),void 0!==a&&0!==a.length||!r||(a=r.src||(0,f.sq)(r)),(0,O.h)(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,O.h)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?o=g.Z.IDLE:void 0!==r&&(o=r instanceof HTMLImageElement?r.complete?r.src?g.Z.LOADED:g.Z.IDLE:g.Z.LOADING:g.Z.LOADED),this.color_=void 0!==t.color?(0,x._2)(t.color):null,this.iconImage_=Z(r,a,this.crossOrigin_,o,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,i;if(t.size)[e,i]=t.size;else{const s=this.getImage(1);if(s.width&&s.height)e=s.width,i=s.height;else if(s instanceof HTMLImageElement){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const i=this.iconImage_.getSize();this.setScale(U(i[0],i[1],t.width,t.height))};return void this.listenImageChange(e)}}void 0!==e&&this.setScale(U(e,i,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new j({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==g.Z.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==g.Z.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(G.Z.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(G.Z.CHANGE,t)}}var q=j;const z="#333";class V{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,_.Pq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new I({color:z}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new V({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,_.Pq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var H=V,J=i(4008);let K=0;const $=1<<K++,Q=1<<K++,tt=1<<K++,et=1<<K++,it=1<<K++,st=Math.pow(2,K)-1,nt={[$]:"boolean",[Q]:"number",[tt]:"string",[et]:"color",[it]:"number[]"},rt=Object.keys(nt).map(Number).sort(J.j2);function ot(t){const e=[];for(const i of rt)at(t,i)&&e.push(nt[i]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function at(t,e){return(t&e)===e}function ht(t,e){return!!(t&e)}class lt{constructor(t,e){this.type=t,this.value=e}}class ct{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function ut(){return{variables:new Set,properties:new Set}}function dt(t,e){switch(typeof t){case"boolean":return new lt($,t);case"number":return new lt(Q,t);case"string":return new lt(tt,t);default:}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(0===t.length)throw new Error("Empty expression");if("string"===typeof t[0])return St(t,e);for(const s of t)if("number"!==typeof s)throw new Error("Expected an array of numbers");let i=it;return 3!==t.length&&4!==t.length||(i|=et),new lt(i,t)}const gt={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},ft={[gt.Number]:yt(xt(1,1/0,st),Q),[gt.String]:yt(xt(1,1/0,st),tt),[gt.Get]:yt(_t,st),[gt.Var]:yt(mt,st),[gt.Resolution]:yt(pt,Q),[gt.Any]:yt(xt(2,1/0,$),$),[gt.All]:yt(xt(2,1/0,$),$),[gt.Not]:yt(xt(1,1,$),$),[gt.Equal]:yt(xt(2,2,st),$),[gt.NotEqual]:yt(xt(2,2,st),$),[gt.GreaterThan]:yt(xt(2,2,st),$),[gt.GreaterThanOrEqualTo]:yt(xt(2,2,st),$),[gt.LessThan]:yt(xt(2,2,st),$),[gt.LessThanOrEqualTo]:yt(xt(2,2,st),$),[gt.Multiply]:yt(xt(2,1/0,Q),Q),[gt.Divide]:yt(xt(2,2,Q),Q),[gt.Add]:yt(xt(2,1/0,Q),Q),[gt.Subtract]:yt(xt(2,2,Q),Q),[gt.Clamp]:yt(xt(3,3,Q),Q),[gt.Mod]:yt(xt(2,2,Q),Q),[gt.Pow]:yt(xt(2,2,Q),Q),[gt.Abs]:yt(xt(1,1,Q),Q),[gt.Floor]:yt(xt(1,1,Q),Q),[gt.Ceil]:yt(xt(1,1,Q),Q),[gt.Round]:yt(xt(1,1,Q),Q),[gt.Sin]:yt(xt(1,1,Q),Q),[gt.Cos]:yt(xt(1,1,Q),Q),[gt.Atan]:yt(xt(1,2,Q),Q),[gt.Sqrt]:yt(xt(1,1,Q),Q),[gt.Match]:yt(xt(4,1/0,tt|Q),st)};function _t(t,e){if(2!==t.length)throw new Error("Expected 1 argument for get operation");const i=dt(t[1],e);if(!(i instanceof lt))throw new Error("Expected a literal argument for get operation");if("string"!==typeof i.value)throw new Error("Expected a string argument for get operation");return e.properties.add(i.value),[i]}function mt(t,e){if(2!==t.length)throw new Error("Expected 1 argument for var operation");const i=dt(t[1],e);if(!(i instanceof lt))throw new Error("Expected a literal argument for var operation");if("string"!==typeof i.value)throw new Error("Expected a string argument for get operation");return e.variables.add(i.value),[i]}function pt(t,e){const i=t[0];if(1!==t.length)throw new Error(`Expected no arguments for ${i} operation`);return[]}function xt(t,e,i){return function(s,n){const r=s[0],o=s.length-1;if(t===e){if(o!==t){const e=1===t?"":"s";throw new Error(`Expected ${t} argument${e} for operation ${r}, got ${o}`)}}else if(o<t||o>e)throw new Error(`Expected ${t} to ${e} arguments for operation ${r}, got ${o}`);const a=new Array(o);for(let t=0;t<o;++t){const e=dt(s[t+1],n);if(!ht(i,e.type)){const s=ot(i),n=ot(e.type);throw new Error(`Unexpected type for argument ${t} of ${r} operation : got ${s} but expected ${n}`)}a[t]=e}return a}}function yt(t,e){return function(i,s){const n=i[0],r=t(i,s);return new ct(e,n,...r)}}function St(t,e){const i=t[0],s=ft[i];if(!s)throw new Error(`Unknown operator: ${i}`);return s(t,e)}function vt(){return{variables:{},properties:{},resolution:NaN}}function Et(t,e,i){const s=dt(t,i);if(!ht(e,s.type)){const t=ot(e),i=ot(s.type);throw new Error(`Expected expression to be of type ${t}, got ${i}`)}return wt(s,i)}function wt(t,e){if(t instanceof lt)return function(){return t.value};const i=t.operator;switch(i){case gt.Number:case gt.String:return Ct(t,e);case gt.Get:case gt.Var:return Tt(t,e);case gt.Resolution:return t=>t.resolution;case gt.Any:case gt.All:case gt.Not:return It(t,e);case gt.Equal:case gt.NotEqual:case gt.LessThan:case gt.LessThanOrEqualTo:case gt.GreaterThan:case gt.GreaterThanOrEqualTo:return Rt(t,e);case gt.Multiply:case gt.Divide:case gt.Add:case gt.Subtract:case gt.Clamp:case gt.Mod:case gt.Pow:case gt.Abs:case gt.Floor:case gt.Ceil:case gt.Round:case gt.Sin:case gt.Cos:case gt.Atan:case gt.Sqrt:return bt(t,e);case gt.Match:return At(t,e);default:throw new Error(`Unsupported operator ${i}`)}}function Ct(t,e){const i=t.operator,s=t.args.length,n=new Array(s);for(let r=0;r<s;++r)n[r]=wt(t.args[r],e);switch(i){case gt.Number:case gt.String:return t=>{for(let e=0;e<s;++e){const s=n[e](t);if(typeof s===i)return s}throw new Error(`Expected one of the values to be a ${i}`)};default:throw new Error(`Unsupported assertion operator ${i}`)}}function Tt(t,e){const i=t.args[0];if(!(i instanceof lt))throw new Error("Expected literal name");const s=i.value;if("string"!==typeof s)throw new Error("Expected string name");switch(t.operator){case gt.Get:return t=>t.properties[s];case gt.Var:return t=>t.variables[s];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function Rt(t,e){const i=t.operator,s=wt(t.args[0],e),n=wt(t.args[1],e);switch(i){case gt.Equal:return t=>s(t)===n(t);case gt.NotEqual:return t=>s(t)!==n(t);case gt.LessThan:return t=>s(t)<n(t);case gt.LessThanOrEqualTo:return t=>s(t)<=n(t);case gt.GreaterThan:return t=>s(t)>n(t);case gt.GreaterThanOrEqualTo:return t=>s(t)>=n(t);default:throw new Error(`Unsupported comparison operator ${i}`)}}function It(t,e){const i=t.operator,s=t.args.length,n=new Array(s);for(let r=0;r<s;++r)n[r]=wt(t.args[r],e);switch(i){case gt.Any:return t=>{for(let e=0;e<s;++e)if(n[e](t))return!0;return!1};case gt.All:return t=>{for(let e=0;e<s;++e)if(!n[e](t))return!1;return!0};case gt.Not:return t=>!n[0](t);default:throw new Error(`Unsupported logical operator ${i}`)}}function bt(t,e){const i=t.operator,s=t.args.length,n=new Array(s);for(let r=0;r<s;++r)n[r]=wt(t.args[r],e);switch(i){case gt.Multiply:return t=>{let e=1;for(let i=0;i<s;++i)e*=n[i](t);return e};case gt.Divide:return t=>n[0](t)/n[1](t);case gt.Add:return t=>{let e=0;for(let i=0;i<s;++i)e+=n[i](t);return e};case gt.Subtract:return t=>n[0](t)-n[1](t);case gt.Clamp:return t=>{const e=n[0](t),i=n[1](t);if(e<i)return i;const s=n[2](t);return e>s?s:e};case gt.Mod:return t=>n[0](t)%n[1](t);case gt.Pow:return t=>Math.pow(n[0](t),n[1](t));case gt.Abs:return t=>Math.abs(n[0](t));case gt.Floor:return t=>Math.floor(n[0](t));case gt.Ceil:return t=>Math.ceil(n[0](t));case gt.Round:return t=>Math.round(n[0](t));case gt.Sin:return t=>Math.sin(n[0](t));case gt.Cos:return t=>Math.cos(n[0](t));case gt.Atan:return 2===s?t=>Math.atan2(n[0](t),n[1](t)):t=>Math.atan(n[0](t));case gt.Sqrt:return t=>Math.sqrt(n[0](t));default:throw new Error(`Unsupported numeric operator ${i}`)}}function At(t,e){const i=t.args.length,s=new Array(i);for(let n=0;n<i;++n)s[n]=wt(t.args[n],e);return t=>{const e=s[0](t);for(let n=1;n<i;n+=2)if(e===s[n](t))return s[n+1](t);return s[i-1](t)}}function Ot(t){return!0}function kt(t){const e=ut(),i=Dt(t,e),s=vt();return function(t,e){return s.properties=t.getPropertiesInternal(),s.resolution=e,i(s)}}function Ft(t){const e=ut(),i=t.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=Lt(t[o],e);const n=vt(),r=new Array(i);return function(t,e){n.properties=t.getPropertiesInternal(),n.resolution=e;for(let o=0;o<i;++o)r[o]=s[o](n);return r}}function Dt(t,e){const i=t.length,s=new Array(i);for(let n=0;n<i;++n){const i=t[n],r="filter"in i?Et(i.filter,$,e):Ot;let o;if(Array.isArray(i.style)){const t=i.style.length;o=new Array(t);for(let s=0;s<t;++s)o[s]=Lt(i.style[s],e)}else o=[Lt(i.style,e)];s[n]={filter:r,styles:o}}return function(e){const n=[];let r=!1;for(let o=0;o<i;++o){const i=s[o].filter;if(i(e)&&(!t[o].else||!r)){r=!0;for(const t of s[o].styles){const i=t(e);i&&n.push(i)}}}return n}}function Lt(t,e){const i=Mt(t,"",e),s=Pt(t,"",e),n=Gt(t,e),r=Wt(t,e),o=Nt(t,"z-index",e),a=new P;return function(t){let e=!0;if(i){const s=i(t);s&&(e=!1),a.setFill(s)}if(s){const i=s(t);i&&(e=!1),a.setStroke(i)}if(n){const i=n(t);i&&(e=!1),a.setText(i)}if(r){const i=r(t);i&&(e=!1),a.setImage(i)}return o&&a.setZIndex(o(t)),e?null:a}}function Mt(t,e,i){const s=jt(t,e+"fill-color",i);if(!s)return null;const n=new I;return function(t){const e=s(t);return"none"===e?null:(n.setColor(e),n)}}function Pt(t,e,i){const s=Nt(t,e+"stroke-width",i),n=jt(t,e+"stroke-color",i);if(!s&&!n)return null;const r=Zt(t,e+"stroke-line-cap",i),o=Zt(t,e+"stroke-line-join",i),a=qt(t,e+"stroke-line-dash",i),h=Nt(t,e+"stroke-line-dash-offset",i),l=Nt(t,e+"stroke-miter-limit",i),c=new A;return function(t){if(n){const e=n(t);if("none"===e)return null;c.setColor(e)}if(s&&c.setWidth(s(t)),r){const e=r(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap");c.setLineCap(e)}if(o){const e=o(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(e)}return a&&c.setLineDash(a(t)),h&&c.setLineDashOffset(h(t)),l&&c.setMiterLimit(l(t)),c}}function Gt(t,e){const i="text-",s=Zt(t,i+"value",e);if(!s)return null;const n=Mt(t,i,e),r=Mt(t,i+"background-",e),o=Pt(t,i,e),a=Pt(t,i+"background-",e),h=Zt(t,i+"font",e),l=Nt(t,i+"max-angle",e),c=Nt(t,i+"offset-x",e),u=Nt(t,i+"offset-y",e),d=Ut(t,i+"overflow",e),g=Zt(t,i+"placement",e),f=Nt(t,i+"repeat",e),_=Vt(t,i+"scale",e),m=Ut(t,i+"rotate-with-view",e),p=Nt(t,i+"rotation",e),x=Zt(t,i+"align",e),y=Zt(t,i+"justify",e),S=Zt(t,i+"baseline",e),v=qt(t,i+"padding",e),E=new H({});return function(t){if(E.setText(s(t)),n&&E.setFill(n(t)),r&&E.setBackgroundFill(r(t)),o&&E.setStroke(o(t)),a&&E.setBackgroundStroke(a(t)),h&&E.setFont(h(t)),l&&E.setMaxAngle(l(t)),c&&E.setOffsetX(c(t)),u&&E.setOffsetY(u(t)),d&&E.setOverflow(d(t)),g){const e=g(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");E.setPlacement(e)}if(f&&E.setRepeat(f(t)),_&&E.setScale(_(t)),m&&E.setRotateWithView(m(t)),p&&E.setRotation(p(t)),x){const e=x(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align");E.setTextAlign(e)}if(y){const e=y(t);if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify");E.setJustify(e)}if(S){const e=S(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");E.setTextBaseline(e)}return v&&E.setPadding(v(t)),E}}function Wt(t,e){return"icon-src"in t?Xt(t,e):"shape-points"in t?Bt(t,e):"circle-radius"in t?Yt(t,e):null}function Xt(t,e){const i="icon-",s=i+"src",n=ne(t[s],s),r=zt(t,i+"anchor",e),o=Vt(t,i+"scale",e),a=Nt(t,i+"opacity",e),h=zt(t,i+"displacement",e),l=Nt(t,i+"rotation",e),c=Ut(t,i+"rotate-with-view",e),u=$t(t,i+"anchor-origin"),d=Qt(t,i+"anchor-x-units"),g=Qt(t,i+"anchor-y-units"),f=ie(t,i+"color"),_=Kt(t,i+"cross-origin"),m=te(t,i+"offset"),p=$t(t,i+"offset-origin"),x=Ht(t,i+"width"),y=Ht(t,i+"height"),S=Jt(t,i+"size"),v=ee(t,i+"declutter"),E=new q({src:n,anchorOrigin:u,anchorXUnits:d,anchorYUnits:g,color:f,crossOrigin:_,offset:m,offsetOrigin:p,height:y,width:x,size:S,declutterMode:v});return function(t){return a&&E.setOpacity(a(t)),h&&E.setDisplacement(h(t)),l&&E.setRotation(l(t)),c&&E.setRotateWithView(c(t)),o&&E.setScale(o(t)),r&&E.setAnchor(r(t)),E}}function Bt(t,e){const i="shape-",s=i+"points",n=re(t[s],s),r=Mt(t,i,e),o=Pt(t,i,e),a=Vt(t,i+"scale",e),h=zt(t,i+"displacement",e),l=Nt(t,i+"rotation",e),c=Ut(t,i+"rotate-with-view",e),u=Ht(t,i+"radius"),d=Ht(t,i+"radius1"),g=Ht(t,i+"radius2"),f=Ht(t,i+"angle"),_=ee(t,i+"declutter-mode"),m=new w({points:n,radius:u,radius1:d,radius2:g,angle:f,declutterMode:_});return function(t){return r&&m.setFill(r(t)),o&&m.setStroke(o(t)),h&&m.setDisplacement(h(t)),l&&m.setRotation(l(t)),c&&m.setRotateWithView(c(t)),a&&m.setScale(a(t)),m}}function Yt(t,e){const i="circle-",s=Mt(t,i,e),n=Pt(t,i,e),r=Nt(t,i+"radius",e),o=Vt(t,i+"scale",e),a=zt(t,i+"displacement",e),h=Nt(t,i+"rotation",e),l=Ut(t,i+"rotate-with-view",e),c=ee(t,i+"declutter-mode"),u=new T({radius:5,declutterMode:c});return function(t){return r&&u.setRadius(r(t)),s&&u.setFill(s(t)),n&&u.setStroke(n(t)),a&&u.setDisplacement(a(t)),h&&u.setRotation(h(t)),l&&u.setRotateWithView(l(t)),o&&u.setScale(o(t)),u}}function Nt(t,e,i){if(!(e in t))return;const s=Et(t[e],Q,i);return function(t){return re(s(t),e)}}function Zt(t,e,i){if(!(e in t))return null;const s=Et(t[e],tt,i);return function(t){return ne(s(t),e)}}function Ut(t,e,i){if(!(e in t))return null;const s=Et(t[e],$,i);return function(t){const i=s(t);if("boolean"!==typeof i)throw new Error(`Expected a boolean for ${e}`);return i}}function jt(t,e,i){if(!(e in t))return null;const s=Et(t[e],et|tt,i);return function(t){return oe(s(t),e)}}function qt(t,e,i){if(!(e in t))return null;const s=Et(t[e],it,i);return function(t){return se(s(t),e)}}function zt(t,e,i){if(!(e in t))return null;const s=Et(t[e],it,i);return function(t){const i=se(s(t),e);if(2!==i.length)throw new Error(`Expected two numbers for ${e}`);return i}}function Vt(t,e,i){if(!(e in t))return null;const s=Et(t[e],it|Q,i);return function(t){return ae(s(t),e)}}function Ht(t,e){const i=t[e];if(void 0!==i){if("number"!==typeof i)throw new Error(`Expected a number for ${e}`);return i}}function Jt(t,e){const i=t[e];if(void 0!==i){if("number"===typeof i)return(0,_.Pq)(i);if(!Array.isArray(i))throw new Error(`Expected a number or size array for ${e}`);if(2!==i.length||"number"!==typeof i[0]||"number"!==typeof i[1])throw new Error(`Expected a number or size array for ${e}`);return i}}function Kt(t,e){const i=t[e];if(void 0!==i){if("string"!==typeof i)throw new Error(`Expected a string for ${e}`);return i}}function $t(t,e){const i=t[e];if(void 0!==i){if("bottom-left"!==i&&"bottom-right"!==i&&"top-left"!==i&&"top-right"!==i)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return i}}function Qt(t,e){const i=t[e];if(void 0!==i){if("pixels"!==i&&"fraction"!==i)throw new Error(`Expected pixels or fraction for ${e}`);return i}}function te(t,e){const i=t[e];if(void 0!==i)return se(i,e)}function ee(t,e){const i=t[e];if(void 0!==i){if("string"!==typeof i)throw new Error(`Expected a string for ${e}`);if("declutter"!==i&&"obstacle"!==i&&"none"!==i)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return i}}function ie(t,e){const i=t[e];if(void 0!==i)return oe(i,e)}function se(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const i=t.length;for(let s=0;s<i;++s)if("number"!==typeof t[s])throw new Error(`Expected an array of numbers for ${e}`);return t}function ne(t,e){if("string"!==typeof t)throw new Error(`Expected a string for ${e}`);return t}function re(t,e){if("number"!==typeof t)throw new Error(`Expected a number for ${e}`);return t}function oe(t,e){if("string"===typeof t)return t;const i=se(t,e),s=i.length;if(s<3||s>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return i}function ae(t,e){if("number"===typeof t)return t;const i=se(t,e);if(2!==i.length)throw new Error(`Expected an array of two numbers for ${e}`);return i}const he={RENDER_ORDER:"renderOrder"};class le extends u.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(he.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new d(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(he.RENDER_ORDER,t)}setStyle(t){this.style_=ce(t),this.styleFunction_=null===t?void 0:F(this.style_),this.changed()}}function ce(t){if(void 0===t)return L;if(!t)return null;if("function"===typeof t)return t;if(t instanceof P)return t;if(!Array.isArray(t))return Ft([t]);if(0===t.length)return[];const e=t.length,i=t[0];if(i instanceof P){const i=new Array(e);for(let s=0;s<e;++s){const e=t[s];if(!(e instanceof P))throw new Error("Expected a list of style instances");i[s]=e}return i}if("style"in i){const i=new Array(e);for(let s=0;s<e;++s){const e=t[s];if(!("style"in e))throw new Error("Expected a list of rules with a style property");i[s]=e}return kt(i)}const s=t;return Ft(s)}var ue=le;const de={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},ge=[de.FILL],fe=[de.STROKE],_e=[de.BEGIN_PATH],me=[de.CLOSE_PATH];var pe=de,xe=i(82044);class ye{drawCustom(t,e,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}var Se=ye,ve=i(20944),Ee=i(92650);class we extends Se{constructor(t,e,i,s){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,n=this.coordinates;let r=n.length;for(let o=0,a=t.length;o<a;o+=e)s[0]=t[o],s[1]=t[o+1],(0,ve.b8)(i,s)&&(n[r++]=s[0],n[r++]=s[1]);return r}appendFlatLineCoordinates(t,e,i,s,n,r){const o=this.coordinates;let a=o.length;const h=this.getBufferedMaxExtent();r&&(e+=s);let l=t[e],c=t[e+1];const u=this.tmpCoordinate_;let d,g,f,_=!0;for(d=e+s;d<i;d+=s)u[0]=t[d],u[1]=t[d+1],f=(0,ve.pX)(h,u),f!==g?(_&&(o[a++]=l,o[a++]=c,_=!1),o[a++]=u[0],o[a++]=u[1]):f===xe.Z.INTERSECTING?(o[a++]=u[0],o[a++]=u[1],_=!1):_=!0,l=u[0],c=u[1],g=f;return(n&&_||d===e+s)&&(o[a++]=l,o[a++]=c),a}drawCustomCoordinates_(t,e,i,s,n){for(let r=0,o=i.length;r<o;++r){const o=i[r],a=this.appendFlatLineCoordinates(t,e,o,s,!1,!1);n.push(a),e=o}return e}drawCustom(t,e,i,s){this.beginGeometry(t,e);const n=t.getType(),r=t.getStride(),o=this.coordinates.length;let a,h,l,c,u;switch(n){case"MultiPolygon":a=t.getOrientedFlatCoordinates(),c=[];const e=t.getEndss();u=0;for(let t=0,i=e.length;t<i;++t){const i=[];u=this.drawCustomCoordinates_(a,u,e[t],r,i),c.push(i)}this.instructions.push([pe.CUSTOM,o,c,t,i,Ee.ug]),this.hitDetectionInstructions.push([pe.CUSTOM,o,c,t,s||i,Ee.ug]);break;case"Polygon":case"MultiLineString":l=[],a="Polygon"==n?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),u=this.drawCustomCoordinates_(a,0,t.getEnds(),r,l),this.instructions.push([pe.CUSTOM,o,l,t,i,Ee.o1]),this.hitDetectionInstructions.push([pe.CUSTOM,o,l,t,s||i,Ee.o1]);break;case"LineString":case"Circle":a=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(a,0,a.length,r,!1,!1),this.instructions.push([pe.CUSTOM,o,h,t,i,Ee.Ml]),this.hitDetectionInstructions.push([pe.CUSTOM,o,h,t,s||i,Ee.Ml]);break;case"MultiPoint":a=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(a,r),h>o&&(this.instructions.push([pe.CUSTOM,o,h,t,i,Ee.Ml]),this.hitDetectionInstructions.push([pe.CUSTOM,o,h,t,s||i,Ee.Ml]));break;case"Point":a=t.getFlatCoordinates(),this.coordinates.push(a[0],a[1]),h=this.coordinates.length,this.instructions.push([pe.CUSTOM,o,h,t,i]),this.hitDetectionInstructions.push([pe.CUSTOM,o,h,t,s||i]);break;default:}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[pe.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[pe.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let s,n,r=-1;for(e=0;e<i;++e)s=t[e],n=s[0],n==pe.END_GEOMETRY?r=e:n==pe.BEGIN_GEOMETRY&&(s[2]=e,(0,J.FZ)(this.hitDetectionInstructions,r,e),r=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=y(e||v.bL)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=y(t||v.Tx);const s=e.getLineCap();i.lineCap=void 0!==s?s:v.mb;const n=e.getLineDash();i.lineDash=n?n.slice():v.X9;const r=e.getLineDashOffset();i.lineDashOffset=r||v.He;const o=e.getLineJoin();i.lineJoin=void 0!==o?o:v.rc;const a=e.getWidth();i.lineWidth=void 0!==a?a:v.yC;const h=e.getMiterLimit();i.miterLimit=void 0!==h?h:v.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[pe.SET_FILL_STYLE,e];return"string"!==typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[pe.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"===typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,s=t.lineCap,n=t.lineDash,r=t.lineDashOffset,o=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=s||n!=t.currentLineDash&&!(0,J.fS)(t.currentLineDash,n)||t.currentLineDashOffset!=r||t.currentLineJoin!=o||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=s,t.currentLineDash=n,t.currentLineDashOffset=r,t.currentLineJoin=o,t.currentLineWidth=a,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[pe.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,ve.d9)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,ve.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var Ce=we;class Te extends Ce{constructor(t,e,i,s){super(t,e,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),n=this.coordinates.length,r=this.appendFlatPointCoordinates(i,s);this.instructions.push([pe.DRAW_IMAGE,n,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pe.DRAW_IMAGE,n,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),s=t.getStride(),n=this.coordinates.length,r=this.appendFlatPointCoordinates(i,s);this.instructions.push([pe.DRAW_IMAGE,n,r,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([pe.DRAW_IMAGE,n,r,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),s=t.getSize(),n=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=t.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=s[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}var Re=Te;class Ie extends Ce{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinates_(t,e,i,s){const n=this.coordinates.length,r=this.appendFlatLineCoordinates(t,e,i,s,!1,!1),o=[pe.MOVE_TO_LINE_TO,n,r];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(t,e){const i=this.state,s=i.strokeStyle,n=i.lineWidth;if(void 0===s||void 0===n)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,v.X9,v.He],_e);const r=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(r,0,r.length,o),this.hitDetectionInstructions.push(fe),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,s=i.strokeStyle,n=i.lineWidth;if(void 0===s||void 0===n)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,v.X9,v.He],_e);const r=t.getEnds(),o=t.getFlatCoordinates(),a=t.getStride();let h=0;for(let l=0,c=r.length;l<c;++l)h=this.drawFlatCoordinates_(o,h,r[l],a);this.hitDetectionInstructions.push(fe),this.endGeometry(e)}finish(){const t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(fe),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(fe),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(_e)}}var be=Ie,Ae=i(29528);class Oe extends Ce{constructor(t,e,i,s){super(t,e,i,s)}drawFlatCoordinatess_(t,e,i,s){const n=this.state,r=void 0!==n.fillStyle,o=void 0!==n.strokeStyle,a=i.length;this.instructions.push(_e),this.hitDetectionInstructions.push(_e);for(let h=0;h<a;++h){const n=i[h],r=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,n,s,!0,!o),l=[pe.MOVE_TO_LINE_TO,r,a];this.instructions.push(l),this.hitDetectionInstructions.push(l),o&&(this.instructions.push(me),this.hitDetectionInstructions.push(me)),e=n}return r&&(this.instructions.push(ge),this.hitDetectionInstructions.push(ge)),o&&(this.instructions.push(fe),this.hitDetectionInstructions.push(fe)),e}drawCircle(t,e){const i=this.state,s=i.fillStyle,n=i.strokeStyle;if(void 0===s&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([pe.SET_FILL_STYLE,v.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,v.X9,v.He]);const r=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length;this.appendFlatLineCoordinates(r,0,r.length,o,!1,!1);const h=[pe.CIRCLE,a];this.instructions.push(_e,h),this.hitDetectionInstructions.push(_e,h),void 0!==i.fillStyle&&(this.instructions.push(ge),this.hitDetectionInstructions.push(ge)),void 0!==i.strokeStyle&&(this.instructions.push(fe),this.hitDetectionInstructions.push(fe)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,s=i.fillStyle,n=i.strokeStyle;if(void 0===s&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([pe.SET_FILL_STYLE,v.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,v.X9,v.He]);const r=t.getEnds(),o=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(o,0,r,a),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,s=i.fillStyle,n=i.strokeStyle;if(void 0===s&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([pe.SET_FILL_STYLE,v.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([pe.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,v.X9,v.He]);const r=t.getEndss(),o=t.getOrientedFlatCoordinates(),a=t.getStride();let h=0;for(let l=0,c=r.length;l<c;++l)h=this.drawFlatCoordinatess_(o,h,r[l],a);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,s=e.length;i<s;++i)e[i]=(0,Ae.uZ)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state,e=t.fillStyle;void 0!==e&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}var ke=Oe,Fe=i(65756);function De(t,e,i,s,n){const r=[];let o=i,a=0,h=e.slice(i,2);while(a<t&&o+n<s){const[i,s]=h.slice(-2),l=e[o+n],c=e[o+n+1],u=Math.sqrt((l-i)*(l-i)+(c-s)*(c-s));if(a+=u,a>=t){const e=(t-a+u)/u,d=(0,Fe.t7)(i,l,e),g=(0,Fe.t7)(s,c,e);h.push(d,g),r.push(h),h=[d,g],a==t&&(o+=n),a=0}else if(a<t)h.push(e[o+n],e[o+n+1]),o+=n;else{const t=u-a,e=(0,Fe.t7)(i,l,t/u),d=(0,Fe.t7)(s,c,t/u);h.push(e,d),r.push(h),h=[e,d],a=0,o+=n}}return a>0&&r.push(h),r}function Le(t,e,i,s,n){let r,o,a,h,l,c,u,d,g,f,_=i,m=i,p=0,x=0,y=i;for(o=i;o<s;o+=n){const i=e[o],s=e[o+1];void 0!==l&&(g=i-l,f=s-c,h=Math.sqrt(g*g+f*f),void 0!==u&&(x+=a,r=Math.acos((u*g+d*f)/(a*h)),r>t&&(x>p&&(p=x,_=y,m=o),x=0,y=o-n)),a=h,u=g,d=f),l=i,c=s}return x+=h,x>p?[y,o]:[_,m]}const Me={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Pe extends Ce{constructor(t,e,i,s){super(t,e,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[v.bL]={fillStyle:v.bL},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,s=this.textStrokeState_,n=this.textState_;if(""===this.text_||!n||!i&&!s)return;const r=this.coordinates;let o=r.length;const a=t.getType();let h=null,l=t.getStride();if("line"!==n.placement||"LineString"!=a&&"MultiLineString"!=a&&"Polygon"!=a&&"MultiPolygon"!=a){let i=n.overflow?null:[];switch(a){case"Point":case"MultiPoint":h=t.getFlatCoordinates();break;case"LineString":h=t.getFlatMidpoint();break;case"Circle":h=t.getCenter();break;case"MultiLineString":h=t.getFlatMidpoints(),l=2;break;case"Polygon":h=t.getFlatInteriorPoint(),n.overflow||i.push(h[2]/this.resolution),l=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();h=[];for(let t=0,s=e.length;t<s;t+=3)n.overflow||i.push(e[t+2]/this.resolution),h.push(e[t],e[t+1]);if(0===h.length)return;l=2;break;default:}const s=this.appendFlatPointCoordinates(h,l);if(s===o)return;if(i&&(s-o)/2!==h.length/l){let t=o/2;i=i.filter(((e,i)=>{const s=r[2*(t+i)]===h[i*l]&&r[2*(t+i)+1]===h[i*l+1];return s||--t,s}))}this.saveTextStates_(),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&this.updateFillStyle(this.state,this.createFill),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let c=n.padding;if(c!=v.oB&&(n.scale[0]<0||n.scale[1]<0)){let t=n.padding[0],e=n.padding[1],i=n.padding[2],s=n.padding[3];n.scale[0]<0&&(e=-e,s=-s),n.scale[1]<0&&(t=-t,i=-i),c=[t,e,i,s]}const u=this.pixelRatio;this.instructions.push([pe.DRAW_IMAGE,o,s,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,c==v.oB?v.oB:c.map((function(t){return t*u})),!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const d=1/u,g=this.state.fillStyle;n.backgroundFill&&(this.state.fillStyle=v.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([pe.DRAW_IMAGE,o,s,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[d,d],NaN,void 0,this.declutterImageWithText_,c,!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?v.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),n.backgroundFill&&(this.state.fillStyle=g,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!(0,ve.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(h=t.getFlatCoordinates(),"LineString"==a)i=[h.length];else if("MultiLineString"==a)i=t.getEnds();else if("Polygon"==a)i=t.getEnds().slice(0,1);else if("MultiPolygon"==a){const e=t.getEndss();i=[];for(let t=0,s=e.length;t<s;++t)i.push(e[t][0])}this.beginGeometry(t,e);const s=n.repeat,c=s?void 0:n.textAlign;let u=0;for(let t=0,e=i.length;t<e;++t){let e;e=s?De(s*this.resolution,h,u,i[t],l):[h.slice(u,i[t])];for(let s=0,a=e.length;s<a;++s){const a=e[s];let h=0,d=a.length;if(void 0==c){const t=Le(n.maxAngle,a,0,a.length,2);h=t[0],d=t[1]}for(let t=h;t<d;t+=l)r.push(a[t],a[t+1]);const g=r.length;u=i[t],this.drawChars_(o,g),o=g}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,s=this.strokeKey_;t&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||v.PH,justify:e.justify,textBaseline:e.textBaseline||v.ru,scale:e.scale});const r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,s=this.textState_,n=this.strokeKey_,r=this.textKey_,o=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,h=Me[s.textBaseline],l=this.textOffsetY_*a,c=this.text_,u=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([pe.DRAW_CHARS,t,e,h,s.overflow,o,s.maxAngle,a,l,n,u*a,c,r,1]),this.hitDetectionInstructions.push([pe.DRAW_CHARS,t,e,h,s.overflow,o?v.bL:o,s.maxAngle,a,l,n,u*a,c,r,1/a])}setTextStyle(t,e){let i,s,n;if(t){const e=t.getFill();e?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=y(e.getColor()||v.bL)):(s=null,this.textFillState_=s);const r=t.getStroke();if(r){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const t=r.getLineDash(),e=r.getLineDashOffset(),i=r.getWidth(),s=r.getMiterLimit();n.lineCap=r.getLineCap()||v.mb,n.lineDash=t?t.slice():v.X9,n.lineDashOffset=void 0===e?v.He:e,n.lineJoin=r.getLineJoin()||v.rc,n.lineWidth=void 0===i?v.yC:i,n.miterLimit=void 0===s?v.V4:s,n.strokeStyle=y(r.getColor()||v.Tx)}else n=null,this.textStrokeState_=n;i=this.textState_;const o=t.getFont()||v.Df;(0,v.Qx)(o);const a=t.getScaleArray();i.overflow=t.getOverflow(),i.font=o,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||v.ru,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||v.oB,i.scale=void 0===a?[1,1]:a;const h=t.getOffsetX(),l=t.getOffsetY(),c=t.getRotateWithView(),u=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===h?0:h,this.textOffsetY_=void 0===l?0:l,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0===u?0:u,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,f.sq)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?"string"==typeof s.fillStyle?s.fillStyle:"|"+(0,f.sq)(s.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}var Ge=Pe;const We={Circle:ke,Default:Ce,Image:Re,LineString:be,Polygon:ke,Text:Ge};class Xe{constructor(t,e,i,s){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const s in i){const n=i[s].finish();t[e][s]=n}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let s=this.buildersByZIndex_[i];void 0===s&&(s={},this.buildersByZIndex_[i]=s);let n=s[e];if(void 0===n){const t=We[e];n=new t(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[e]=n}return n}}var Be=Xe,Ye=i(36626),Ne=i(2254),Ze=i(38894),Ue=i(99287);const je=[];let qe=null;function ze(){qe=(0,S.E4)(1,1,void 0,{willReadFrequently:!0})}class Ve extends Ye.Z{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,Ue.Ue)(),this.pixelTransform=(0,Ue.Ue)(),this.inversePixelTransform=(0,Ue.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let s;qe||ze(),qe.clearRect(0,0,1,1);try{qe.drawImage(t,e,i,1,1,0,0,1,1),s=qe.getImageData(0,0,1,1).data}catch(n){return qe=null,null}return s}getBackground(t){const e=this.getLayer();let i=e.getBackground();return"function"===typeof i&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const s=this.getLayer().getClassName();let n,r;if(t&&t.className===s&&(!i||t&&t.style.backgroundColor&&(0,J.fS)((0,x._2)(t.style.backgroundColor),(0,x._2)(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(r=e.getContext("2d"))}if(r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){n=document.createElement("div"),n.className=s;let t=n.style;t.position="absolute",t.width="100%",t.height="100%",r=(0,S.E4)();const e=r.canvas;n.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=n,this.context=r}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const s=(0,ve.rL)(i),n=(0,ve.Xv)(i),r=(0,ve.w$)(i),o=(0,ve.hC)(i);(0,Ue.nn)(e.coordinateToPixelTransform,s),(0,Ue.nn)(e.coordinateToPixelTransform,n),(0,Ue.nn)(e.coordinateToPixelTransform,r),(0,Ue.nn)(e.coordinateToPixelTransform,o);const a=this.inversePixelTransform;(0,Ue.nn)(a,s),(0,Ue.nn)(a,n),(0,Ue.nn)(a,r),(0,Ue.nn)(a,o),t.save(),t.beginPath(),t.moveTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}dispatchRenderEvent_(t,e,i){const s=this.getLayer();if(s.hasListener(t)){const n=new Ne.Z(t,this.inversePixelTransform,i,e);s.dispatchEvent(n)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(Ze.Z.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Ze.Z.POSTRENDER,t,e)}getRenderTransform(t,e,i,s,n,r,o){const a=n/2,h=r/2,l=s/e,c=-l,u=-t[0]+o,d=-t[1];return(0,Ue.qC)(this.tempTransform,a,h,l,c,-i,u,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var He=Ve,Je=i(20790);function Ke(t,e,i,s,n,r,o,a,h,l,c,u){let d=t[e],g=t[e+1],f=0,_=0,m=0,p=0;function x(){f=d,_=g,e+=s,d=t[e],g=t[e+1],p+=m,m=Math.sqrt((d-f)*(d-f)+(g-_)*(g-_))}do{x()}while(e<i-s&&p+m<r);let y=0===m?0:(r-p)/m;const S=(0,Fe.t7)(f,d,y),v=(0,Fe.t7)(_,g,y),E=e-s,w=p,C=r+a*h(l,n,c);while(e<i-s&&p+m<C)x();y=0===m?0:(C-p)/m;const T=(0,Fe.t7)(f,d,y),R=(0,Fe.t7)(_,g,y);let I;if(u){const t=[S,v,T,R];(0,Je.U1)(t,0,4,2,u,t,t),I=t[0]>t[2]}else I=S>T;const b=Math.PI,A=[],O=E+s===e;let k;if(e=E,m=0,p=w,d=t[e],g=t[e+1],O){x(),k=Math.atan2(g-_,d-f),I&&(k+=k>0?-b:b);const t=(T+S)/2,e=(R+v)/2;return A[0]=[t,e,(C-r)/2,k,n],A}n=n.replace(/\n/g," ");for(let F=0,D=n.length;F<D;){x();let t=Math.atan2(g-_,d-f);if(I&&(t+=t>0?-b:b),void 0!==k){let e=t-k;if(e+=e>b?-2*b:e<-b?2*b:0,Math.abs(e)>o)return null}k=t;const u=F;let S=0;for(;F<D;++F){const t=I?D-F-1:F,o=a*h(l,n[t],c);if(e+s<i&&p+m<r+S+o/2)break;S+=o}if(F===u)continue;const v=I?n.substring(D-u,D-F):n.substring(u,F);y=0===m?0:(r+S/2-p)/m;const E=(0,Fe.t7)(f,d,y),w=(0,Fe.t7)(_,g,y);A.push([E,w,S/2,t,v]),r+=S}return A}function $e(t,e,i,s){let n=t[e],r=t[e+1],o=0;for(let a=e+s;a<i;a+=s){const e=t[a],i=t[a+1];o+=Math.sqrt((e-n)*(e-n)+(i-r)*(i-r)),n=e,r=i}return o}const Qe=(0,ve.lJ)(),ti=[],ei=[],ii=[],si=[];function ni(t){return t[3].declutterBox}const ri=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function oi(t,e){return"start"===e?e=ri.test(t)?"right":"left":"end"===e&&(e=ri.test(t)?"left":"right"),Me[e]}function ai(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}class hi{constructor(t,e,i,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Ue.Ue)(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,s){const n=t+e+i+s;if(this.labels_[n])return this.labels_[n];const r=s?this.strokeStates[s]:null,o=i?this.fillStates[i]:null,a=this.textStates[e],h=this.pixelRatio,l=[a.scale[0]*h,a.scale[1]*h],c=Array.isArray(t),u=a.justify?Me[a.justify]:oi(Array.isArray(t)?t[0]:t,a.textAlign||v.PH),d=s&&r.lineWidth?r.lineWidth:0,g=c?t:t.split("\n").reduce(ai,[]),{width:f,height:_,widths:m,heights:p,lineWidths:x}=(0,v.Zw)(a,g),y=f+d,S=[],E=(y+2)*l[0],w=(_+d)*l[1],C={width:E<0?Math.floor(E):Math.ceil(E),height:w<0?Math.floor(w):Math.ceil(w),contextInstructions:S};1==l[0]&&1==l[1]||S.push("scale",l),s&&(S.push("strokeStyle",r.strokeStyle),S.push("lineWidth",d),S.push("lineCap",r.lineCap),S.push("lineJoin",r.lineJoin),S.push("miterLimit",r.miterLimit),S.push("setLineDash",[r.lineDash]),S.push("lineDashOffset",r.lineDashOffset)),i&&S.push("fillStyle",o.fillStyle),S.push("textBaseline","middle"),S.push("textAlign","center");const T=.5-u;let R=u*y+T*d;const I=[],b=[];let A,O=0,k=0,F=0,D=0;for(let v=0,L=g.length;v<L;v+=2){const t=g[v];if("\n"===t){k+=O,O=0,R=u*y+T*d,++D;continue}const e=g[v+1]||a.font;e!==A&&(s&&I.push("font",e),i&&b.push("font",e),A=e),O=Math.max(O,p[F]);const n=[t,R+T*m[F]+u*(m[F]-x[D]),.5*(d+O)+k];R+=m[F],s&&I.push("strokeText",n),i&&b.push("fillText",n),++F}return Array.prototype.push.apply(S,I),Array.prototype.push.apply(S,b),this.labels_[n]=C,C}replayTextBackground_(t,e,i,s,n,r,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,s),t.lineTo.apply(t,n),t.lineTo.apply(t,e),r&&(this.alignFill_=r[2],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,s,n,r,o,a,h,l,c,u,d,g,f,_){o*=u[0],a*=u[1];let m=i-o,p=s-a;const x=n+h>t?t-h:n,y=r+l>e?e-l:r,S=g[3]+x*u[0]+g[1],v=g[0]+y*u[1]+g[2],E=m-g[3],w=p-g[0];let C;return(f||0!==c)&&(ti[0]=E,si[0]=E,ti[1]=w,ei[1]=w,ei[0]=E+S,ii[0]=ei[0],ii[1]=w+v,si[1]=ii[1]),0!==c?(C=(0,Ue.qC)((0,Ue.Ue)(),i,s,1,1,c,-i,-s),(0,Ue.nn)(C,ti),(0,Ue.nn)(C,ei),(0,Ue.nn)(C,ii),(0,Ue.nn)(C,si),(0,ve.T9)(Math.min(ti[0],ei[0],ii[0],si[0]),Math.min(ti[1],ei[1],ii[1],si[1]),Math.max(ti[0],ei[0],ii[0],si[0]),Math.max(ti[1],ei[1],ii[1],si[1]),Qe)):(0,ve.T9)(Math.min(E,E+S),Math.min(w,w+v),Math.max(E,E+S),Math.max(w,w+v),Qe),d&&(m=Math.round(m),p=Math.round(p)),{drawImageX:m,drawImageY:p,drawImageW:x,drawImageH:y,originX:h,originY:l,declutterBox:{minX:Qe[0],minY:Qe[1],maxX:Qe[2],maxY:Qe[3],value:_},canvasTransform:C,scale:u}}replayImageOrLabel_(t,e,i,s,n,r,o){const a=!(!r&&!o),h=s.declutterBox,l=t.canvas,c=o?o[2]*s.scale[0]/2:0,u=h.minX-c<=l.width/e&&h.maxX+c>=0&&h.minY-c<=l.height/e&&h.maxY+c>=0;return u&&(a&&this.replayTextBackground_(t,ti,ei,ii,si,r,o),(0,v._f)(t,s.canvasTransform,n,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(t){if(this.alignFill_){const e=(0,Ue.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t["strokeStyle"]=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,s){const n=this.textStates[e],r=this.createLabel(t,e,s,i),o=this.strokeStates[i],a=this.pixelRatio,h=oi(Array.isArray(t)?t[0]:t,n.textAlign||v.PH),l=Me[n.textBaseline||v.ru],c=o&&o.lineWidth?o.lineWidth:0,u=r.width/a-2*n.scale[0],d=h*u+2*(.5-h)*c,g=l*r.height/a+2*(.5-l)*c;return{label:r,anchorX:d,anchorY:g}}execute_(t,e,i,s,n,r,o,a){let h;this.pixelCoordinates_&&(0,J.fS)(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=(0,Je.vT)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,Ue.lk)(this.renderedTransform_,i));let l=0;const c=s.length;let u,d,g,f,_,m,p,x,y,S,E,w,C=0,T=0,R=0,I=null,b=null;const A=this.coordinateCache_,O=this.viewRotation_,k=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,F={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},D=this.instructions!=s||this.overlaps?0:200;let L,M,P,G;while(l<c){const i=s[l],c=i[0];switch(c){case pe.BEGIN_GEOMETRY:L=i[1],G=i[3],L.getGeometry()?void 0===o||(0,ve.kK)(o,G.getExtent())?++l:l=i[2]+1:l=i[2];break;case pe.BEGIN_PATH:T>D&&(this.fill_(t),T=0),R>D&&(t.stroke(),R=0),T||R||(t.beginPath(),f=NaN,_=NaN),++l;break;case pe.CIRCLE:C=i[1];const s=h[C],c=h[C+1],W=h[C+2],X=h[C+3],B=W-s,Y=X-c,N=Math.sqrt(B*B+Y*Y);t.moveTo(s+N,c),t.arc(s,c,N,0,2*Math.PI,!0),++l;break;case pe.CLOSE_PATH:t.closePath(),++l;break;case pe.CUSTOM:C=i[1],u=i[2];const Z=i[3],U=i[4],j=6==i.length?i[5]:void 0;F.geometry=Z,F.feature=L,l in A||(A[l]=[]);const q=A[l];j?j(h,C,u,2,q):(q[0]=h[C],q[1]=h[C+1],q.length=2),U(q,F),++l;break;case pe.DRAW_IMAGE:C=i[1],u=i[2],x=i[3],d=i[4],g=i[5];let z=i[6];const V=i[7],H=i[8],J=i[9],K=i[10];let $=i[11];const Q=i[12];let tt=i[13];const et=i[14],it=i[15];if(!x&&i.length>=20){y=i[19],S=i[20],E=i[21],w=i[22];const t=this.drawLabelWithPointPlacement_(y,S,E,w);x=t.label,i[3]=x;const e=i[23];d=(t.anchorX-e)*this.pixelRatio,i[4]=d;const s=i[24];g=(t.anchorY-s)*this.pixelRatio,i[5]=g,z=x.height,i[6]=z,tt=x.width,i[13]=tt}let st,nt,rt,ot;i.length>25&&(st=i[25]),i.length>17?(nt=i[16],rt=i[17],ot=i[18]):(nt=v.oB,rt=!1,ot=!1),K&&k?$+=O:K||k||($-=O);let at=0;for(;C<u;C+=2){if(st&&st[at++]<tt/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(x.width,x.height,h[C],h[C+1],tt,z,d,g,H,J,$,Q,n,nt,rt||ot,L),s=[t,e,x,i,V,rt?I:null,ot?b:null];if(a){if("none"===et)continue;if("obstacle"===et){a.insert(i.declutterBox);continue}{let t,e;if(it){const i=u-C;if(!it[i]){it[i]=s;continue}if(t=it[i],delete it[i],e=ni(t),a.collides(e))continue}if(a.collides(i.declutterBox))continue;t&&(a.insert(e),this.replayImageOrLabel_.apply(this,t)),a.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,s)}++l;break;case pe.DRAW_CHARS:const ht=i[1],lt=i[2],ct=i[3],ut=i[4];w=i[5];const dt=i[6],gt=i[7],ft=i[8];E=i[9];const _t=i[10];y=i[11],S=i[12];const mt=[i[13],i[13]],pt=this.textStates[S],xt=pt.font,yt=[pt.scale[0]*gt,pt.scale[1]*gt];let St;xt in this.widths_?St=this.widths_[xt]:(St={},this.widths_[xt]=St);const vt=$e(h,ht,lt,2),Et=Math.abs(yt[0])*(0,v.Kd)(xt,y,St);if(ut||Et<=vt){const i=this.textStates[S].textAlign,s=(vt-Et)*oi(y,i),n=Ke(h,ht,lt,2,y,s,dt,Math.abs(yt[0]),v.Kd,xt,St,k?0:this.viewRotation_);t:if(n){const i=[];let s,r,o,h,l;if(E)for(s=0,r=n.length;s<r;++s){l=n[s],o=l[4],h=this.createLabel(o,S,"",E),d=l[2]+(yt[0]<0?-_t:_t),g=ct*h.height+2*(.5-ct)*_t*yt[1]/yt[0]-ft;const r=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,d,g,0,0,l[3],mt,!1,v.oB,!1,L);if(a&&a.collides(r.declutterBox))break t;i.push([t,e,h,r,1,null,null])}if(w)for(s=0,r=n.length;s<r;++s){l=n[s],o=l[4],h=this.createLabel(o,S,w,""),d=l[2],g=ct*h.height-ft;const r=this.calculateImageOrLabelDimensions_(h.width,h.height,l[0],l[1],h.width,h.height,d,g,0,0,l[3],mt,!1,v.oB,!1,L);if(a&&a.collides(r.declutterBox))break t;i.push([t,e,h,r,1,null,null])}a&&a.load(i.map(ni));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++l;break;case pe.END_GEOMETRY:if(void 0!==r){L=i[1];const t=r(L,G);if(t)return t}++l;break;case pe.FILL:D?T++:this.fill_(t),++l;break;case pe.MOVE_TO_LINE_TO:for(C=i[1],u=i[2],M=h[C],P=h[C+1],m=M+.5|0,p=P+.5|0,m===f&&p===_||(t.moveTo(M,P),f=m,_=p),C+=2;C<u;C+=2)M=h[C],P=h[C+1],m=M+.5|0,p=P+.5|0,C!=u-2&&m===f&&p===_||(t.lineTo(M,P),f=m,_=p);++l;break;case pe.SET_FILL_STYLE:I=i,this.alignFill_=i[2],T&&(this.fill_(t),T=0,R&&(t.stroke(),R=0)),t.fillStyle=i[1],++l;break;case pe.SET_STROKE_STYLE:b=i,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,i),++l;break;case pe.STROKE:D?R++:t.stroke(),++l;break;default:++l;break}}T&&this.fill_(t),R&&t.stroke()}execute(t,e,i,s,n,r){this.viewRotation_=s,this.execute_(t,e,i,this.instructions,n,void 0,void 0,r)}executeHitDetection(t,e,i,s,n){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,s,n)}}var li=hi,ci=i(98831);const ui=["Polygon","Circle","LineString","Image","Text","Default"];class di{constructor(t,e,i,s,n,r){this.maxExtent_=t,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Ue.Ue)(),this.createExecutors_(n)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const s=t[e];for(const t in s){const e=s[t];i[t]=new li(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,s=t.length;e<s;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,s,n,r){s=Math.round(s);const o=2*s+1,a=(0,Ue.qC)(this.hitDetectionTransform_,s+.5,s+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=(0,S.E4)(o,o,void 0,{willReadFrequently:!0}));const l=this.hitDetectionContext_;let c;l.canvas.width!==o||l.canvas.height!==o?(l.canvas.width=o,l.canvas.height=o):h||l.clearRect(0,0,o,o),void 0!==this.renderBuffer_&&(c=(0,ve.lJ)(),(0,ve.Wj)(c,t),(0,ve.f3)(c,e*(this.renderBuffer_+s),c));const u=fi(s);let d;function g(t,e){const i=l.getImageData(0,0,o,o).data;for(let a=0,h=u.length;a<h;a++)if(i[u[a]]>0){if(!r||"Image"!==d&&"Text"!==d||r.includes(t)){const i=(u[a]-3)/4,r=s-i%o,h=s-(i/o|0),l=n(t,e,r*r+h*h);if(l)return l}l.clearRect(0,0,o,o);break}}const f=Object.keys(this.executorsByZIndex_).map(Number);let _,m,p,x,y;for(f.sort(J.j2),_=f.length-1;_>=0;--_){const t=f[_].toString();for(p=this.executorsByZIndex_[t],m=ui.length-1;m>=0;--m)if(d=ui[m],x=p[d],void 0!==x&&(y=x.executeHitDetection(l,a,i,g,c),y))return y}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],s=e[1],n=e[2],r=e[3],o=[i,s,i,r,n,r,n,s];return(0,Je.vT)(o,0,8,2,t,o),o}isEmpty(){return(0,ci.x)(this.executorsByZIndex_)}execute(t,e,i,s,n,r,o){const a=Object.keys(this.executorsByZIndex_).map(Number);let h,l,c,u,d,g;for(a.sort(J.j2),this.maxExtent_&&(t.save(),this.clip(t,i)),r=r||ui,o&&a.reverse(),h=0,l=a.length;h<l;++h){const l=a[h].toString();for(d=this.executorsByZIndex_[l],c=0,u=r.length;c<u;++c){const a=r[c];g=d[a],void 0!==g&&g.execute(t,e,i,s,n,o)}}this.maxExtent_&&t.restore()}}const gi={};function fi(t){if(void 0!==gi[t])return gi[t];const e=2*t+1,i=t*t,s=new Array(i+1);for(let r=0;r<=t;++r)for(let n=0;n<=t;++n){const o=r*r+n*n;if(o>i)break;let a=s[o];a||(a=[],s[o]=a),a.push(4*((t+r)*e+(t+n))+3),r>0&&a.push(4*((t-r)*e+(t+n))+3),n>0&&(a.push(4*((t+r)*e+(t-n))+3),r>0&&a.push(4*((t-r)*e+(t-n))+3))}const n=[];for(let r=0,o=s.length;r<o;++r)s[r]&&n.push(...s[r]);return gi[t]=n,n}var _i=di,mi=i(22511),pi=i(9483);class xi extends Se{constructor(t,e,i,s,n,r,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?(0,Fe.FH)(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=n,this.squaredTolerance_=r,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,Ue.Ue)()}drawImages_(t,e,i,s){if(!this.image_)return;const n=(0,Je.vT)(t,e,i,s,this.transform_,this.pixelCoordinates_),r=this.context_,o=this.tmpLocalTransform_,a=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=a*this.imageOpacity_);let h=this.imageRotation_;0===this.transformRotation_&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let l=0,c=n.length;l<c;l+=2){const t=n[l]-this.imageAnchorX_,e=n[l+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const i=t+this.imageAnchorX_,s=e+this.imageAnchorY_;(0,Ue.qC)(o,i,s,1,1,h,-i,-s),r.save(),r.transform.apply(r,o),r.translate(i,s),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=a)}drawText_(t,e,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const n=(0,Je.vT)(t,e,i,s,this.transform_,this.pixelCoordinates_),r=this.context_;let o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=s){const t=n[e]+this.textOffsetX_,i=n[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(r.save(),r.translate(t-this.textOffsetX_,i-this.textOffsetY_),r.rotate(o),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,t,i),this.textFillState_&&r.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,s,n){const r=this.context_,o=(0,Je.vT)(t,e,i,s,this.transform_,this.pixelCoordinates_);r.moveTo(o[0],o[1]);let a=o.length;n&&(a-=2);for(let h=2;h<a;h+=2)r.lineTo(o[h],o[h+1]);return n&&r.closePath(),i}drawRings_(t,e,i,s){for(let n=0,r=i.length;n<r;++n)e=this.moveToLineTo_(t,e,i[n],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ve.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,pi.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],n=Math.sqrt(i*i+s*s),r=this.context_;r.beginPath(),r.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){const e=t.getType();switch(e){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,s=e.length;i<s;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ve.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,ve.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let s=0;const n=t.getEnds(),r=t.getStride();e.beginPath();for(let t=0,o=n.length;t<o;++t)s=this.moveToLineTo_(i,s,n[t],r,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ve.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ve.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const n=t.getEndss(),r=t.getStride();e.beginPath();for(let t=0,o=n.length;t<o;++t){const e=n[t];s=this.drawRings_(i,s,e,r)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,J.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:v.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:y(e||v.bL)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),s=e.getLineDash(),n=e.getLineDashOffset(),r=e.getLineJoin(),o=e.getWidth(),a=e.getMiterLimit(),h=s||v.X9;this.strokeState_={lineCap:void 0!==i?i:v.mb,lineDash:1===this.pixelRatio_?h:h.map((t=>t*this.pixelRatio_)),lineDashOffset:(n||v.He)*this.pixelRatio_,lineJoin:void 0!==r?r:v.rc,lineWidth:(void 0!==o?o:v.yC)*this.pixelRatio_,miterLimit:void 0!==a?a:v.V4,strokeStyle:y(t||v.Tx)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const r=t.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:y(t||v.bL)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),s=i.getLineDash(),n=i.getLineDashOffset(),r=i.getLineJoin(),o=i.getWidth(),a=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:v.mb,lineDash:s||v.X9,lineDashOffset:n||v.He,lineJoin:void 0!==r?r:v.rc,lineWidth:void 0!==o?o:v.yC,miterLimit:void 0!==a?a:v.V4,strokeStyle:y(t||v.Tx)}}else this.textStrokeState_=null;const s=t.getFont(),n=t.getOffsetX(),r=t.getOffsetY(),o=t.getRotateWithView(),a=t.getRotation(),h=t.getScaleArray(),l=t.getText(),c=t.getTextAlign(),u=t.getTextBaseline();this.textState_={font:void 0!==s?s:v.Df,textAlign:void 0!==c?c:v.PH,textBaseline:void 0!==u?u:v.ru},this.text_=void 0!==l?Array.isArray(l)?l.reduce(((t,e,i)=>t+(i%2?" ":e)),""):l:"",this.textOffsetX_=void 0!==n?this.pixelRatio_*n:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==o&&o,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}else this.text_=""}}var yi=xi;const Si=.5;function vi(t,e,i,s,n,r,o){const a=t[0]*Si,h=t[1]*Si,l=(0,S.E4)(a,h);l.imageSmoothingEnabled=!1;const c=l.canvas,u=new yi(l,Si,n,null,o),d=i.length,g=Math.floor(16777215/d),f={};for(let m=1;m<=d;++m){const t=i[m-1],e=t.getStyleFunction()||s;if(!e)continue;let o=e(t,r);if(!o)continue;Array.isArray(o)||(o=[o]);const a=m*g,h=a.toString(16).padStart(7,"#00000");for(let i=0,s=o.length;i<s;++i){const e=o[i],s=e.getGeometryFunction()(t);if(!s||!(0,ve.kK)(n,s.getExtent()))continue;const r=e.clone(),a=r.getFill();a&&a.setColor(h);const l=r.getStroke();l&&(l.setColor(h),l.setLineDash(null)),r.setText(void 0);const c=e.getImage();if(c){const t=c.getImageSize();if(!t)continue;const e=(0,S.E4)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=h,e.fillRect(0,0,i.width,i.height),r.setImage(new q({img:i,anchor:c.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:c.getOrigin(),opacity:1,size:c.getSize(),scale:c.getScale(),rotation:c.getRotation(),rotateWithView:c.getRotateWithView()}))}const u=r.getZIndex()||0;let d=f[u];d||(d={},f[u]=d,d["Polygon"]=[],d["Circle"]=[],d["LineString"]=[],d["Point"]=[]);const g=s.getType();if("GeometryCollection"===g){const t=s.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){const i=t[e];d[i.getType().replace("Multi","")].push(i,r)}}else d[g.replace("Multi","")].push(s,r)}}const _=Object.keys(f).map(Number).sort(J.j2);for(let m=0,p=_.length;m<p;++m){const t=f[_[m]];for(const i in t){const s=t[i];for(let t=0,i=s.length;t<i;t+=2){u.setStyle(s[t+1]);for(let i=0,n=e.length;i<n;++i)u.setTransform(e[i]),u.drawGeometry(s[t])}}}return l.getImageData(0,0,c.width,c.height)}function Ei(t,e,i){const s=[];if(i){const n=Math.floor(Math.round(t[0])*Si),r=Math.floor(Math.round(t[1])*Si),o=4*((0,Fe.uZ)(n,0,i.width-1)+(0,Fe.uZ)(r,0,i.height-1)*i.width),a=i.data[o],h=i.data[o+1],l=i.data[o+2],c=l+256*(h+256*a),u=Math.floor(16777215/e.length);c&&c%u===0&&s.push(e[c/u-1])}return s}const wi=.5,Ci={Point:Pi,LineString:Di,Polygon:Wi,MultiPoint:Gi,MultiLineString:Li,MultiPolygon:Mi,GeometryCollection:Fi,Circle:bi};function Ti(t,e){return parseInt((0,f.sq)(t),10)-parseInt((0,f.sq)(e),10)}function Ri(t,e){const i=Ii(t,e);return i*i}function Ii(t,e){return wi*t/e}function bi(t,e,i,s,n){const r=i.getFill(),o=i.getStroke();if(r||o){const n=t.getBuilder(i.getZIndex(),"Circle");n.setFillStrokeStyle(r,o),n.drawCircle(e,s)}const a=i.getText();if(a&&a.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,s)}}function Ai(t,e,i,s,n,r,o){let a=!1;const h=i.getImage();if(h){const t=h.getImageState();t==g.Z.LOADED||t==g.Z.ERROR?h.unlistenImageChange(n):(t==g.Z.IDLE&&h.load(),h.listenImageChange(n),a=!0)}return Oi(t,e,i,s,r,o),a}function Oi(t,e,i,s,n,r){const o=i.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(s,n),h=i.getRenderer();if(h)ki(t,a,i,e);else{const s=Ci[a.getType()];s(t,a,i,e,r)}}function ki(t,e,i,s){if("GeometryCollection"==e.getType()){const n=e.getGeometries();for(let e=0,r=n.length;e<r;++e)ki(t,n[e],i,s);return}const n=t.getBuilder(i.getZIndex(),"Default");n.drawCustom(e,s,i.getRenderer(),i.getHitDetectionRenderer())}function Fi(t,e,i,s,n){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const e=Ci[r[o].getType()];e(t,r[o],i,s,n)}}function Di(t,e,i,s,n){const r=i.getStroke();if(r){const n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,r),n.drawLineString(e,s)}const o=i.getText();if(o&&o.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(o),r.drawText(e,s)}}function Li(t,e,i,s,n){const r=i.getStroke();if(r){const n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,r),n.drawMultiLineString(e,s)}const o=i.getText();if(o&&o.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(o),r.drawText(e,s)}}function Mi(t,e,i,s,n){const r=i.getFill(),o=i.getStroke();if(o||r){const n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(r,o),n.drawMultiPolygon(e,s)}const a=i.getText();if(a&&a.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,s)}}function Pi(t,e,i,s,n){const r=i.getImage(),o=i.getText();let a;if(r){if(r.getImageState()!=g.Z.LOADED)return;let h=t;if(n){const l=r.getDeclutterMode();if("none"!==l)if(h=n,"obstacle"===l){const n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(r,a),n.drawPoint(e,s)}else o&&o.getText()&&(a={})}const l=h.getBuilder(i.getZIndex(),"Image");l.setImageStyle(r,a),l.drawPoint(e,s)}if(o&&o.getText()){let r=t;n&&(r=n);const h=r.getBuilder(i.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(e,s)}}function Gi(t,e,i,s,n){const r=i.getImage(),o=i.getText();let a;if(r){if(r.getImageState()!=g.Z.LOADED)return;let h=t;if(n){const l=r.getDeclutterMode();if("none"!==l)if(h=n,"obstacle"===l){const n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(r,a),n.drawMultiPoint(e,s)}else o&&o.getText()&&(a={})}const l=h.getBuilder(i.getZIndex(),"Image");l.setImageStyle(r,a),l.drawMultiPoint(e,s)}if(o&&o.getText()){let r=t;n&&(r=n);const h=r.getBuilder(i.getZIndex(),"Text");h.setTextStyle(o,a),h.drawText(e,s)}}function Wi(t,e,i,s,n){const r=i.getFill(),o=i.getStroke();if(r||o){const n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(r,o),n.drawPolygon(e,s)}const a=i.getText();if(a&&a.getText()){const r=(n||t).getBuilder(i.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,s)}}var Xi=i(79962),Bi=i(37736);class Yi extends He{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,ve.lJ)(),this.wrappedRenderedExtent_=(0,ve.lJ)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const s=e.extent,n=e.viewState,r=n.center,o=n.resolution,a=n.projection,h=n.rotation,l=a.getExtent(),c=this.getLayer().getSource(),u=e.pixelRatio,d=e.viewHints,g=!(d[mi.Z.ANIMATING]||d[mi.Z.INTERACTING]),f=this.compositionContext_,_=Math.round(e.size[0]*u),m=Math.round(e.size[1]*u),p=c.getWrapX()&&a.canWrapX(),x=p?(0,ve.dz)(l):null,y=p?Math.ceil((s[2]-l[2])/x)+1:1;let S=p?Math.floor((s[0]-l[0])/x):0;do{const e=this.getRenderTransform(r,o,h,u,_,m,S*x);t.execute(f,1,e,h,g,void 0,i)}while(++S<y)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,S.E4)(this.context.canvas.width,this.context.canvas.height,je);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,S.jy)(this.compositionContext_),je.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,s=t.layerStatesArray[t.layerIndex];(0,Ue.n3)(this.pixelTransform,1/i,1/i),(0,Ue.nb)(this.inversePixelTransform,this.pixelTransform);const n=(0,Ue.BB)(this.pixelTransform);this.useContainer(e,n,this.getBackground(t));const r=this.context,o=r.canvas,a=this.replayGroup_,h=this.declutterExecutorGroup;let l=a&&!a.isEmpty()||h&&!h.isEmpty();if(!l){const t=this.getLayer().hasListener(Ze.Z.PRERENDER)||this.getLayer().hasListener(Ze.Z.POSTRENDER);if(!t)return null}const c=Math.round(t.size[0]*i),u=Math.round(t.size[1]*i);o.width!=c||o.height!=u?(o.width=c,o.height=u,o.style.transform!==n&&(o.style.transform=n)):this.containerReused||r.clearRect(0,0,c,u),this.preRender(r,t);const d=t.viewState,g=d.projection;this.opacity_=s.opacity,this.setupCompositionContext_();let f=!1;if(l&&s.extent&&this.clipping){const e=(0,Xi.dY)(s.extent,g);l=(0,ve.kK)(e,t.extent),f=l&&!(0,ve.r4)(e,t.extent),f&&this.clipUnrotated(this.compositionContext_,t,e)}return l&&this.renderWorlds(a,t),f&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(r,t),this.renderedRotation_!==d.rotation&&(this.renderedRotation_=d.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise((e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,Ue.nn)(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,s=this.renderedRotation_,n=this.renderedProjection_,r=this.wrappedRenderedExtent_,o=this.getLayer(),a=[],h=t[0]*Si,l=t[1]*Si;a.push(this.getRenderTransform(e,i,s,Si,h,l,0).slice());const c=o.getSource(),u=n.getExtent();if(c.getWrapX()&&n.canWrapX()&&!(0,ve.r4)(u,r)){let t=r[0];const n=(0,ve.dz)(u);let o,c=0;while(t<u[0])--c,o=n*c,a.push(this.getRenderTransform(e,i,s,Si,h,l,o).slice()),t+=n;c=0,t=r[2];while(t>u[2])++c,o=n*c,a.push(this.getRenderTransform(e,i,s,Si,h,l,o).slice()),t-=n}this.hitDetectionImageData_=vi(t,a,this.renderedFeatures_,o.getStyleFunction(),r,i,s)}e(Ei(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,i,s,n){if(!this.replayGroup_)return;const r=e.viewState.resolution,o=e.viewState.rotation,a=this.getLayer(),h={},l=function(t,e,i){const r=(0,f.sq)(t),o=h[r];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return h[r]=!0,n.splice(n.lastIndexOf(o),1),s(t,a,e);o.geometry=e,o.distanceSq=i}}else{if(0===i)return h[r]=!0,s(t,a,e);n.push(h[r]={feature:t,layer:a,geometry:e,distanceSq:i,callback:s})}};let c;const u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some((s=>c=s.forEachFeatureAtCoordinate(t,r,o,i,l,s===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const s=t.viewHints[mi.Z.ANIMATING],n=t.viewHints[mi.Z.INTERACTING],r=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&&!r&&s||!o&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,h=t.viewState,l=h.projection,c=h.resolution,u=t.pixelRatio,d=e.getRevision(),g=e.getRenderBuffer();let f=e.getRenderOrder();void 0===f&&(f=Ti);const _=h.center.slice(),m=(0,ve.f3)(a,g*c),p=m.slice(),x=[m.slice()],y=l.getExtent();if(i.getWrapX()&&l.canWrapX()&&!(0,ve.r4)(y,t.extent)){const t=(0,ve.dz)(y),e=Math.max((0,ve.dz)(m)/2,t);m[0]=y[0]-e,m[2]=y[2]+e,(0,Bi.Cf)(_,l);const i=(0,ve.Cf)(x[0],l);i[0]<y[0]&&i[2]<y[2]?x.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>y[0]&&i[2]>y[2]&&x.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==f&&(0,ve.r4)(this.wrappedRenderedExtent_,m))return(0,J.fS)(this.renderedExtent_,p)||(this.hitDetectionImageData_=null,this.renderedExtent_=p),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const S=new Be(Ii(c,u),m,c,u);let v;this.getLayer().getDeclutter()&&(v=new Be(Ii(c,u),m,c,u));const E=(0,Xi.Cs)();let w;if(E){for(let t=0,e=x.length;t<e;++t){const e=x[t],s=(0,Xi.Fj)(e,l);i.loadFeatures(s,(0,Xi.on)(c,l),E)}w=(0,Xi.WO)(E,l)}else for(let k=0,F=x.length;k<F;++k)i.loadFeatures(x[k],c,l);const C=Ri(c,u);let T=!0;const R=t=>{let i;const s=t.getStyleFunction()||e.getStyleFunction();if(s&&(i=s(t,c)),i){const e=this.renderFeature(t,C,i,S,w,v);T=T&&!e}},I=(0,Xi.Fj)(m,l),b=i.getFeaturesInExtent(I);f&&b.sort(f);for(let k=0,F=b.length;k<F;++k)R(b[k]);this.renderedFeatures_=b,this.ready=T;const A=S.finish(),O=new _i(m,c,u,i.getOverlaps(),A,e.getRenderBuffer());return v&&(this.declutterExecutorGroup=new _i(m,c,u,i.getOverlaps(),v.finish(),e.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=f,this.renderedExtent_=p,this.wrappedRenderedExtent_=m,this.renderedCenter_=_,this.renderedProjection_=l,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,s,n,r){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,h=i.length;a<h;++a)o=Ai(s,t,i[a],e,this.boundHandleStyleImageChange_,n,r)||o;else o=Ai(s,t,i,e,this.boundHandleStyleImageChange_,n,r);return o}}var Ni=Yi;class Zi extends ue{constructor(t){super(t)}createRenderer(){return new Ni(this)}}var Ui=Zi,ji=i(90825),qi=i(47327),zi=(i(1439),i(87585),i(55315),i(44161)),Vi=i(49480),Hi=i(45497);class Ji extends c.Z{constructor(t,e,i,s,n,r,o){super({}),(0,qi.Z)(this,"vertexAddress",void 0),(0,qi.Z)(this,"fragmentAddress",void 0),(0,qi.Z)(this,"symbolImageAddress",void 0),(0,qi.Z)(this,"paletteImageAddress",void 0),(0,qi.Z)(this,"descriptionAddress",void 0),(0,qi.Z)(this,"poistionAddress",void 0),(0,qi.Z)(this,"vertexScript",null),(0,qi.Z)(this,"fragmentScript",null),(0,qi.Z)(this,"symbolImage",null),(0,qi.Z)(this,"paletteImage",null),(0,qi.Z)(this,"vertexArray",[]),(0,qi.Z)(this,"instanceNum",0),(0,qi.Z)(this,"pixelSize",25),(0,qi.Z)(this,"gl",null),(0,qi.Z)(this,"program",null),(0,qi.Z)(this,"renderVAO",null),(0,qi.Z)(this,"symbolTexture",null),(0,qi.Z)(this,"paletteTexture",null),this.vertexAddress=t,this.fragmentAddress=e,this.symbolImageAddress=i,this.paletteImageAddress=s,this.descriptionAddress=n,this.poistionAddress=r,o&&(this.pixelSize=o)}async prepareData(t,e){const i=zi.Z.get(this.vertexAddress).then((t=>t.data)),s=zi.Z.get(this.fragmentAddress).then((t=>t.data)),n=new Promise(((t,e)=>{const i=new Image;i.src=this.symbolImageAddress,i.onload=()=>{t(i)}})),r=new Promise(((t,e)=>{const i=new Image;i.src=this.paletteImageAddress,i.onload=()=>{t(i)}})),o=zi.Z.get(this.descriptionAddress).then((t=>t.data)),a=zi.Z.get(this.poistionAddress).then((t=>t.data));return Promise.all([i,s,n,r,o,a]).then((i=>{this.vertexScript=i[0],this.fragmentScript=i[1],this.symbolImage=i[2],this.paletteImage=i[3];const s=[],n=[],r=[],o=i[4].markers.description;if(e){for(let a=0;a<o.length;a++)if(o[a].name===e){const e=Math.ceil(o[a].length/t);for(let t=0;t<i[5].features.length;t++){const h=i[5].features[t],l=(0,Vi.LS)(h.geometry.coordinates[0]),c=(0,Vi.LS)(h.geometry.coordinates[1]);for(let t=0;t<e;t++)s.push(o[a].base,o[a].length,t,o[a].ID),n.push(l[0],c[0],l[1],c[1]),r.push(0)}}this.instanceNum=r.length,this.vertexArray=[...s,...n,...r]}else{for(let e=0;e<i[5].features.length;e++){let a;do{a=Math.floor(6*Math.random())}while(3===a);const h=360*Math.random(),l=Math.ceil(o[a].length/t),c=i[5].features[e],u=(0,Vi.LS)(c.geometry.coordinates[0]),d=(0,Vi.LS)(c.geometry.coordinates[1]);for(let t=0;t<l;t++)s.push(o[a].base,o[a].length,t,o[a].ID),n.push(u[0],d[0],u[1],d[1]),r.push(h)}this.instanceNum=r.length,this.vertexArray=[...s,...n,...r]}}))}prepareRenderResource(t){if(null===this.renderVAO){const e=t.createShader(t.VERTEX_SHADER),i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(e,this.vertexScript),t.shaderSource(i,this.fragmentScript),t.compileShader(e),t.compileShader(i),this.program=t.createProgram(),t.attachShader(this.program,e),t.attachShader(this.program,i),t.linkProgram(this.program),this.renderVAO=t.createVertexArray(),t.bindVertexArray(this.renderVAO);const s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.vertexArray),t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,4,t.FLOAT,!1,16,0),t.vertexAttribDivisor(0,1),t.enableVertexAttribArray(1),t.vertexAttribPointer(1,4,t.FLOAT,!1,16,4*this.instanceNum*4),t.vertexAttribDivisor(1,1),t.enableVertexAttribArray(2),t.vertexAttribPointer(2,1,t.FLOAT,!1,4,8*this.instanceNum*4),t.vertexAttribDivisor(2,1),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null),this.symbolImage&&this.paletteImage&&(this.symbolTexture=t.createTexture(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.bindTexture(t.TEXTURE_2D,this.symbolTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.symbolImage),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),this.paletteTexture=t.createTexture(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.bindTexture(t.TEXTURE_2D,this.paletteTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.paletteImage),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST))}}render(t,e){const i=this.renderSources(t,[]);if(this.gl||(this.gl=e.getContext("webgl2")),this.gl){this.prepareRenderResource(this.gl),this.gl.useProgram(this.program);const e=Hi.Ue();Hi.yR(e),Hi.bA(e,e,[this.pixelSize*window.devicePixelRatio,this.pixelSize*window.devicePixelRatio,1]);const i=this.gl.getUniformLocation(this.program,"u_symbolMatrix");this.gl.uniformMatrix4fv(i,!1,e);const s=this.gl.getUniformLocation(this.program,"u_bufferSize");this.gl.uniform2f(s,this.gl.canvas.width,this.gl.canvas.height);const n=(0,Vi.LS)(118.81259),r=(0,Vi.LS)(32.048116),o=this.gl.getUniformLocation(this.program,"u_mercatorCenterHigh");this.gl.uniform2f(o,n[0],r[0]);const a=this.gl.getUniformLocation(this.program,"u_mercatorCenterLow");this.gl.uniform2f(a,n[1],r[1]);const h=this.gl.getUniformLocation(this.program,"pixel_size");this.gl.uniform2f(h,t.size[0],t.size[1]);const l=this.gl.getUniformLocation(this.program,"transform_a");this.gl.uniform3f(l,t.coordinateToPixelTransform[0],t.coordinateToPixelTransform[2],t.coordinateToPixelTransform[4]);const c=this.gl.getUniformLocation(this.program,"transform_b");this.gl.uniform3f(c,t.coordinateToPixelTransform[1],t.coordinateToPixelTransform[3],t.coordinateToPixelTransform[5]),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.symbolTexture),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.paletteTexture);const u=this.gl.getUniformLocation(this.program,"symbolTexture"),d=this.gl.getUniformLocation(this.program,"paletteTexture");this.gl.uniform1i(u,0),this.gl.uniform1i(d,1),this.gl.bindVertexArray(this.renderVAO),this.gl.drawArraysInstanced(this.gl.TRIANGLE_STRIP,0,64,this.instanceNum),this.gl.bindVertexArray(null),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.useProgram(null)}return i}}var Ki=i(29845),$i=i(35423);class Qi extends Ki.Z{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"===typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new Qi(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,$i.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=(0,$i.oL)(t,G.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?ts(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function ts(t){if("function"===typeof t)return t;let e;if(Array.isArray(t))e=t;else{(0,O.h)("function"===typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`");const i=t;e=[i]}return function(){return e}}var es=Qi,is=i(29911);class ss extends is.Z{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach($i.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push((0,$i.oL)(this.geometries_[t],G.Z.CHANGE,this.changed,this))}clone(){const t=new ss(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<(0,ve.qf)(this.getExtent(),t,e))return s;const n=this.geometries_;for(let r=0,o=n.length;r<o;++r)s=n[r].closestPointXY(t,e,i,s);return s}containsXY(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)if(i[s].containsXY(t,e))return!0;return!1}computeExtent(t){(0,ve.YN)(t);const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)(0,ve.l7)(t,e[i].getExtent());return t}getGeometries(){return ns(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let s=!1;for(let n=0,r=i.length;n<r;++n){const r=i[n],o=r.getSimplifiedGeometry(t);e.push(o),o!==r&&(s=!0)}if(s){const t=new ss(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)i[s].rotate(t,e);this.changed()}scale(t,e,i){i||(i=(0,ve.qg)(this.getExtent()));const s=this.geometries_;for(let n=0,r=s.length;n<r;++n)s[n].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(ns(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,s=e.length;i<s;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let s=0,n=i.length;s<n;++s)i[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ns(t){const e=[];for(let i=0,s=t.length;i<s;++i)e.push(t[i].clone());return e}var rs=ss;class os{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?(0,Xi.U2)(e.dataProjection):this.readProjection(t);e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=(0,Xi.U2)(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return(0,f.O3)()}readFeature(t,e){return(0,f.O3)()}readFeatures(t,e){return(0,f.O3)()}readGeometry(t,e){return(0,f.O3)()}readProjection(t){return(0,f.O3)()}writeFeature(t,e){return(0,f.O3)()}writeFeatures(t,e){return(0,f.O3)()}writeGeometry(t,e){return(0,f.O3)()}}var as=os;function hs(t,e,i){const s=i?(0,Xi.U2)(i.featureProjection):null,n=i?(0,Xi.U2)(i.dataProjection):null;let r;if(r=s&&n&&!(0,Xi.OP)(s,n)?(e?t.clone():t).transform(e?s:n,e?n:s):t,e&&i&&void 0!==i.decimals){const e=Math.pow(10,i.decimals),s=function(t){for(let i=0,s=t.length;i<s;++i)t[i]=Math.round(t[i]*e)/e;return t};r===t&&(r=t.clone()),r.applyTransform(s)}return r}class ls extends as{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(cs(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(cs(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return(0,f.O3)()}readFeaturesFromObject(t,e){return(0,f.O3)()}readGeometry(t,e){return this.readGeometryFromObject(cs(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return(0,f.O3)()}readProjection(t){return this.readProjectionFromObject(cs(t))}readProjectionFromObject(t){return(0,f.O3)()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return(0,f.O3)()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return(0,f.O3)()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return(0,f.O3)()}}function cs(t){if("string"===typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}var us=ls,ds=i(86356),gs=i(44375),fs=i(72402);function _s(t,e,i,s,n,r,o){let a,h;const l=(i-e)/s;if(1===l)a=e;else if(2===l)a=e,h=n;else if(0!==l){let r=t[e],o=t[e+1],l=0;const c=[0];for(let n=e+s;n<i;n+=s){const e=t[n],i=t[n+1];l+=Math.sqrt((e-r)*(e-r)+(i-o)*(i-o)),c.push(l),r=e,o=i}const u=n*l,d=(0,J.ry)(c,u);d<0?(h=(u-c[-d-2])/(c[-d-1]-c[-d-2]),a=e+(-d-2)*s):a=e+d*s}o=o>1?o:2,r=r||new Array(o);for(let c=0;c<o;++c)r[c]=void 0===a?NaN:void 0===h?t[a+c]:(0,Fe.t7)(t[a+c],t[a+s+c],h);return r}function ms(t,e,i,s,n,r){if(i==e)return null;let o;if(n<t[e+s-1])return r?(o=t.slice(e,e+s),o[s-1]=n,o):null;if(t[i-1]<n)return r?(o=t.slice(i-s,i),o[s-1]=n,o):null;if(n==t[e+s-1])return t.slice(e,e+s);let a=e/s,h=i/s;while(a<h){const e=a+h>>1;n<t[(e+1)*s-1]?h=e:a=e+1}const l=t[a*s-1];if(n==l)return t.slice((a-1)*s,(a-1)*s+s);const c=t[(a+1)*s-1],u=(n-l)/(c-l);o=[];for(let d=0;d<s-1;++d)o.push((0,Fe.t7)(t[(a-1)*s+d],t[a*s+d],u));return o.push(n),o}function ps(t,e,i,s,n,r,o){if(o)return ms(t,e,i[i.length-1],s,n,r);let a;if(n<t[s-1])return r?(a=t.slice(0,s),a[s-1]=n,a):null;if(t[t.length-1]<n)return r?(a=t.slice(t.length-s),a[s-1]=n,a):null;for(let h=0,l=i.length;h<l;++h){const r=i[h];if(e!=r){if(n<t[e+s-1])return null;if(n<=t[r-1])return ms(t,e,r,s,n,!1);e=r}}return null}var xs=i(55383);class ys extends pi.ZP{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?(0,J.l7)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new ys(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<(0,ve.qf)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,ds.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,ds.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,s))}forEachSegment(t){return(0,fs.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return(0,Ee.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return _s(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return $e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,Ae.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new ys(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,xs.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,gs.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}var Ss=ys;class vs extends pi.ZP{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let e=this.getLayout();const i=t,s=[],n=[];for(let t=0,r=i.length;t<r;++t){const r=i[t];0===t&&(e=r.getLayout()),(0,J.l7)(s,r.getFlatCoordinates()),n.push(s.length)}this.setFlatCoordinates(e,s),this.ends_=n}}appendLineString(t){this.flatCoordinates?(0,J.l7)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new vs(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<(0,ve.qf)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,ds.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,ds.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,s))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,i=void 0!==i&&i,ps(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return(0,Ee.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Ss(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,s=[];let n=0;for(let r=0,o=e.length;r<o;++r){const o=e[r],a=new Ss(t.slice(n,o),i);s.push(a),n=o}return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const s=this.ends_,n=this.stride;for(let r=0,o=s.length;r<o;++r){const o=s[r],a=_s(e,i,o,n,.5);(0,J.l7)(t,a),i=o}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,Ae.UJ)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new vs(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,xs.AW)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,gs._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}var Es=vs,ws=i(92949);class Cs extends pi.ZP{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?(0,J.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new Cs(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){if(s<(0,ve.qf)(this.getExtent(),t,e))return s;const n=this.flatCoordinates,r=this.stride;for(let o=0,a=n.length;o<a;o+=r){const a=(0,Fe.bI)(t,e,n[o],n[o+1]);if(a<s){s=a;for(let t=0;t<r;++t)i[t]=n[o+t];i.length=r}}return s}getCoordinates(){return(0,Ee.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new ws.Z(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,s=[];for(let n=0,r=t.length;n<r;n+=i){const r=new ws.Z(t.slice(n,n+i),e);s.push(r)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let s=0,n=e.length;s<n;s+=i){const i=e[s],n=e[s+1];if((0,ve.jE)(t,i,n))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,gs.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}var Ts=Cs,Rs=i(54404),Is=i(12732),bs=i(68696),As=i(6940);function Os(t,e,i,s){const n=[];let r=(0,ve.lJ)();for(let o=0,a=i.length;o<a;++o){const a=i[o];r=(0,ve.GN)(t,e,a[0],s),n.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=a[a.length-1]}return n}var ks=i(58903);class Fs extends pi.ZP{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let s=this.getLayout();const n=t,r=[],o=[];for(let t=0,e=n.length;t<e;++t){const e=n[t];0===t&&(s=e.getLayout());const i=r.length,a=e.getEnds();for(let t=0,s=a.length;t<s;++t)a[t]+=i;(0,J.l7)(r,e.getFlatCoordinates()),o.push(a)}e=s,t=r,i=o}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;(0,J.l7)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,s=e.length;t<s;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const i=new Fs(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,s){return s<(0,ve.qf)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,ds.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,ds.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return(0,ks.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,As.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,bs.dL)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,Ee.ug)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Os(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,Is.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Ts(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,bs.Oj)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,bs.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,Ae.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new Fs(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),s=i[i.length-1];if(0!==e)for(let n=0,r=i.length;n<r;++n)i[n]-=e;return new Rs.ZP(this.flatCoordinates.slice(e,s),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,s=[];let n=0;for(let r=0,o=i.length;r<o;++r){const o=i[r].slice(),a=o[o.length-1];if(0!==n)for(let t=0,e=o.length;t<e;++t)o[t]-=n;const h=new Rs.ZP(e.slice(n,a),t,o);s.push(h),n=a}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,xs.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,gs.QT)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var Ds=Fs;class Ls extends us{constructor(t){t=t||{},super(),this.dataProjection=(0,Xi.U2)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,Xi.U2)(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;i="Feature"===t["type"]?t:{type:"Feature",geometry:t,properties:null};const s=Ms(i["geometry"],e),n=new es;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&n.setGeometryName(i["geometry_name"]),n.setGeometry(s),"id"in i&&n.setId(i["id"]),i["properties"]&&n.setProperties(i["properties"],!0),n}readFeaturesFromObject(t,e){const i=t;let s=null;if("FeatureCollection"===i["type"]){const i=t;s=[];const n=i["features"];for(let t=0,r=n.length;t<r;++t)s.push(this.readFeatureFromObject(n[t],e))}else s=[this.readFeatureFromObject(t,e)];return s}readGeometryFromObject(t,e){return Ms(t,e)}readProjectionFromObject(t){const e=t["crs"];let i;if(e)if("name"==e["type"])i=(0,Xi.U2)(e["properties"]["name"]);else{if("EPSG"!==e["type"])throw new Error("Unknown SRS type");i=(0,Xi.U2)("EPSG:"+e["properties"]["code"])}else i=this.dataProjection;return i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},s=t.getId();if(void 0!==s&&(i.id=s),!t.hasProperties())return i;const n=t.getProperties(),r=t.getGeometry();return r&&(i.geometry=Zs(r,e),delete n[t.getGeometryName()]),(0,ci.x)(n)||(i.properties=n),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let s=0,n=t.length;s<n;++s)i.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return Zs(t,this.adaptOptions(e))}}function Ms(t,e){if(!t)return null;let i;switch(t["type"]){case"Point":i=Gs(t);break;case"LineString":i=Ws(t);break;case"Polygon":i=Ns(t);break;case"MultiPoint":i=Bs(t);break;case"MultiLineString":i=Xs(t);break;case"MultiPolygon":i=Ys(t);break;case"GeometryCollection":i=Ps(t);break;default:throw new Error("Unsupported GeoJSON type: "+t["type"])}return hs(i,!1,e)}function Ps(t,e){const i=t["geometries"].map((function(t){return Ms(t,e)}));return new rs(i)}function Gs(t){return new ws.Z(t["coordinates"])}function Ws(t){return new Ss(t["coordinates"])}function Xs(t){return new Es(t["coordinates"])}function Bs(t){return new Ts(t["coordinates"])}function Ys(t){return new Ds(t["coordinates"])}function Ns(t){return new Rs.ZP(t["coordinates"])}function Zs(t,e){t=hs(t,!0,e);const i=t.getType();let s;switch(i){case"Point":s=Hs(t,e);break;case"LineString":s=js(t,e);break;case"Polygon":s=Js(t,e);break;case"MultiPoint":s=zs(t,e);break;case"MultiLineString":s=qs(t,e);break;case"MultiPolygon":s=Vs(t,e);break;case"GeometryCollection":s=Us(t,e);break;case"Circle":s={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return s}function Us(t,e){e=Object.assign({},e),delete e.featureProjection;const i=t.getGeometriesArray().map((function(t){return Zs(t,e)}));return{type:"GeometryCollection",geometries:i}}function js(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function qs(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function zs(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function Vs(t,e){let i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}function Hs(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function Js(t,e){let i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}}var Ks=Ls,$s=i(45144),Qs=i(46208),tn=i(25375),en=i(99845);class sn{constructor(t){this.rbush_=new d(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,f.sq)(e)]=i}load(t,e){const i=new Array(e.length);for(let s=0,n=e.length;s<n;s++){const n=t[s],r=e[s],o={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:r};i[s]=o,this.items_[(0,f.sq)(r)]=o}this.rbush_.load(i)}remove(t){const e=(0,f.sq)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[(0,f.sq)(e)],s=[i.minX,i.minY,i.maxX,i.maxY];(0,ve.fS)(s,t)||(this.remove(e),this.insert(t,e))}getAll(){const t=this.rbush_.all();return t.map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},i=this.rbush_.search(e);return i.map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let s=0,n=t.length;s<n;s++)if(i=e(t[s]),i)return i;return i}isEmpty(){return(0,ci.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,ve.T9)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}var nn=sn,rn=i(35842),on={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"},an=i(46138);function hn(t,e){return[[-1/0,-1/0,1/0,1/0]]}let ln=!1;function cn(t,e,i,s,n,r,o){const a=new XMLHttpRequest;a.open("GET","function"===typeof t?t(i,s,n):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=ln,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let s;"json"==t||"text"==t?s=a.responseText:"xml"==t?(s=a.responseXML,s||(s=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(s=a.response),s?r(e.readFeatures(s,{extent:i,featureProjection:n}),e.readProjection(s)):o()}else o()},a.onerror=o,a.send()}function un(t,e){return function(i,s,n,r,o){const a=this;cn(t,e,i,s,n,(function(t,e){a.addFeatures(t),void 0!==r&&r(t)}),o||an.Zn)}}class dn extends tn.ZP{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class gn extends rn.Z{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=an.Zn,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,O.h)(this.format_,"`format` must be set when `url` is set"),this.loader_=un(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:hn;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,s;this.featuresRtree_=e?new nn:null,this.loadedExtentsRtree_=new nn,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?s=t.features:t.features&&(i=t.features,s=i.getArray()),e||void 0!==i||(i=new $s.Z(s)),void 0!==s&&this.addFeaturesInternal(s),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,f.sq)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new dn(on.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[(0,$i.oL)(e,G.Z.CHANGE,this.handleFeatureChange_,this),(0,$i.oL)(e,en.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const s=e.getId();return void 0!==s&&(s.toString()in this.idIndex_?i=!1:this.idIndex_[s.toString()]=e),i&&((0,O.h)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],s=[];for(let n=0,r=t.length;n<r;n++){const e=t[n],s=(0,f.sq)(e);this.addToIndex_(s,e)&&i.push(e)}for(let n=0,r=i.length;n<r;n++){const t=i[n],r=(0,f.sq)(t);this.setupChangeEvents_(r,t);const o=t.getGeometry();if(o){const i=o.getExtent();e.push(i),s.push(t)}else this.nullGeometryFeatures_[r]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,s),this.hasListener(on.ADDFEATURE))for(let n=0,r=i.length;n<r;n++)this.dispatchEvent(new dn(on.ADDFEATURE,i[n]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(on.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(on.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(Qs.Z.ADD,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(Qs.Z.REMOVE,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){const e=this.featureChangeKeys_[t];e.forEach($i.bN)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new dn(on.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){const s=i.getGeometry();if(s.intersectsCoordinate(t))return e(i)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){const s=i.getGeometry();if(s.intersectsExtent(t)){const t=e(i);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,ci.x)(this.nullGeometryFeatures_)||(0,J.l7)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){const i=e&&e.canWrapX()&&this.getWrapX();if(!i)return this.featuresRtree_.getInExtent(t);const s=(0,ve.MV)(t,e);return[].concat(...s.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],s=t[1];let n=null;const r=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||an.uX,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),h=o;if(o=e.closestPointXY(i,s,r,o),o<h){n=t;const e=Math.sqrt(o);a[0]=i-e,a[1]=s-e,a[2]=i+e,a[3]=s+e}}})),n}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=(0,f.sq)(e),s=e.getGeometry();if(s){const t=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const n=e.getId();if(void 0!==n){const t=n.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new dn(on.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,f.sq)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,ci.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const s=this.loadedExtentsRtree_,n=this.strategy_(t,e,i);for(let r=0,o=n.length;r<o;++r){const t=n[r],o=s.forEachInExtent(t,(function(e){return(0,ve.r4)(e.extent,t)}));o||(++this.loadingExtentsCount_,this.dispatchEvent(new dn(on.FEATURESLOADSTART)),this.loader_.call(this,t,e,i,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new dn(on.FEATURESLOADEND,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new dn(on.FEATURESLOADERROR))})),s.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,(function(e){if((0,ve.fS)(e.extent,t))return i=e,!0})),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=(0,f.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.removeFeatureInternal(t);i&&this.changed()}removeFeatureInternal(t){const e=(0,f.sq)(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach($i.bN),delete this.featureChangeKeys_[e];const s=t.getId();return void 0!==s&&delete this.idIndex_[s.toString()],delete this.uidIndex_[e],this.dispatchEvent(new dn(on.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){(0,O.h)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(un(t,this.format_))}}var fn=gn,_n=(0,s.aZ)({setup(){const t=(0,o.iH)();let e;const i=new c.Z({source:new a.Z({url:"http://t0.tianditu.com/vec_w/wmts?tk=35a94ab5985969d0b93229c30db6abd6&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&FORMAT=tiles"})}),n=new Ji("/graphics_graduate/symbol/shader/symbol-ol.vert.glsl","/graphics_graduate/symbol/shader/symbol-ol.frag.glsl","/graphics_graduate/symbol/texture/strip_z.png","/graphics_graduate/symbol/texture/palette_z.png","/graphics_graduate/symbol/json/tbvs_z.json","/graphics_graduate/symbol/json/output.geojson",40),r=()=>new P({image:new q({src:"/graphics_graduate/symbol/texture/交叉路口.png",scale:.3,anchor:[.5,.5]})}),u=new fn({url:"/graphics_graduate/symbol/json/crossroad_NJ.geojson",format:new Ks}),d=new Ui({source:u,style:r}),g=async()=>{console.log(i,n),await n.prepareData(64),e=new h.Z({target:t.value,layers:[i,d,n],view:new l.ZP({center:[118.81259,32.048116],projection:"EPSG:4326",zoom:10}),controls:(0,ji.c)({zoom:!1,rotate:!1,attribution:!1})})};return(0,s.bv)((()=>{g()})),{container:t}}}),mn=i(40089);const pn=(0,mn.Z)(_n,[["render",r],["__scopeId","data-v-a93dd2e6"]]);var xn=pn}}]);
//# sourceMappingURL=666.863299e2.js.map